---
title: Gravação de animação de entrada
description: Documentação sobre o sistema de gravação de animação de entrada no MRTK
author: CDiaz-MS
ms.author: cadia
ms.date: 01/12/2021
keywords: Unity, HoloLens, HoloLens 2, Realidade misturada, desenvolvimento, MRTK,
ms.openlocfilehash: 6bdb764c5905352b9aec7c1512a73e727b60573a
ms.sourcegitcommit: f338b1f121a10577bcce08a174e462cdc86d5874
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/01/2021
ms.locfileid: "113176945"
---
# <a name="input-animation-recording"></a><span data-ttu-id="d1e4c-104">Gravação de animação de entrada</span><span class="sxs-lookup"><span data-stu-id="d1e4c-104">Input animation recording</span></span>

<span data-ttu-id="d1e4c-105">O MRTK apresenta um sistema de gravação pelo qual os dados de movimentação de cabeça e acompanhamento de mão podem ser armazenados em arquivos de animação.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-105">MRTK features an recording system by which head movement and hand tracking data can be stored in animation files.</span></span> <span data-ttu-id="d1e4c-106">Em seguida, os dados gravados podem ser interpretados usando o sistema [de simulação de entrada](input-simulation-service.md).</span><span class="sxs-lookup"><span data-stu-id="d1e4c-106">The recorded data can then be played back using the [input simulation system](input-simulation-service.md).</span></span>

<span data-ttu-id="d1e4c-107">A entrada de gravação é uma ferramenta útil em uma variedade de situações:</span><span class="sxs-lookup"><span data-stu-id="d1e4c-107">Recording input is a useful tool in a variety of situations:</span></span>

* <span data-ttu-id="d1e4c-108">Criando testes automatizados para interação, manipulações, solucionadores etc. A criação da movimentação de controladores e mãos para esses testes pode ser demorada.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-108">Creating automated tests for interaction, manipulations, solvers, etc. Creating the movement of controllers and hands for these tests can be time consuming.</span></span> <span data-ttu-id="d1e4c-109">Registrar a entrada diretamente pode acelerar o processo e fornecer dados do mundo real.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-109">Recording input directly can speed up the process and provide real-world data.</span></span>
* <span data-ttu-id="d1e4c-110">Ensinando o uso de elementos de UX por meio de animações.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-110">Teaching the use of UX elements through animations.</span></span>
  <span data-ttu-id="d1e4c-111">Mostrar aos usuários como interagir com botões e outros objetos pode suavizar a curva de aprendizado.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-111">Showing users how to interact with buttons and other objects can smooth the learning curve.</span></span>
* <span data-ttu-id="d1e4c-112">Depuração de comportamento inesperado que pode ser encontrado durante o uso regular.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-112">Debugging unexpected behavior that may be encountered during regular use.</span></span>
  <span data-ttu-id="d1e4c-113">O sistema de gravação dá suporte a um conceito de "buffer sem rolagem" que permite a gravação de entrada recente em segundo plano.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-113">The recording system supports a "rolling buffer" concept that allows recording recent input in the background.</span></span>
  <span data-ttu-id="d1e4c-114">Consulte [Serviço de Gravação de Entrada](#input-recording-service).</span><span class="sxs-lookup"><span data-stu-id="d1e4c-114">See [Input Recording Service](#input-recording-service).</span></span>

## <a name="recording-and-playback-services"></a><span data-ttu-id="d1e4c-115">Serviços de gravação e reprodução</span><span class="sxs-lookup"><span data-stu-id="d1e4c-115">Recording and playback services</span></span>

<span data-ttu-id="d1e4c-116">Dois serviços de sistema de entrada são fornecidos para registrar e reproduzir a entrada, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-116">Two input system services are provided to record and play back input respectively.</span></span>

### <a name="input-recording-service"></a><span data-ttu-id="d1e4c-117">Serviço de gravação de entrada</span><span class="sxs-lookup"><span data-stu-id="d1e4c-117">Input recording service</span></span>

<span data-ttu-id="d1e4c-118">[`InputRecordingService`](xref:Microsoft.MixedReality.Toolkit.Input.InputRecordingService) O recebe dados da transformação principal da câmera e dos controladores de mão ativos e os armazena em um buffer interno.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-118">[`InputRecordingService`](xref:Microsoft.MixedReality.Toolkit.Input.InputRecordingService) takes data from the main camera transform and active hand controllers and stores it in an internal buffer.</span></span> <span data-ttu-id="d1e4c-119">Quando solicitado, esses dados são serializados em arquivos binários para armazenamento e reprodução posterior.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-119">When requested this data is then serialized into binary files for storage and later replay.</span></span>

<a target="_blank" href="../images/input-simulation/MRTK_InputAnimation_RecordingDiagram.png">
  <img src="../images/input-simulation/MRTK_InputAnimation_RecordingDiagram.png" title="Animação de entrada de gravação" width="80%" alt="Recording diagram" class="center" />
</a>

<span data-ttu-id="d1e4c-121">Para iniciar a gravação de entrada, chame a [`StartRecording`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.StartRecording) função .</span><span class="sxs-lookup"><span data-stu-id="d1e4c-121">To start recording input call the [`StartRecording`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.StartRecording) function.</span></span> <span data-ttu-id="d1e4c-122">[`StopRecording`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.StopRecording) pausa a gravação (mas não descarta os dados registrados até agora, use [`DiscardRecordedInput`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.DiscardRecordedInput) para fazer isso, se necessário).</span><span class="sxs-lookup"><span data-stu-id="d1e4c-122">[`StopRecording`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.StopRecording) will pause recording (but not discard the data recorded so far, use [`DiscardRecordedInput`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.DiscardRecordedInput) to do this if needed).</span></span>

<span data-ttu-id="d1e4c-123">Por padrão, o tamanho do buffer de gravação é limitado a 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-123">By default the size of the recording buffer is limited to 30 seconds.</span></span> <span data-ttu-id="d1e4c-124">Isso permite que o serviço de gravação continue gravando em segundo plano sem acumular muitos dados e salve os últimos 30 segundos quando necessário.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-124">This allows the recording service to keep recording in the background without accumulating too much data, and then save the last 30 seconds when required.</span></span> <span data-ttu-id="d1e4c-125">O intervalo de tempo pode ser alterado usando a [`RecordingBufferTimeLimit`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.RecordingBufferTimeLimit) propriedade ou a gravação pode ser ilimitada usando a opção [`UseBufferTimeLimit`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.UseBufferTimeLimit) .</span><span class="sxs-lookup"><span data-stu-id="d1e4c-125">The time interval can be changed using the [`RecordingBufferTimeLimit`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.RecordingBufferTimeLimit) property, or recording can be unlimited using the [`UseBufferTimeLimit`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.UseBufferTimeLimit) option.</span></span>

<span data-ttu-id="d1e4c-126">Os dados no buffer de gravação podem ser salvos em um arquivo binário usando a [função SaveInputAnimation.](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.SaveInputAnimation*)</span><span class="sxs-lookup"><span data-stu-id="d1e4c-126">The data in the recording buffer can be saved in a binary file using the [SaveInputAnimation](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.SaveInputAnimation*) function.</span></span>

<span data-ttu-id="d1e4c-127">Para obter detalhes sobre o formato de arquivo binário, consulte Especificação de formato de arquivo de [animação de entrada](input-animation-file-format.md).</span><span class="sxs-lookup"><span data-stu-id="d1e4c-127">For details on the binary file format see [Input Animation File Format Specification](input-animation-file-format.md).</span></span>

### <a name="input-playback-service"></a><span data-ttu-id="d1e4c-128">Serviço de reprodução de entrada</span><span class="sxs-lookup"><span data-stu-id="d1e4c-128">Input playback service</span></span>

<span data-ttu-id="d1e4c-129">[`InputPlaybackService`](xref:Microsoft.MixedReality.Toolkit.Input.InputPlaybackService) lê um arquivo binário com dados de animação de entrada e, em seguida, aplica esses dados por meio de [InputSimulationService](xref:Microsoft.MixedReality.Toolkit.Input.InputSimulationService) para recriar os movimentos gravados.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-129">[`InputPlaybackService`](xref:Microsoft.MixedReality.Toolkit.Input.InputPlaybackService) reads a binary file with input animation data and then applies this data through the [InputSimulationService](xref:Microsoft.MixedReality.Toolkit.Input.InputSimulationService) to recreate the recorded movements.</span></span>

<a target="_blank" href="../images/input-simulation/MRTK_InputAnimation_PlaybackDiagram.png">
  <img src="../images/input-simulation/MRTK_InputAnimation_PlaybackDiagram.png" title="Animação de entrada de reprodução" width="80%" alt="Play Back diagram" class="center" />
</a>

<span data-ttu-id="d1e4c-131">Para começar a reprodução da animação de entrada, ela deve ser carregada de um arquivo usando a [função LoadInputAnimation.](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.LoadInputAnimation*)</span><span class="sxs-lookup"><span data-stu-id="d1e4c-131">To start playing back input animation it should be loaded from a file using the [LoadInputAnimation](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.LoadInputAnimation*) function.</span></span>

<span data-ttu-id="d1e4c-132">Chame [Reproduzir,](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.Play) [Pausar](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.Play)ou [Parar para](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.Stop) controlar a reprodução da animação.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-132">Call [Play](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.Play), [Pause](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.Play), or [Stop](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.Stop) to control the animation playback.</span></span>

<span data-ttu-id="d1e4c-133">O tempo de animação atual também pode ser controlado diretamente com a [propriedade LocalTime.](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.LocalTime)</span><span class="sxs-lookup"><span data-stu-id="d1e4c-133">The current animation time can also be controlled directly with the [LocalTime](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.LocalTime) property.</span></span>

> [!WARNING]
> <span data-ttu-id="d1e4c-134">Fazer loop ou redefinir a animação de entrada ou a configuração diretamente depurando a linha do tempo pode gerar [`LocalTime`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.LocalTime) resultados inesperados ao manipular a cena!</span><span class="sxs-lookup"><span data-stu-id="d1e4c-134">Looping or resetting input animation or setting [`LocalTime`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.LocalTime) directly by scrubbing the timeline may yield unexpected results when manipulating the scene!</span></span> <span data-ttu-id="d1e4c-135">Somente os movimentos de entrada são registrados, quaisquer alterações adicionais, como mover objetos ou alternar comutadores, não serão redefinidas.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-135">Only the input movements are recorded, any additional changes such as moving objects or flipping switches will not be reset.</span></span> <span data-ttu-id="d1e4c-136">Certifique-se de recarregar a cena se alterações irreversíveis foram feitas.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-136">Make sure to reload the scene if irreversible changes have been made.</span></span>

### <a name="editor-tools-for-recording-and-playing-input-animation"></a><span data-ttu-id="d1e4c-137">Ferramentas do editor para gravação e reprodução de animação de entrada</span><span class="sxs-lookup"><span data-stu-id="d1e4c-137">Editor tools for recording and playing input animation</span></span>

<span data-ttu-id="d1e4c-138">Existem várias ferramentas no editor do Unity para gravar e examinar a animação de entrada.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-138">A number of tools exist in the Unity editor for recording and examining input animation.</span></span> <span data-ttu-id="d1e4c-139">Essas ferramentas podem ser acessadas na janela ferramentas de simulação de entrada [,](input-simulation-service.md#input-simulation-tools-window)que pode ser aberta no menu Realidade _Misturada Toolkit > Utilitários > Simulação de_ Entrada.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-139">These tools can be accessed in the [input simulation tools window](input-simulation-service.md#input-simulation-tools-window), which can be opened from the _Mixed Reality Toolkit > Utilities > Input Simulation_ menu.</span></span>

> [!NOTE]
> <span data-ttu-id="d1e4c-140">A gravação e a reprodução de entrada só funcionam durante o modo de reprodução.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-140">Input recording and playback only works during play mode.</span></span>

<span data-ttu-id="d1e4c-141">A janela de gravação de entrada tem dois modos:</span><span class="sxs-lookup"><span data-stu-id="d1e4c-141">The input recording window has two modes:</span></span>

* <span data-ttu-id="d1e4c-142">_Gravação_ para gravar a entrada durante o modo de reprodução e salvá-la em arquivos de animação.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-142">_Recording_ for recording input during play mode and saving it to animation files.</span></span>

  <span data-ttu-id="d1e4c-143">Ao ativar o botão de gravação, o [`InputRecordingService`](xref:Microsoft.MixedReality.Toolkit.Input.InputRecordingService) está habilitado para registrar a entrada.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-143">When toggling on the recording button the [`InputRecordingService`](xref:Microsoft.MixedReality.Toolkit.Input.InputRecordingService) is enabled to record input.</span></span>
  <span data-ttu-id="d1e4c-144">Ao desligar o botão de gravação, uma seleção de salvar arquivo é mostrada e a animação de entrada gravada é salva no destino selecionado.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-144">When toggling off the recording button a file save selection is shown and the recorded input animation is saved to the selected destination.</span></span>

  <span data-ttu-id="d1e4c-145">O limite de tempo do buffer também pode ser alterado nesse modo.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-145">The buffer time limit can also be changed in this mode.</span></span>

* <span data-ttu-id="d1e4c-146">_Reprodução_ para carregar arquivos de animação e recriar a entrada por meio do sistema de simulação de entrada.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-146">_Playback_ for loading animation files and then recreating input through the input simulation system.</span></span>

  <span data-ttu-id="d1e4c-147">Uma animação deve ser carregada nesse modo primeiro.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-147">An animation must be loaded in this mode first.</span></span> <span data-ttu-id="d1e4c-148">Depois de gravar a entrada no modo de gravação, a animação resultante é carregada automaticamente.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-148">After recording input in recording mode the resulting animation is automatically loaded.</span></span> <span data-ttu-id="d1e4c-149">Como alternativa, clique no botão "Carregar" para selecionar um arquivo de animação existente.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-149">Alternatively click the "Load" button to select an existing animation file.</span></span>

  <span data-ttu-id="d1e4c-150">Os botões de controle de tempo da esquerda para a direita são:</span><span class="sxs-lookup"><span data-stu-id="d1e4c-150">The time control buttons from left to right are:</span></span>

  * <span data-ttu-id="d1e4c-151">_Redefinir_ o tempo de reprodução para o início da animação.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-151">_Reset_ the playback time to the start of the animation.</span></span>
  * <span data-ttu-id="d1e4c-152">_Reproduzir_ animação continuamente ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-152">_Play_ animation continuously over time.</span></span>
  * <span data-ttu-id="d1e4c-153">_Avance_ uma etapa.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-153">_Step_ forward one time step.</span></span>

  <span data-ttu-id="d1e4c-154">O controle deslizante também pode ser usado para limpar a linha do tempo de animação.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-154">The slider can also be used to scrub through the animation timeline.</span></span>

> [!WARNING]
> <span data-ttu-id="d1e4c-155">Fazer loop ou redefinir a animação de entrada ou depurar a linha do tempo pode gerar resultados inesperados ao manipular a cena!</span><span class="sxs-lookup"><span data-stu-id="d1e4c-155">Looping or resetting input animation or scrubbing the timeline may yield unexpected results when manipulating the scene!</span></span> <span data-ttu-id="d1e4c-156">Somente os movimentos de entrada são registrados, quaisquer alterações adicionais, como mover objetos ou alternar comutadores, não serão redefinidas.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-156">Only the input movements are recorded, any additional changes such as moving objects or flipping switches will not be reset.</span></span> <span data-ttu-id="d1e4c-157">Certifique-se de recarregar a cena se alterações irreversíveis foram feitas.</span><span class="sxs-lookup"><span data-stu-id="d1e4c-157">Make sure to reload the scene if irreversible changes have been made.</span></span>
