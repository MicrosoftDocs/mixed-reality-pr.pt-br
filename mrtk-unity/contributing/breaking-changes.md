---
title: Alterações de quebra
description: Política relativa a alterações significativas no MRTK.
author: polar-kev
ms.author: kesemple
ms.date: 01/12/2021
keywords: Unity, HoloLens, HoloLens 2, Realidade misturada, desenvolvimento, MRTK,
ms.openlocfilehash: 713cb5a0965d713c7073004059218ab2ab37201d
ms.sourcegitcommit: 8b4c2b1aac83bc8adf46acfd92b564f899ef7735
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/30/2021
ms.locfileid: "113121544"
---
# <a name="breaking-changes"></a><span data-ttu-id="73a4f-104">Alterações de quebra</span><span class="sxs-lookup"><span data-stu-id="73a4f-104">Breaking changes</span></span>

<span data-ttu-id="73a4f-105">Os consumidores do MRTK dependem de ter uma superfície de API de liberação para liberação estável, para que eles possam realizar atualizações no MRTK sem ter grandes alterações significativas a cada vez.</span><span class="sxs-lookup"><span data-stu-id="73a4f-105">Consumers of the MRTK depend on having a stable release-to-release API surface, so that they can take updates to the MRTK without having large breaking changes each time.</span></span>

<span data-ttu-id="73a4f-106">Esta página descreve nossa política atual sobre alterações significativas no MRTK, juntamente com algumas metas mais longas em torno de como podemos gerenciar melhor a compensação entre manter as alterações significativas baixas e ser capaz de fazer as alterações técnicas de longo prazo certas no código.</span><span class="sxs-lookup"><span data-stu-id="73a4f-106">This page describes our current policy regarding breaking changes in the MRTK, along with some longer term goals around how we can better manage the tradeoff between keeping breaking changes low and being able to make the right long term technical changes to the code.</span></span>

## <a name="what-is-a-breaking-change"></a><span data-ttu-id="73a4f-107">O que é uma alteração significativa?</span><span class="sxs-lookup"><span data-stu-id="73a4f-107">What is a breaking change?</span></span>

<span data-ttu-id="73a4f-108">Uma alteração é uma alteração significativa se atender a qualquer uma das condições da [lista](#list-a) a e atender a todas as condições na [lista B](#list-b)</span><span class="sxs-lookup"><span data-stu-id="73a4f-108">A change is a breaking change if it satisfies any of the conditions in the [List A](#list-a) AND satisfies all of the conditions in [list B](#list-b)</span></span>

### <a name="list-a"></a><span data-ttu-id="73a4f-109">Listar um</span><span class="sxs-lookup"><span data-stu-id="73a4f-109">List A</span></span>

- <span data-ttu-id="73a4f-110">A adição, remoção ou atualização de qualquer membro ou função de qualquer interface (ou remoção/renomeação da interface inteira).</span><span class="sxs-lookup"><span data-stu-id="73a4f-110">The addition, removal, or update of any member or function of any interface (or removal/rename of the entire interface).</span></span>
- <span data-ttu-id="73a4f-111">A remoção, a atualização (alterando o tipo/definição, tornando privado ou interno) de qualquer membro ou função de classe protegida ou pública.</span><span class="sxs-lookup"><span data-stu-id="73a4f-111">The removal, update (changing type/definition, making private or internal) of any protected or public member or function of class.</span></span> <span data-ttu-id="73a4f-112">(ou remoção/renomeação da classe inteira).</span><span class="sxs-lookup"><span data-stu-id="73a4f-112">(or removal/rename of the entire class).</span></span>
- <span data-ttu-id="73a4f-113">A alteração na ordem dos eventos acionados por uma classe.</span><span class="sxs-lookup"><span data-stu-id="73a4f-113">The change in the order of events fired by a class.</span></span>
- <span data-ttu-id="73a4f-114">A renomeação de qualquer serializador particular (sem uma marca FormerlySerializedAs correspondente) ou propriedade pública em um ScriptableObject (especialmente alterações nos perfis).</span><span class="sxs-lookup"><span data-stu-id="73a4f-114">The rename of any private SerializedField (without a corresponding FormerlySerializedAs tag) or public property on a ScriptableObject (especially changes to profiles).</span></span>
- <span data-ttu-id="73a4f-115">Alterar o tipo de um campo em um ScriptableObject (especialmente alterações nos perfis).</span><span class="sxs-lookup"><span data-stu-id="73a4f-115">Changing the type of a field on a ScriptableObject (especially changes to profiles).</span></span>
- <span data-ttu-id="73a4f-116">Atualiza para o namespace ou asmdefs de qualquer classe ou interface.</span><span class="sxs-lookup"><span data-stu-id="73a4f-116">Updates to the namespace or asmdefs of any class or interface.</span></span>
- <span data-ttu-id="73a4f-117">Remoção de qualquer pré-fabricado ou remoção de um script no objeto de nível superior de um pré-fabricado.</span><span class="sxs-lookup"><span data-stu-id="73a4f-117">Removal of any prefab or removal of a script on the top level object of a prefab.</span></span>

### <a name="list-b"></a><span data-ttu-id="73a4f-118">Lista B</span><span class="sxs-lookup"><span data-stu-id="73a4f-118">List B</span></span>

- <span data-ttu-id="73a4f-119">O ativo em questão está no pacote base (ou seja, está em uma das seguintes pastas):</span><span class="sxs-lookup"><span data-stu-id="73a4f-119">The asset in question is in the foundation package (i.e. it's in one of the following folders):</span></span>

  - <span data-ttu-id="73a4f-120">MRTK/núcleo</span><span class="sxs-lookup"><span data-stu-id="73a4f-120">MRTK/Core</span></span>
  - <span data-ttu-id="73a4f-121">MRTK/provedores/</span><span class="sxs-lookup"><span data-stu-id="73a4f-121">MRTK/Providers/</span></span>
  - <span data-ttu-id="73a4f-122">MRTK/serviços/</span><span class="sxs-lookup"><span data-stu-id="73a4f-122">MRTK/Services/</span></span>
  - <span data-ttu-id="73a4f-123">MRTK/SDK/</span><span class="sxs-lookup"><span data-stu-id="73a4f-123">MRTK/SDK/</span></span>
  - <span data-ttu-id="73a4f-124">MRTK/extensões</span><span class="sxs-lookup"><span data-stu-id="73a4f-124">MRTK/Extensions</span></span>

- <span data-ttu-id="73a4f-125">O ativo em questão não pertence ao namespace experimental.</span><span class="sxs-lookup"><span data-stu-id="73a4f-125">The asset in question does not belong to the experimental namespace.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="73a4f-126">Qualquer ativo que esteja no pacote de exemplos (ou seja, parte do MRTK/exemplos/pasta) está sujeito a alterações a qualquer momento, pois os ativos foram projetados para serem copiados e exibidos por consumidores como "implementações de referência", mas não fazem parte do conjunto principal de APIs e ativos.</span><span class="sxs-lookup"><span data-stu-id="73a4f-126">Any asset that sits in the examples package (i.e. part of the MRTK/Examples/ folder) is subject to change at any time, as assets there are designed to be copied and viewed by consumers as 'reference implementations' but are not part of the core set of APIs and assets.</span></span> <span data-ttu-id="73a4f-127">Os ativos no namespace experimental (ou mais geralmente, os recursos rotulados como experimentais) são aqueles que são publicados antes que toda a auditoria devida tenha sido feita (ou seja, testes, iteração de UX, documentação) e seja publicada antecipadamente para obter comentários mais cedo.</span><span class="sxs-lookup"><span data-stu-id="73a4f-127">Assets in the experimental namespace (or more generally, features labelled as experimental) are ones that get published before all due diligence has been done (i.e. tests, UX iteration, documentation) and is published early to get feedback sooner.</span></span>  <span data-ttu-id="73a4f-128">No entanto, como eles não têm testes e documentação, e como é provável que não tenhamos assumido todas as interações e designs, publicamos-os em um estado em que o público deve assumir que eles podem e mudar (ou seja, ser modificado, completamente removido, etc.).</span><span class="sxs-lookup"><span data-stu-id="73a4f-128">However, because they don't have tests and documentation, and because we likely haven't nailed down all of the interactions and designs, we publish them in a state where the public should assume that they can and will change (i.e. be modified, completely removed, etc).</span></span>
>
> <span data-ttu-id="73a4f-129">Consulte [recursos experimentais](../contributing/experimental-features.md) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="73a4f-129">See [Experimental features](../contributing/experimental-features.md) for more information.</span></span>

<span data-ttu-id="73a4f-130">Como a área da superfície para alterações significativas é muito grande, é importante observar que ter uma regra absoluta que diz "sem alterações significativas" seria impossível. pode haver problemas que só podem ser corrigidos de uma forma confortável por meio de uma alteração significativa.</span><span class="sxs-lookup"><span data-stu-id="73a4f-130">As the surface area for breaking changes is very large, it's important to note that having an absolute rule that says "no breaking changes" would be impossible - there may be issues that can only be fixed in a sane way by having a breaking change.</span></span> <span data-ttu-id="73a4f-131">Para colocar de outra maneira, a única maneira de realmente ter "nenhuma alteração significativa" é não ter nenhuma alteração.</span><span class="sxs-lookup"><span data-stu-id="73a4f-131">To put another way, the only way we could really have "no breaking changes" is to have no changes at all.</span></span>

<span data-ttu-id="73a4f-132">Nossa política mais importante é evitar fazer alterações significativas, se possível, e fazer isso apenas se a alteração acumular um valor significativo de longo prazo do cliente ou da estrutura.</span><span class="sxs-lookup"><span data-stu-id="73a4f-132">Our standing policy is to avoid making breaking changes if possible, and only do so if the change would accrue significant customer or framework long term value.</span></span>

## <a name="what-to-do-about-breaking-changes"></a><span data-ttu-id="73a4f-133">O que fazer sobre alterações significativas</span><span class="sxs-lookup"><span data-stu-id="73a4f-133">What to do about breaking changes</span></span>

<span data-ttu-id="73a4f-134">Se for possível realizar algo sem uma alteração significativa e sem comprometer a estrutura de longo prazo e a viabilidade do recurso, não faça a alteração significativa.</span><span class="sxs-lookup"><span data-stu-id="73a4f-134">If it is possible to accomplish something without a breaking change and without compromising the long term structure and viability of the feature, don't do the breaking change.</span></span> <span data-ttu-id="73a4f-135">Se não houver outra maneira, a política atual será avaliar cada alteração significativa individual, para entender se o benefício de fazer a alteração supera o custo para o consumidor de absorver a alteração.</span><span class="sxs-lookup"><span data-stu-id="73a4f-135">If there is no other way, the current policy is to evaluate each individual breaking change, to understand if the benefit from taking the change outweighs the cost to the consumer of absorbing the change.</span></span> <span data-ttu-id="73a4f-136">Debate sobre o que vale a pena fazer e o que geralmente não ocorrerá na sua própria discussão ou problema.</span><span class="sxs-lookup"><span data-stu-id="73a4f-136">Debate about what is worth doing and what isn't will generally take place on the PR or issue discussion itself.</span></span>

<span data-ttu-id="73a4f-137">O que pode acontecer aqui se enquadra em vários buckets:</span><span class="sxs-lookup"><span data-stu-id="73a4f-137">What can happen here falls into several buckets:</span></span>

### <a name="the-breaking-change-adds-value-but-could-be-written-in-a-way-that-isnt-breaking"></a><span data-ttu-id="73a4f-138">A alteração significativa adiciona valor, mas pode ser escrito de uma forma que não está se dividindo</span><span class="sxs-lookup"><span data-stu-id="73a4f-138">The breaking change adds value but could be written in a way that isn't breaking</span></span>

<span data-ttu-id="73a4f-139">Por exemplo, [essa pr](https://github.com/microsoft/MixedRealityToolkit-Unity/pull/4882) adicionou um novo recurso que foi inicialmente escrito de uma maneira que estava dividindo uma interface existente, mas foi então reescrita onde o recurso foi dividido como sua própria interface.</span><span class="sxs-lookup"><span data-stu-id="73a4f-139">For example, [this PR](https://github.com/microsoft/MixedRealityToolkit-Unity/pull/4882) added a new feature that was initially written in a way that was breaking - it modified an existing interface - but was then rewritten where the feature was broken out as its own interface.</span></span> <span data-ttu-id="73a4f-140">Geralmente, esse é o melhor resultado possível.</span><span class="sxs-lookup"><span data-stu-id="73a4f-140">This is generally the best possible outcome.</span></span> <span data-ttu-id="73a4f-141">Não tente forçar uma alteração em um formato não separável se isso for comprometer a viabilidade de longo prazo ou a estrutura do recurso.</span><span class="sxs-lookup"><span data-stu-id="73a4f-141">Do not try to force a change into a non-breaking form if doing so would compromise the long term viability or structure of the feature.</span></span>

### <a name="the-breaking-change-adds-sufficient-value-to-the-customer-that-its-worth-doing"></a><span data-ttu-id="73a4f-142">A alteração significativa agrega valor suficiente ao cliente que vale a pena fazer</span><span class="sxs-lookup"><span data-stu-id="73a4f-142">The breaking change adds sufficient value to the customer that it's worth doing</span></span>

<span data-ttu-id="73a4f-143">Documente as alterações significativas e forneça a melhor mitigação possível (ou seja, etapas prescritivas sobre como migrar ou melhor ainda as ferramentas que serão migradas automaticamente para o cliente).</span><span class="sxs-lookup"><span data-stu-id="73a4f-143">Document what the breaking changes are and provide the best possible mitigation (i.e. prescriptive steps on how to migrate, or better yet tooling that will automatically migrate for the customer).</span></span> <span data-ttu-id="73a4f-144">Cada versão pode conter uma pequena quantidade de alterações que estão sendo interrompidas-elas devem ser sempre documentadas em documentos como foram feitas nesta [PR](https://github.com/microsoft/MixedRealityToolkit-Unity/pull/4858).</span><span class="sxs-lookup"><span data-stu-id="73a4f-144">Each release may contain a small amount of changes that are breaking - these should always be documented in docs as was done in [this PR](https://github.com/microsoft/MixedRealityToolkit-Unity/pull/4858).</span></span> <span data-ttu-id="73a4f-145">Se já houver um guia de migração 2. x. x → 2. x +1. x + 1, adicione instruções ou ferramentas a esse documento. Se ele não existir, crie-o.</span><span class="sxs-lookup"><span data-stu-id="73a4f-145">If there already is a 2.x.x→2.x+1.x+1 migration guide, then add instructions or tooling to that doc. If it doesn't exist, create it.</span></span>

### <a name="the-breaking-change-adds-value-but-the-customer-pain-would-be-too-high"></a><span data-ttu-id="73a4f-146">A alteração significativa agrega valor, mas o problema do cliente seria muito alto</span><span class="sxs-lookup"><span data-stu-id="73a4f-146">The breaking change adds value but the customer pain would be too high</span></span>

<span data-ttu-id="73a4f-147">Nem todos os tipos de alterações significativas são criados de forma igual-alguns são significativamente mais problemáticos que outros, com base em nossa experiência e com base nas experiências do cliente.</span><span class="sxs-lookup"><span data-stu-id="73a4f-147">Not all types of breaking changes are created equal - some are significantly more painful that others, based on our experience and based on customer experiences.</span></span> <span data-ttu-id="73a4f-148">Por exemplo, as alterações em interfaces podem ser problemáticas, mas se a alteração significativa for aquela em que um cliente provavelmente não terá ampliado/implementado no passado (o sistema de visualização de diagnóstico, por exemplo), o custo real provavelmente será baixo para nada.</span><span class="sxs-lookup"><span data-stu-id="73a4f-148">For example, changes to interfaces may be painful, but if the breaking change is one in which a customer is unlikely to have extended/implemented in the past (the diagnostic visualization system, for example), then the actual cost is probably low to nothing.</span></span> <span data-ttu-id="73a4f-149">No entanto, se a alteração for o tipo de um campo em um ScriptableObject (por exemplo, em um dos perfis principais do MRTK), isso provavelmente causará um grande problema do cliente.</span><span class="sxs-lookup"><span data-stu-id="73a4f-149">However, if the change is the type of a field on a ScriptableObject (for example, on one of the core profiles of the MRTK), this is likely to cause massive customer pain.</span></span> <span data-ttu-id="73a4f-150">Os clientes já clonaram o perfil padrão, a mesclagem/atualização de perfis pode ser extremamente difícil de fazer manualmente (ou seja, por meio de um editor de texto durante o tempo de mesclagem), e copiar novamente o perfil padrão e reconfigurar tudo manualmente é extremamente provável de levar a uma regressão difícil de depurar.</span><span class="sxs-lookup"><span data-stu-id="73a4f-150">Customers have already cloned the default profile, merging/updating profiles can be extremely hard to do manually (i.e. via a text editor during merge time), and re-copying the default profile and reconfiguring everything by hand is extremely likely to lead to hard to debug regressions.</span></span>

<span data-ttu-id="73a4f-151">Essas alterações precisam ser colocadas na prateleira até que exista uma ramificação que permita alterações significativas (juntamente com um valor significativo que dará aos clientes um motivo para a atualização).</span><span class="sxs-lookup"><span data-stu-id="73a4f-151">These changes we have to put back onto the shelf until a branch exists that will allow significantly breaking changes (along with significant value that will give customers a reason to upgrade).</span></span> <span data-ttu-id="73a4f-152">Essa ramificação não existe no momento.</span><span class="sxs-lookup"><span data-stu-id="73a4f-152">Such a branch doesn't currently exist.</span></span> <span data-ttu-id="73a4f-153">Em nossas reuniões futuras de planejamento de iteração, examinaremos o conjunto de alterações/problemas que estavam "muito rompendo" para ver se atingimos uma massa crítica para fazer com que seja razoável buscar um conjunto de alterações de uma só vez.</span><span class="sxs-lookup"><span data-stu-id="73a4f-153">In our future iteration planning meetings, we will review the set of changes/issues that were 'too breaking' to see if we reached a critical mass to make it reasonable to pursue a set of changes all at once.</span></span> <span data-ttu-id="73a4f-154">Observe que é perigoso criar uma ramificação "tudo é permitido" sem que a auditoria detalhada seja feita por causa dos recursos de engenharia limitados que temos e do fato de que teríamos de dividir os testes e a validação entre esses dois.</span><span class="sxs-lookup"><span data-stu-id="73a4f-154">Note that it's dangerous to spin up a "everything is allowed" branch without due diligence being done because of the limited engineering resources we have, and the fact that we'd have to split testing and validation across those two.</span></span> <span data-ttu-id="73a4f-155">Precisa haver uma clara finalidade e uma data de início e de término bem comunicada de tal ramificação quando ela existe.</span><span class="sxs-lookup"><span data-stu-id="73a4f-155">There needs to be a clear purpose and well-communicated start and end date of such a branch when it exists.</span></span>

## <a name="long-term-management-of-breaking-changes"></a><span data-ttu-id="73a4f-156">Gerenciamento de longo prazo de alterações significativas</span><span class="sxs-lookup"><span data-stu-id="73a4f-156">Long term management of breaking changes</span></span>

<span data-ttu-id="73a4f-157">A longo prazo, devemos procurar reduzir o escopo do que é uma alteração significativa, aumentando o conjunto de condições na [lista B](#list-b). O encaminhamento do conjunto de coisas na [lista a](#list-a) sempre estará tecnicamente procurando pelo conjunto de arquivos e ativos que consideramos na "superfície da API pública".</span><span class="sxs-lookup"><span data-stu-id="73a4f-157">In the long term, we should seek to reduce the scope of what is a breaking change by increasing the set of conditions in [List B](#list-b). Going forward the set of things in [List A](#list-a) will always technically be breaking for the set of files and assets that we deem to be in the "public API surface."</span></span> <span data-ttu-id="73a4f-158">A maneira como podemos obter um pouco mais de liberdade para iteração (ou seja, alterar os detalhes da implementação interna, permitindo refatoração e compartilhamento de código entre várias classes, etc.) é mais explícito sobre quais partes do código são uma superfície oficial, em vez de detalhes da implementação.</span><span class="sxs-lookup"><span data-stu-id="73a4f-158">The way that we can get a little more freedom for iteration (i.e. changing up the internal implementation details, allowing for easier refactoring and sharing of code between multiple classes, etc) is to be more explicit about which portions of the code are official surface, rather than implementation detail.</span></span>

<span data-ttu-id="73a4f-159">Uma coisa que já fizemos é introduzir o conceito de um recurso "experimental" (ele pertence ao namespace experimental, ele pode não ter testes/documentação e é propedido publicamente para existir, mas pode ser removido e atualizado sem aviso).</span><span class="sxs-lookup"><span data-stu-id="73a4f-159">One thing we've already done is introduce the concept of an "experimental" feature (it belongs in the experimental namespace, it may not have tests/documentation, and is publicly proclaimed to exist but may be removed and updated without warning).</span></span> <span data-ttu-id="73a4f-160">Isso tem a liberdade de adicionar novos recursos mais cedo para obter comentários anteriores, mas não estar diretamente vinculados à sua superfície de API (porque pode não ter pensado totalmente na superfície da API).</span><span class="sxs-lookup"><span data-stu-id="73a4f-160">This has given has freedom to add new features sooner to get earlier feedback, but not be immediately tied to its API surface (because we may not have fully thought out the API surface).</span></span>

### <a name="other-examples-of-things-that-could-help-in-the-future"></a><span data-ttu-id="73a4f-161">Outros exemplos de coisas que podem ajudar no futuro</span><span class="sxs-lookup"><span data-stu-id="73a4f-161">Other examples of things that could help in the future</span></span>

- <span data-ttu-id="73a4f-162">Uso da [palavra-chave interna](/dotnet/csharp/language-reference/keywords/internal).</span><span class="sxs-lookup"><span data-stu-id="73a4f-162">Usage of the [internal keyword](/dotnet/csharp/language-reference/keywords/internal).</span></span>
  <span data-ttu-id="73a4f-163">Isso permitiria que possamos ter código compartilhado em nossos próprios assemblies (para reduzir a duplicação de código) sem tornar as coisas públicas para consumidores externos.</span><span class="sxs-lookup"><span data-stu-id="73a4f-163">This would allow for us to have shared code within our own assemblies (for reducing code duplication) without making things public to external consumers.</span></span>
- <span data-ttu-id="73a4f-164">Criação de um namespace "interno" (ou seja, Microsoft. MixedReality. Toolkit. Internal. Utilities), no qual documentamos publicamente que qualquer coisa contida nesse namespace interno está sujeita a alterações a qualquer momento e pode ser removida, etc. Isso é semelhante a como as bibliotecas de cabeçalho do C++ farão uso de:: namespaces internos para ocultar seus detalhes de implementação.</span><span class="sxs-lookup"><span data-stu-id="73a4f-164">Creation of an "internal" namespace (i.e. Microsoft.MixedReality.Toolkit.Internal.Utilities), where we publicly document that anything contained within that internal namespace is subject to change at anytime and could be removed, etc. This is similar to how C++ header libraries will make use of ::internal namespaces to hide their implementation details.</span></span>