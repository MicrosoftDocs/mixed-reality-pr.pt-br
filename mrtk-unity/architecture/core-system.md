---
title: Sistema principal
description: Sistema de entrada, gerenciadores de dispositivos e provedores de dados no MRTK
author: cDiaz-MS
ms.author: cadia
ms.date: 01/12/2021
keywords: Unity, HoloLens, HoloLens 2, realidade misturada, desenvolvimento, MRTK, eventos
ms.openlocfilehash: 79ebd3855cd991db168233f00058ab5d42f87d83
ms.sourcegitcommit: 8b4c2b1aac83bc8adf46acfd92b564f899ef7735
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/30/2021
ms.locfileid: "113121594"
---
# <a name="core-system"></a><span data-ttu-id="fc8e9-104">Sistema principal</span><span class="sxs-lookup"><span data-stu-id="fc8e9-104">Core system</span></span>

<span data-ttu-id="fc8e9-105">No coração do sistema de entrada está o [InputSystem](../features/input/overview.md), que é um serviço que é responsável por inicializar e operar toda a funcionalidade relacionada à entrada associada ao MRTK.</span><span class="sxs-lookup"><span data-stu-id="fc8e9-105">At the heart of the input system is the [InputSystem](../features/input/overview.md), which is a service that is responsible for initializing and operating all of the input related functionality associated with the MRTK.</span></span>

> [!NOTE]
> <span data-ttu-id="fc8e9-106">Supõe-se que os leitores já tenham lido e tenham uma compreensão básica da seção [terminologia](terminology.md) .</span><span class="sxs-lookup"><span data-stu-id="fc8e9-106">It is assumed that readers have already read and have a basic understanding of the [terminology](terminology.md) section.</span></span>

<span data-ttu-id="fc8e9-107">Este serviço é responsável por:</span><span class="sxs-lookup"><span data-stu-id="fc8e9-107">This service is responsible for:</span></span>

- <span data-ttu-id="fc8e9-108">Lendo o [perfil do sistema de entrada](../configuration/mixed-reality-configuration-guide.md#input-system-settings)</span><span class="sxs-lookup"><span data-stu-id="fc8e9-108">Reading the [input system profile](../configuration/mixed-reality-configuration-guide.md#input-system-settings)</span></span>
- <span data-ttu-id="fc8e9-109">Iniciando os [provedores de dados](../features/input/input-providers.md) configurados (por exemplo, `Windows Mixed Reality Device Manager` e `OpenVR Device Manager` ).</span><span class="sxs-lookup"><span data-stu-id="fc8e9-109">Starting the configured [data providers](../features/input/input-providers.md) (for example, `Windows Mixed Reality Device Manager` and `OpenVR Device Manager`).</span></span>
- <span data-ttu-id="fc8e9-110">Instanciação do [GazeProvider](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityGazeProvider), que é um componente que é responsável por fornecer informações de olhar de cabeçalho do hololens (1ª geração), além de informações de olhar de olho no estilo do hololens 2.</span><span class="sxs-lookup"><span data-stu-id="fc8e9-110">Instantiation of the [GazeProvider](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityGazeProvider), which is a component that is responsible for providing HoloLens (1st generation) style head gaze information in addition to HoloLens 2 style eye gaze information.</span></span>
- <span data-ttu-id="fc8e9-111">Instanciação do [focusprovider](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityFocusProvider), que é um componente que é responsável pela determinação de objetos que têm foco.</span><span class="sxs-lookup"><span data-stu-id="fc8e9-111">Instantiation of the [FocusProvider](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityFocusProvider), which is a component that is responsible for determining objects that have focus.</span></span> <span data-ttu-id="fc8e9-112">Isso é descrito mais detalhadamente na seção [ponteiros e foco](controllers-pointers-and-focus.md#pointers-and-focus) da documentação.</span><span class="sxs-lookup"><span data-stu-id="fc8e9-112">This is described in more depth in the [pointers and focus](controllers-pointers-and-focus.md#pointers-and-focus) section of the documentation.</span></span>
- <span data-ttu-id="fc8e9-113">Fornecer pontos de registro para todos os eventos de entrada (como [ouvintes globais](#global-listeners)).</span><span class="sxs-lookup"><span data-stu-id="fc8e9-113">Providing registration points for all input events (as [global listeners](#global-listeners)).</span></span>
- <span data-ttu-id="fc8e9-114">Fornecendo recursos de expedição de eventos para esses eventos de entrada.</span><span class="sxs-lookup"><span data-stu-id="fc8e9-114">Providing event dispatch capabilities for those input events.</span></span>

## <a name="input-events"></a><span data-ttu-id="fc8e9-115">Eventos de entrada</span><span class="sxs-lookup"><span data-stu-id="fc8e9-115">Input events</span></span>

<span data-ttu-id="fc8e9-116">Eventos de entrada geralmente são acionados em dois canais diferentes:</span><span class="sxs-lookup"><span data-stu-id="fc8e9-116">Input events are generally fired on two different channels:</span></span>

### <a name="objects-in-focus"></a><span data-ttu-id="fc8e9-117">Objetos em foco</span><span class="sxs-lookup"><span data-stu-id="fc8e9-117">Objects in focus</span></span>

<span data-ttu-id="fc8e9-118">Os eventos podem ser enviados diretamente a um gameobject que tenha foco.</span><span class="sxs-lookup"><span data-stu-id="fc8e9-118">Events can be sent directly to a GameObject that has focus.</span></span> <span data-ttu-id="fc8e9-119">Por exemplo, um objeto pode ter um script que implementa [`IMixedRealityTouchHandler`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityTouchHandler) .</span><span class="sxs-lookup"><span data-stu-id="fc8e9-119">For example, an object might have a script that implements [`IMixedRealityTouchHandler`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityTouchHandler).</span></span>
<span data-ttu-id="fc8e9-120">Esse objeto receberá eventos de toque quando estiver concentrado em uma mão que está perto dele.</span><span class="sxs-lookup"><span data-stu-id="fc8e9-120">This object would get touch events when focused by a hand that is near it.</span></span> <span data-ttu-id="fc8e9-121">Esses tipos de eventos passam "para cima" a hierarquia gameobject até encontrar um gameobject capaz de lidar com o evento.</span><span class="sxs-lookup"><span data-stu-id="fc8e9-121">These types of events go "up" the GameObject hierarchy until it finds a GameObject that is capable of handling the event.</span></span>

<span data-ttu-id="fc8e9-122">Isso é feito usando [ExecuteHierarchy](https://docs.unity3d.com/ScriptReference/EventSystems.ExecuteEvents.ExecuteHierarchy.html) de dentro da implementação do sistema de entrada padrão.</span><span class="sxs-lookup"><span data-stu-id="fc8e9-122">This is done by using [ExecuteHierarchy](https://docs.unity3d.com/ScriptReference/EventSystems.ExecuteEvents.ExecuteHierarchy.html) from within the default input system implementation.</span></span>

### <a name="global-listeners"></a><span data-ttu-id="fc8e9-123">Ouvintes globais</span><span class="sxs-lookup"><span data-stu-id="fc8e9-123">Global listeners</span></span>

<span data-ttu-id="fc8e9-124">Os eventos podem ser enviados para ouvintes globais.</span><span class="sxs-lookup"><span data-stu-id="fc8e9-124">Events can be sent to global listeners.</span></span> <span data-ttu-id="fc8e9-125">É possível registrar-se para todos os eventos de entrada usando a interface do sistema de entrada [`IMixedRealityEventSystem`](xref:Microsoft.MixedReality.Toolkit.IMixedRealityEventSystem) .</span><span class="sxs-lookup"><span data-stu-id="fc8e9-125">It's possible to register for all input events by using the input system's [`IMixedRealityEventSystem`](xref:Microsoft.MixedReality.Toolkit.IMixedRealityEventSystem) interface.</span></span> <span data-ttu-id="fc8e9-126">É recomendável usar o método [RegisterHandler](xref:Microsoft.MixedReality.Toolkit.IMixedRealityEventSystem.RegisterHandler%2A) para o registro de eventos globais – a função preterida fará com que os `Register` ouvintes sejam notificados de todos os eventos de entrada, em vez de apenas eventos de entrada de um tipo específico (em que Type é definido pela interface de evento).</span><span class="sxs-lookup"><span data-stu-id="fc8e9-126">It's recommended to use the [RegisterHandler](xref:Microsoft.MixedReality.Toolkit.IMixedRealityEventSystem.RegisterHandler%2A) method for registering for global events - the deprecated `Register` function will cause listeners to get notified of ALL input events, rather than just input events of a particular type (where type is defined by the event interface).</span></span>

<span data-ttu-id="fc8e9-127">Observe que os [ouvintes de fallback](xref:Microsoft.MixedReality.Toolkit.Input.MixedRealityInputSystem.PushFallbackInputHandler%2A) são outro tipo de ouvintes globais que também são desencorajados, pois eles receberão todos os eventos de entrada únicos que não foram tratados em outro lugar na cena.</span><span class="sxs-lookup"><span data-stu-id="fc8e9-127">Note that [fallback listeners](xref:Microsoft.MixedReality.Toolkit.Input.MixedRealityInputSystem.PushFallbackInputHandler%2A) are another type of global listeners which are also discouraged because they will receive every single input event that hasn't been handled elsewhere in the scene.</span></span>

### <a name="order-of-event-dispatch"></a><span data-ttu-id="fc8e9-128">Ordem de expedição do evento</span><span class="sxs-lookup"><span data-stu-id="fc8e9-128">Order of event dispatch</span></span>

<span data-ttu-id="fc8e9-129">Em geral, os eventos são enviados aos ouvintes da seguinte maneira.</span><span class="sxs-lookup"><span data-stu-id="fc8e9-129">Generally, events are sent to listeners in the following way.</span></span> <span data-ttu-id="fc8e9-130">Observe que, se qualquer uma das etapas abaixo marcar o evento como [manipulado](https://docs.unity3d.com/ScriptReference/EventSystems.AbstractEventData-used.html), o processo de expedição do evento será interrompido.</span><span class="sxs-lookup"><span data-stu-id="fc8e9-130">Note that if any of the steps below mark the event as [handled](https://docs.unity3d.com/ScriptReference/EventSystems.AbstractEventData-used.html), the event dispatch process stops.</span></span>

1. <span data-ttu-id="fc8e9-131">O evento é enviado para ouvintes globais.</span><span class="sxs-lookup"><span data-stu-id="fc8e9-131">Event is sent to global listeners.</span></span>
2. <span data-ttu-id="fc8e9-132">O evento é enviado para caixas de diálogo modais do objeto focalizado.</span><span class="sxs-lookup"><span data-stu-id="fc8e9-132">Event is sent to modal dialogs of the focused object.</span></span>
3. <span data-ttu-id="fc8e9-133">O evento é enviado para o objeto focalizado.</span><span class="sxs-lookup"><span data-stu-id="fc8e9-133">Event is sent to the focused object.</span></span>
4. <span data-ttu-id="fc8e9-134">O evento é enviado aos ouvintes de fallback.</span><span class="sxs-lookup"><span data-stu-id="fc8e9-134">Event is sent to fallback listeners.</span></span>

## <a name="device-managers-and-data-providers"></a><span data-ttu-id="fc8e9-135">Gerenciadores de dispositivos e provedores de dados</span><span class="sxs-lookup"><span data-stu-id="fc8e9-135">Device managers and data providers</span></span>

<span data-ttu-id="fc8e9-136">Essas entidades são responsáveis pela interface com APIs de nível inferior (como APIs de realidade mista do Windows ou APIs OpenVR) e pela conversão de dados desses sistemas em aquelas que se ajustam às abstrações de entrada de nível superior do MRTK.</span><span class="sxs-lookup"><span data-stu-id="fc8e9-136">These entities are responsible for interfacing with lower-level APIs (such as Windows Mixed Reality APIs, or OpenVR APIs) and translating data from those systems into ones that fit the MRTK's higher level input abstractions.</span></span> <span data-ttu-id="fc8e9-137">Eles são responsáveis por detectar, criar e gerenciar o tempo de vida dos [controladores](controllers-pointers-and-focus.md#controllers).</span><span class="sxs-lookup"><span data-stu-id="fc8e9-137">They are responsible for detecting, creating, and managing the lifetime of [controllers](controllers-pointers-and-focus.md#controllers).</span></span>

<span data-ttu-id="fc8e9-138">O fluxo básico de um Gerenciador de dispositivos envolve:</span><span class="sxs-lookup"><span data-stu-id="fc8e9-138">The basic flow of a device manager involves:</span></span>

1. <span data-ttu-id="fc8e9-139">O Gerenciador de dispositivos é instanciado pelo serviço do sistema de entrada.</span><span class="sxs-lookup"><span data-stu-id="fc8e9-139">The device manager is instantiated by the input system service.</span></span>
2. <span data-ttu-id="fc8e9-140">O Gerenciador de dispositivos se registra com seu sistema subjacente (por exemplo, o Gerenciador de dispositivos do Windows Mixed Reality será registrado para eventos de [entrada](../features/input/input-events.md) e de [gesto](../features/input/gestures.md#gesture-events) .</span><span class="sxs-lookup"><span data-stu-id="fc8e9-140">The device manager registers with its underlying system (for example, the Windows Mixed Reality device manager will register for [input](../features/input/input-events.md) and [gesture](../features/input/gestures.md#gesture-events) events.</span></span>
3. <span data-ttu-id="fc8e9-141">Ele cria controladores que ele descobre do sistema subjacente (por exemplo, o provedor pode detectar a presença de mãos articuladas)</span><span class="sxs-lookup"><span data-stu-id="fc8e9-141">It creates controllers that it discovers from the underlying system (for example the provider could detect the presence of articulated hands)</span></span>
4. <span data-ttu-id="fc8e9-142">Em seu loop Update (), chame UpdateController () para sondar o novo estado do sistema subjacente e atualizar sua representação do controlador.</span><span class="sxs-lookup"><span data-stu-id="fc8e9-142">In its Update() loop, call UpdateController() to poll for the new state of the underlying system and update its controller representation.</span></span>
