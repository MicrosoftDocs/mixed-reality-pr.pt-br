---
title: mapeamento espacial
description: O mapeamento espacial fornece uma representação detalhada das superfícies do mundo real no ambiente em torno do HoloLens.
author: mattzmsft
ms.author: mazeller
ms.date: 03/21/2018
ms.topic: article
keywords: mapeamento espacial, HoloLens, realidade misturada, reconstrução de superfície, malha, headset de realidade misturada, headset de realidade misturada do Windows, headset de realidade virtual, HoloLens, MRTK, Kit de Ferramentas de Realidade Misturada, compreensão de cena, malha do mundo, oclusão, física, navegação, observador de superfície, renderização, processamento de malha
ms.openlocfilehash: 941e72b441771849e48e8ebc4924605750804831
ms.sourcegitcommit: c0ba7d7bb57bb5dda65ee9019229b68c2ee7c267
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/19/2021
ms.locfileid: "110143721"
---
# <a name="spatial-mapping"></a><span data-ttu-id="ea42c-104">mapeamento espacial</span><span class="sxs-lookup"><span data-stu-id="ea42c-104">Spatial mapping</span></span>

<span data-ttu-id="ea42c-105">O mapeamento espacial fornece uma representação detalhada das superfícies do mundo real no ambiente em torno do HoloLens, permitindo que os desenvolvedores criem uma experiência de realidade misturada confusa.</span><span class="sxs-lookup"><span data-stu-id="ea42c-105">Spatial mapping provides a detailed representation of real-world surfaces in the environment around the HoloLens, allowing developers to create a convincing mixed reality experience.</span></span> <span data-ttu-id="ea42c-106">Mesclando o mundo real com o mundo virtual, um aplicativo pode fazer com que os hologramas pareçam reais.</span><span class="sxs-lookup"><span data-stu-id="ea42c-106">By merging the real world with the virtual world, an application can make holograms seem real.</span></span> <span data-ttu-id="ea42c-107">Os aplicativos também podem alinhar-se naturalmente com as expectativas do usuário fornecendo comportamentos e interações conhecidos do mundo real.</span><span class="sxs-lookup"><span data-stu-id="ea42c-107">Applications can also more naturally align with user expectations by providing familiar real-world behaviors and interactions.</span></span>

<br>

>[!VIDEO https://www.youtube.com/embed/zff2aQ1RaVo]

## <a name="device-supports"></a><span data-ttu-id="ea42c-108">Suporte ao dispositivo</span><span class="sxs-lookup"><span data-stu-id="ea42c-108">Device supports</span></span>

<table>
    <colgroup>
    <col width="25%" />
    <col width="25%" />
    <col width="25%" />
    <col width="25%" />
    </colgroup>
    <tr>
        <td><span data-ttu-id="ea42c-109"><strong>Recurso</strong></span><span class="sxs-lookup"><span data-stu-id="ea42c-109"><strong>Feature</strong></span></span></td>
        <td><span data-ttu-id="ea42c-110"><a href="/hololens/hololens1-hardware"><strong>HoloLens (1ª geração)</strong></a></span><span class="sxs-lookup"><span data-stu-id="ea42c-110"><a href="/hololens/hololens1-hardware"><strong>HoloLens (1st gen)</strong></a></span></span></td>
        <td><span data-ttu-id="ea42c-111"><a href="https://docs.microsoft.com/hololens/hololens2-hardware"><strong>HoloLens 2</strong></span><span class="sxs-lookup"><span data-stu-id="ea42c-111"><a href="https://docs.microsoft.com/hololens/hololens2-hardware"><strong>HoloLens 2</strong></span></span></td>
        <td><span data-ttu-id="ea42c-112"><a href="../discover/immersive-headset-hardware-details.md"><strong>Headsets imersivos</strong></a></span><span class="sxs-lookup"><span data-stu-id="ea42c-112"><a href="../discover/immersive-headset-hardware-details.md"><strong>Immersive headsets</strong></a></span></span></td>
    </tr>
     <tr>
        <td><span data-ttu-id="ea42c-113">mapeamento espacial</span><span class="sxs-lookup"><span data-stu-id="ea42c-113">Spatial mapping</span></span></td>
        <td><span data-ttu-id="ea42c-114">✔️</span><span class="sxs-lookup"><span data-stu-id="ea42c-114">✔️</span></span></td>
        <td><span data-ttu-id="ea42c-115">✔️</span><span class="sxs-lookup"><span data-stu-id="ea42c-115">✔️</span></span></td>
        <td>❌</td>
    </tr>
</table>


## <a name="why-is-spatial-mapping-important"></a><span data-ttu-id="ea42c-116">Por que o mapeamento espacial é importante?</span><span class="sxs-lookup"><span data-stu-id="ea42c-116">Why is spatial mapping important?</span></span>

<span data-ttu-id="ea42c-117">O mapeamento espacial torna possível posicionar objetos em superfícies reais.</span><span class="sxs-lookup"><span data-stu-id="ea42c-117">Spatial mapping makes it possible to place objects on real surfaces.</span></span> <span data-ttu-id="ea42c-118">Isso ajuda a ancorar objetos no mundo do usuário e aproveita as responsabilidades de profundidade do mundo real. A conclusão de seus hologramas com base em outros hologramas e objetos do mundo real ajuda a convencer o usuário de que esses hologramas estão realmente em seu espaço.</span><span class="sxs-lookup"><span data-stu-id="ea42c-118">This helps anchor objects in the user's world and takes advantage of real world depth cues. Occluding your holograms based on other holograms and real world objects helps convince the user that these holograms are actually in their space.</span></span> <span data-ttu-id="ea42c-119">Os hologramas que flutuam no espaço ou se movem com o usuário não se sentirão tão reais.</span><span class="sxs-lookup"><span data-stu-id="ea42c-119">Holograms floating in space or moving with the user won't feel as real.</span></span> <span data-ttu-id="ea42c-120">Quando possível, coloque itens para conforto.</span><span class="sxs-lookup"><span data-stu-id="ea42c-120">When possible, place items for comfort.</span></span>

<span data-ttu-id="ea42c-121">Visualize superfícies ao colocar ou mover hologramas (use uma grade projetada).</span><span class="sxs-lookup"><span data-stu-id="ea42c-121">Visualize surfaces when placing or moving holograms (use a projected grid).</span></span> <span data-ttu-id="ea42c-122">Isso ajuda os usuários a saber onde eles podem colocar melhor seus hologramas e mostra se o ponto em que eles estão tentando colocar o holograma não está mapeado.</span><span class="sxs-lookup"><span data-stu-id="ea42c-122">This helps users know where they can best place their holograms, and shows if the spot they're trying to place the hologram isn't mapped.</span></span> <span data-ttu-id="ea42c-123">Você poderá "itens de 1000000000" para o usuário se eles acabarem em um ângulo muito grande.</span><span class="sxs-lookup"><span data-stu-id="ea42c-123">You can "billboard items" toward the user if they end up at too much of an angle.</span></span>

## <a name="conceptual-overview"></a><span data-ttu-id="ea42c-124">Visão geral conceitual</span><span class="sxs-lookup"><span data-stu-id="ea42c-124">Conceptual overview</span></span>

<span data-ttu-id="ea42c-125">![Superfícies de malha que abrangem uma sala](images/SurfaceReconstruction.jpg)</span><span class="sxs-lookup"><span data-stu-id="ea42c-125">![Mesh surfaces covering a room](images/SurfaceReconstruction.jpg)</span></span><br>
<span data-ttu-id="ea42c-126">*Um exemplo de uma malha de mapeamento espacial que abrange uma sala*</span><span class="sxs-lookup"><span data-stu-id="ea42c-126">*An example of a spatial mapping mesh covering a room*</span></span>

<span data-ttu-id="ea42c-127">Os dois tipos de objeto primários usados para mapeamento espacial são o 'Observador da Superfície Espacial' e a 'Superfície Espacial'.</span><span class="sxs-lookup"><span data-stu-id="ea42c-127">The two primary object types used for spatial mapping are the 'Spatial Surface Observer' and the 'Spatial Surface'.</span></span>

<span data-ttu-id="ea42c-128">O aplicativo fornece ao Observador da Superfície Espacial um ou mais volumes delimitados para definir as regiões do espaço em que o aplicativo deseja receber dados de mapeamento espacial.</span><span class="sxs-lookup"><span data-stu-id="ea42c-128">The application provides the Spatial Surface Observer with one or more bounding volumes, to define the regions of space in which the application wishes to receive spatial mapping data.</span></span> <span data-ttu-id="ea42c-129">Para cada um desses volumes, o mapeamento espacial fornecerá ao aplicativo um conjunto de superfícies espaciais.</span><span class="sxs-lookup"><span data-stu-id="ea42c-129">For each of these volumes, spatial mapping will provide the application with a set of Spatial Surfaces.</span></span>

<span data-ttu-id="ea42c-130">Esses volumes podem ser fixos (em um local fixo com base no mundo real) ou podem ser anexados ao HoloLens (eles se movem, mas não giram, com o HoloLens à medida que se movem pelo ambiente).</span><span class="sxs-lookup"><span data-stu-id="ea42c-130">These volumes may be stationary (in a fixed location based on the real world) or they may be attached to the HoloLens (they move, but don't rotate, with the HoloLens as it moves through the environment).</span></span> <span data-ttu-id="ea42c-131">Cada superfície espacial descreve as superfícies do mundo real em um pequeno volume de espaço, representado como uma malha de triângulo anexada a um [sistema de coordenadas espaciais](coordinate-systems.md)bloqueados pelo mundo.</span><span class="sxs-lookup"><span data-stu-id="ea42c-131">Each spatial surface describes real-world surfaces in a small volume of space, represented as a triangle mesh attached to a world-locked [spatial coordinate system](coordinate-systems.md).</span></span>

<span data-ttu-id="ea42c-132">Como o HoloLens reúne novos dados sobre o ambiente e, à medida que ocorrem alterações no ambiente, as superfícies espaciais aparecerão, desaparecerão e serão alteradas.</span><span class="sxs-lookup"><span data-stu-id="ea42c-132">As the HoloLens gathers new data about the environment, and as changes to the environment occur, spatial surfaces will appear, disappear, and change.</span></span>

## <a name="spatial-awareness-design-concepts-demo"></a><span data-ttu-id="ea42c-133">Demonstração dos conceitos de design de conscientização espacial</span><span class="sxs-lookup"><span data-stu-id="ea42c-133">Spatial Awareness design concepts demo</span></span>

<span data-ttu-id="ea42c-134">Se você quiser ver os conceitos de design de conscientização espacial em ação, Confira nossa demonstração de vídeo [de conscientização espacial a]() seguir.</span><span class="sxs-lookup"><span data-stu-id="ea42c-134">If you'd like to see Spatial Awareness design concepts in action, check out our [Designing Holograms - Spatial Awareness]() video demo below.</span></span> <span data-ttu-id="ea42c-135">Quando tiver terminado, continue em para obter mais detalhes sobre tópicos específicos.</span><span class="sxs-lookup"><span data-stu-id="ea42c-135">When you've finished, continue on for a more detailed dive into specific topics.</span></span>

> [!VIDEO https://channel9.msdn.com/Shows/Docs-Mixed-Reality/Microsofts-Designing-Holograms-Spatial-Awareness-Chapter/player]

## <a name="spatial-mapping-vs-scene-understanding-worldmesh"></a><span data-ttu-id="ea42c-136">Mapeamento espacial versus WorldMesh de compreensão da cena</span><span class="sxs-lookup"><span data-stu-id="ea42c-136">Spatial Mapping vs. Scene Understanding WorldMesh</span></span>

<span data-ttu-id="ea42c-137">Para o HoloLens 2, é possível consultar uma versão estática dos dados de mapeamento espacial usando o [SDK de compreensão da cena](../develop/platform-capabilities-and-apis/scene-understanding-SDK.md) (configuração EnableWorldMesh).</span><span class="sxs-lookup"><span data-stu-id="ea42c-137">For HoloLens 2, it's possible to query a static version of the spatial mapping data using [Scene understanding SDK](../develop/platform-capabilities-and-apis/scene-understanding-SDK.md) (EnableWorldMesh setting).</span></span> <span data-ttu-id="ea42c-138">Aqui estão as diferenças entre duas maneiras de acessar os dados de mapeamento espacial:</span><span class="sxs-lookup"><span data-stu-id="ea42c-138">Here are the differences between two ways of accessing the spatial mapping data:</span></span>
* <span data-ttu-id="ea42c-139">API de mapeamento espacial:</span><span class="sxs-lookup"><span data-stu-id="ea42c-139">Spatial Mapping API:</span></span>
   * <span data-ttu-id="ea42c-140">Intervalo limitado: os dados de mapeamento espacial disponíveis para aplicativos em um tamanho limitado em cache ' bolha ' em todo o usuário.</span><span class="sxs-lookup"><span data-stu-id="ea42c-140">Limited range: the spatial mapping data available to applications in a limited size cached 'bubble' around the user.</span></span>
   * <span data-ttu-id="ea42c-141">Fornece atualizações de baixa latência de regiões de malha alteradas por meio de eventos de Superfícieschanged.</span><span class="sxs-lookup"><span data-stu-id="ea42c-141">Provides low latency updates of changed mesh regions through SurfacesChanged events.</span></span>
   * <span data-ttu-id="ea42c-142">Nível variável de detalhes controlado por triângulos por parâmetro de medidor cúbico.</span><span class="sxs-lookup"><span data-stu-id="ea42c-142">Variable level of details controlled by Triangles Per Cubic Meter parameter.</span></span>
* <span data-ttu-id="ea42c-143">SDK de compreensão da cena:</span><span class="sxs-lookup"><span data-stu-id="ea42c-143">Scene understanding SDK:</span></span>
   * <span data-ttu-id="ea42c-144">Intervalo ilimitado – fornece todos os dados de mapeamento espacial verificados dentro do raio de consulta.</span><span class="sxs-lookup"><span data-stu-id="ea42c-144">Unlimited range - provides all the scanned spatial mapping data within the query radius.</span></span>
   * <span data-ttu-id="ea42c-145">Fornece um instantâneo estático dos dados de mapeamento espacial.</span><span class="sxs-lookup"><span data-stu-id="ea42c-145">Provides a static snapshot of the spatial mapping data.</span></span> <span data-ttu-id="ea42c-146">Obter os dados de mapeamento espacial atualizados requer a execução de uma nova consulta para toda a malha.</span><span class="sxs-lookup"><span data-stu-id="ea42c-146">Getting the updated spatial mapping data requires running a new query for the whole mesh.</span></span>
   * <span data-ttu-id="ea42c-147">Nível consistente de detalhes controlado pela configuração de RequestedMeshLevelOfDetail.</span><span class="sxs-lookup"><span data-stu-id="ea42c-147">Consistent level of details controlled by RequestedMeshLevelOfDetail setting.</span></span>

## <a name="what-influences-spatial-mapping-quality"></a><span data-ttu-id="ea42c-148">O que influencia a qualidade do mapeamento espacial?</span><span class="sxs-lookup"><span data-stu-id="ea42c-148">What influences spatial mapping quality?</span></span>

<span data-ttu-id="ea42c-149">Vários fatores, [detalhados aqui,](/hololens/hololens-environment-considerations)podem afetar a frequência e a gravidade desses erros.</span><span class="sxs-lookup"><span data-stu-id="ea42c-149">Several factors, detailed [here](/hololens/hololens-environment-considerations), can affect the frequency and severity of these errors.</span></span>  <span data-ttu-id="ea42c-150">No entanto, você deve criar seu aplicativo para que o usuário possa atingir suas metas mesmo na presença de erros nos dados de mapeamento espacial.</span><span class="sxs-lookup"><span data-stu-id="ea42c-150">However, you should design your application so that the user can achieve their goals even in the presence of errors in the spatial mapping data.</span></span>

## <a name="common-usage-scenarios"></a><span data-ttu-id="ea42c-151">Cenários de uso comuns</span><span class="sxs-lookup"><span data-stu-id="ea42c-151">Common usage scenarios</span></span>

![Ilustrações de cenários comuns de uso do Mapeamento Espacial: Posicionamento, Oclusão, Física e Navegação](images/sm-concepts-1000px.png)

### <a name="placement"></a><span data-ttu-id="ea42c-153">Posicionamento</span><span class="sxs-lookup"><span data-stu-id="ea42c-153">Placement</span></span>

<span data-ttu-id="ea42c-154">O mapeamento espacial fornece aos aplicativos a oportunidade de apresentar formas naturais e familiares de interação com o usuário; o que poderia ser mais natural do que colocar seu telefone na mesa?</span><span class="sxs-lookup"><span data-stu-id="ea42c-154">Spatial mapping provides applications with the opportunity to present natural and familiar forms of interaction to the user; what could be more natural than placing down your phone on the desk?</span></span>

<span data-ttu-id="ea42c-155">Restringir o posicionamento de hologramas (ou, em geral, qualquer seleção de locais espaciais) para ficar em superfícies fornece um mapeamento natural de 3D (ponto no espaço) para 2D (ponto na superfície).</span><span class="sxs-lookup"><span data-stu-id="ea42c-155">Constraining the placement of holograms (or more generally, any selection of spatial locations) to lie on surfaces provides a natural mapping from 3D (point in space) to 2D (point on surface).</span></span> <span data-ttu-id="ea42c-156">Isso reduz a quantidade de informações que o usuário precisa fornecer ao aplicativo e torna as interações do usuário mais rápidas, fáceis e precisas.</span><span class="sxs-lookup"><span data-stu-id="ea42c-156">This reduces the amount of information the user needs to provide to the application and makes the user's interactions faster, easier, and more precise.</span></span> <span data-ttu-id="ea42c-157">Isso é verdadeiro porque 'distância' não é algo que estamos acostumados a nos comunicar fisicamente com outras pessoas ou com computadores.</span><span class="sxs-lookup"><span data-stu-id="ea42c-157">This is true because 'distance away' isn't something that we're used to physically communicating to other people or to computers.</span></span> <span data-ttu-id="ea42c-158">Quando apontamos com o dedo, estamos especificando uma direção, mas não uma distância.</span><span class="sxs-lookup"><span data-stu-id="ea42c-158">When we point with our finger, we're specifying a direction but not a distance.</span></span>

<span data-ttu-id="ea42c-159">Uma ressalva importante aqui é que, quando um aplicativo infere a distância da direção (por exemplo, fazendo um raycast ao longo da direção do olhar do usuário para encontrar a superfície espacial mais próxima), isso deve gerar resultados que o usuário possa prever de forma confiável.</span><span class="sxs-lookup"><span data-stu-id="ea42c-159">An important caveat here's that when an application infers distance from direction (for example by doing a raycast along the user's gaze direction to find the nearest spatial surface), this must yield results that the user can reliably predict.</span></span> <span data-ttu-id="ea42c-160">Caso contrário, o usuário perderá a noção de controle e isso poderá se tornar frustrante rapidamente.</span><span class="sxs-lookup"><span data-stu-id="ea42c-160">Otherwise, the user will lose their sense of control and this can quickly become frustrating.</span></span> <span data-ttu-id="ea42c-161">Um método que ajuda com isso é fazer vários raycasts em vez de apenas um.</span><span class="sxs-lookup"><span data-stu-id="ea42c-161">One method that helps with this is to do multiple raycasts instead of just one.</span></span> <span data-ttu-id="ea42c-162">Os resultados agregados devem ser mais suaves e mais previsíveis, menos suscetíveis a influenciar de resultados transitórios de "outlier" (como pode ser causado por raios passando por pequenos orifícios ou atingindo pequenos bits de geometria que o usuário não está ciente).</span><span class="sxs-lookup"><span data-stu-id="ea42c-162">The aggregate results should be smoother and more predictable, less susceptible to influence from transient 'outlier' results (as can be caused by rays passing through tiny holes or hitting small bits of geometry that the user isn't aware of).</span></span> <span data-ttu-id="ea42c-163">A agregação ou suavização também podem ser executadas ao longo do tempo; por exemplo, você pode limitar a velocidade máxima na qual um holograma pode variar em distância do usuário.</span><span class="sxs-lookup"><span data-stu-id="ea42c-163">Aggregation or smoothing can also be performed over time; for example, you can limit the maximum speed at which a hologram can vary in distance from the user.</span></span> <span data-ttu-id="ea42c-164">Simplesmente limitar o valor de distância mínimo e máximo também pode ajudar, de modo que o holograma que está sendo movido não acabe repentinamente na distância ou venha a falhar novamente na face do usuário.</span><span class="sxs-lookup"><span data-stu-id="ea42c-164">Simply limiting the minimum and maximum distance value can also help, so the hologram being moved doesn't suddenly fly away into the distance or come crashing back into the user's face.</span></span>

<span data-ttu-id="ea42c-165">Os aplicativos também podem usar a forma e a direção das superfícies para orientar o posicionamento do holograma.</span><span class="sxs-lookup"><span data-stu-id="ea42c-165">Applications can also use the shape and direction of surfaces to guide hologram placement.</span></span> <span data-ttu-id="ea42c-166">Uma cadeira Holographic não deve penetrar através de paredes e deve ficar com o chão, mesmo que seja ligeiramente desigual.</span><span class="sxs-lookup"><span data-stu-id="ea42c-166">A holographic chair shouldn't penetrate through walls and should sit flush with the floor even if it's slightly uneven.</span></span> <span data-ttu-id="ea42c-167">Esse tipo de funcionalidade provavelmente dependeria do uso de colisões de física em vez de raycasts, mas questões semelhantes serão aplicadas.</span><span class="sxs-lookup"><span data-stu-id="ea42c-167">This kind of functionality would likely rely upon the use of physics collisions rather than raycasts, however similar concerns will apply.</span></span> <span data-ttu-id="ea42c-168">Se o holograma que está sendo posicionado tiver muitos polígonos pequenos que se desdobram, como os lados de uma cadeira, pode fazer sentido expandir a representação física desses polígonos para algo mais largo e suave, de forma que seja mais capaz de deslizar por superfícies espaciais sem realce em captura.</span><span class="sxs-lookup"><span data-stu-id="ea42c-168">If the hologram being placed has many small polygons that stick out, like the legs on a chair, it may make sense to expand the physics representation of those polygons to something wider and smoother so that they're more able to slide over spatial surfaces without snagging.</span></span>

<span data-ttu-id="ea42c-169">Em seu extremo, a entrada do usuário pode ser simplificada de maneira totalmente e as superfícies espaciais podem ser usadas para realizar o posicionamento totalmente automático do holograma.</span><span class="sxs-lookup"><span data-stu-id="ea42c-169">At its extreme, user input can be simplified away entirely and spatial surfaces can be used to do entirely automatic hologram placement.</span></span> <span data-ttu-id="ea42c-170">Por exemplo, o aplicativo poderia fazer um interruptor de Holographic em algum lugar na parede para que o usuário pressione.</span><span class="sxs-lookup"><span data-stu-id="ea42c-170">For example, the application could place a holographic light-switch somewhere on the wall for the user to press.</span></span> <span data-ttu-id="ea42c-171">A mesma limitação sobre previsibilidade se aplica duplamente; Se o usuário espera o controle sobre o posicionamento do holograma, mas o aplicativo nem sempre coloca os hologramas onde eles esperam (se a opção de luz aparecer em algum lugar que o usuário não consegue alcançar), essa será uma experiência frustrante.</span><span class="sxs-lookup"><span data-stu-id="ea42c-171">The same caveat about predictability applies doubly here; if the user expects control over hologram placement, but the application doesn't always place holograms where they expect (if the light-switch appears somewhere that the user can't reach), then this will be a frustrating experience.</span></span> <span data-ttu-id="ea42c-172">Na verdade, pode ser pior fazer o posicionamento automático que exige a correção do usuário, em vez de exigir que o usuário sempre faça o mesmo posicionamento; como *espera*-se um posicionamento automático bem-sucedido, a correção manual parece ser um fardo!</span><span class="sxs-lookup"><span data-stu-id="ea42c-172">It can actually be worse to do automatic placement that requires user correction some of the time, than to just require the user to always do placement themselves; because successful automatic placement is *expected*, manual correction feels like a burden!</span></span>

<span data-ttu-id="ea42c-173">Observe também que a capacidade de um aplicativo de usar superfícies espaciais para posicionamento depende muito da experiência de [verificação](spatial-mapping.md#the-environment-scanning-experience)do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ea42c-173">Note also that the ability of an application to use spatial surfaces for placement depends heavily on the application's [scanning experience](spatial-mapping.md#the-environment-scanning-experience).</span></span> <span data-ttu-id="ea42c-174">Se uma superfície não tiver sido verificada, ela não poderá ser usada para posicionamento.</span><span class="sxs-lookup"><span data-stu-id="ea42c-174">If a surface hasn't been scanned, then it cannot be used for placement.</span></span> <span data-ttu-id="ea42c-175">Cabe ao aplicativo ficar claro para o usuário, para que eles possam ajudar a examinar novas superfícies ou selecionar um novo local.</span><span class="sxs-lookup"><span data-stu-id="ea42c-175">It's up to the application to make this clear to the user, so that they can either help scan new surfaces or select a new location.</span></span>

<span data-ttu-id="ea42c-176">Os comentários visuais para o usuário são de importância fundamental durante o posicionamento.</span><span class="sxs-lookup"><span data-stu-id="ea42c-176">Visual feedback to the user is of paramount importance during placement.</span></span> <span data-ttu-id="ea42c-177">O usuário precisa saber onde o holograma é baseado na superfície mais próxima com [efeitos de terra.](spatial-mapping.md#visualization)</span><span class="sxs-lookup"><span data-stu-id="ea42c-177">The user needs to know where the hologram is based on the nearest surface with [grounding effects](spatial-mapping.md#visualization).</span></span> <span data-ttu-id="ea42c-178">Eles devem entender por que o movimento do holograma está sendo restrito (por exemplo, devido a colisões com outra superfície próxima).</span><span class="sxs-lookup"><span data-stu-id="ea42c-178">They should understand why the movement of their hologram is being constrained (for example, because of collisions with another nearby surface).</span></span> <span data-ttu-id="ea42c-179">Se eles não puderem colocar um holograma no local atual, os comentários visuais deverão deixar claro por que não.</span><span class="sxs-lookup"><span data-stu-id="ea42c-179">If they can't place a hologram in the current location, then visual feedback should make it clear why not.</span></span> <span data-ttu-id="ea42c-180">Por exemplo, se o usuário estiver tentando colocar um diviso holográfico preso na parede, as partes do diviso que estão atrás da parede deverão pulsar em uma cor vermelha.</span><span class="sxs-lookup"><span data-stu-id="ea42c-180">For example, if the user is trying to place a holographic couch stuck half-way into the wall, then the portions of the couch that are behind the wall should pulsate in an angry color.</span></span> <span data-ttu-id="ea42c-181">Ou, por outro lado, se o aplicativo não puder encontrar uma superfície espacial em um local em que o usuário possa ver uma superfície do mundo real, o aplicativo deverá deixar isso claro.</span><span class="sxs-lookup"><span data-stu-id="ea42c-181">Or conversely, if the application can't find a spatial surface in a location where the user can see a real-world surface, then the application should make this clear.</span></span> <span data-ttu-id="ea42c-182">A ausência óbvia de um efeito de base nessa área pode atingir essa finalidade.</span><span class="sxs-lookup"><span data-stu-id="ea42c-182">The obvious absence of a grounding effect in this area may achieve this purpose.</span></span>

### <a name="occlusion"></a><span data-ttu-id="ea42c-183">Oclusão</span><span class="sxs-lookup"><span data-stu-id="ea42c-183">Occlusion</span></span>

<span data-ttu-id="ea42c-184">Um dos principais usos de superfícies de mapeamento espacial é simplesmente ocluir hologramas.</span><span class="sxs-lookup"><span data-stu-id="ea42c-184">One of the primary uses of spatial mapping surfaces is simply to occlude holograms.</span></span> <span data-ttu-id="ea42c-185">Esse comportamento simples tem um grande impacto sobre o realismo percebido dos hologramas, ajudando a criar uma noção de que realmente tem o mesmo espaço físico que o usuário.</span><span class="sxs-lookup"><span data-stu-id="ea42c-185">This simple behavior has a huge impact on the perceived realism of holograms, helping to create a visceral sense that really inhabits the same physical space as the user.</span></span>

<span data-ttu-id="ea42c-186">A oclusão também fornece informações para o usuário; quando um holograma parece estar ocluído por uma superfície do mundo real, isso fornece comentários visuais adicionais sobre a localização espacial desse holograma no mundo.</span><span class="sxs-lookup"><span data-stu-id="ea42c-186">Occlusion also provides information to the user; when a hologram appears to be occluded by a real-world surface, this provides extra visual feedback as to the spatial location of that hologram in the world.</span></span> <span data-ttu-id="ea42c-187">Por outro lado, a oclusão também pode *ocultar* informações do usuário de maneira útil; A oclusão de hologramas atrás de paredes pode reduzir a desorganização visual de maneira intuitiva.</span><span class="sxs-lookup"><span data-stu-id="ea42c-187">Conversely, occlusion can also usefully *hide* information from the user; occluding holograms behind walls can reduce visual clutter in an intuitive way.</span></span> <span data-ttu-id="ea42c-188">Para ocultar ou revelar um holograma, o usuário simplesmente precisa mover a cabeça.</span><span class="sxs-lookup"><span data-stu-id="ea42c-188">To hide or reveal a hologram, the user merely has to move their head.</span></span>

<span data-ttu-id="ea42c-189">A oclusão também pode ser usada para a expectativa de uma interface do usuário natural com base em interações físicas familiares; se um holograma é ocluído por uma superfície, é porque essa superfície  é sólida, portanto, o usuário deve esperar que o holograma colida com essa superfície e não passe por ela.</span><span class="sxs-lookup"><span data-stu-id="ea42c-189">Occlusion can also be used to prime expectations for a natural user interface based upon familiar physical interactions; if a hologram is occluded by a surface it is because that surface is solid, so the user should expect that the hologram will *collide* with that surface and not pass through it.</span></span>

<span data-ttu-id="ea42c-190">Às vezes, a oclusão de hologramas é indesejável.</span><span class="sxs-lookup"><span data-stu-id="ea42c-190">Sometimes, occlusion of holograms is undesirable.</span></span> <span data-ttu-id="ea42c-191">Se um usuário precisar interagir com um holograma, ele precisará vê-lo-mesmo que esteja por trás de uma superfície do mundo real.</span><span class="sxs-lookup"><span data-stu-id="ea42c-191">If a user needs to interact with a hologram, then they need to see it - even if it is behind a real-world surface.</span></span> <span data-ttu-id="ea42c-192">Nesses casos, geralmente faz sentido renderizar esse holograma de forma diferente quando é obstruído (por exemplo, reduzindo seu brilho).</span><span class="sxs-lookup"><span data-stu-id="ea42c-192">In such cases, it usually makes sense to render such a hologram differently when it's occluded (for example, by reducing its brightness).</span></span> <span data-ttu-id="ea42c-193">Dessa forma, o usuário pode visualmente localizar o holograma, mas ainda saberá que está por trás de algo.</span><span class="sxs-lookup"><span data-stu-id="ea42c-193">This way, the user can visually locate the hologram, but they'll still know it's behind something.</span></span>

### <a name="physics"></a><span data-ttu-id="ea42c-194">Física</span><span class="sxs-lookup"><span data-stu-id="ea42c-194">Physics</span></span>

<span data-ttu-id="ea42c-195">O uso da simulação de física é outra maneira na qual o mapeamento espacial pode ser usado para reforçar a *presença* de hologramas no espaço físico do usuário.</span><span class="sxs-lookup"><span data-stu-id="ea42c-195">The use of physics simulation is another way in which spatial mapping can be used to reinforce the *presence* of holograms in the user's physical space.</span></span> <span data-ttu-id="ea42c-196">Quando minha bola de borracha Holographic se acumula Realistamente na minha mesa, passa pelo andar e desaparece sob o sofá, pode ser difícil acreditar que não está lá.</span><span class="sxs-lookup"><span data-stu-id="ea42c-196">When my holographic rubber ball rolls realistically off my desk, bounces across the floor and disappears under the couch, it might be hard for me to believe that it's not there.</span></span>

<span data-ttu-id="ea42c-197">A simulação de física também oferece a oportunidade de um aplicativo usar interações baseadas em física e natural.</span><span class="sxs-lookup"><span data-stu-id="ea42c-197">Physics simulation also provides the opportunity for an application to use natural and familiar physics-based interactions.</span></span> <span data-ttu-id="ea42c-198">Mover uma peça de mobília de Holographic no chão provavelmente será mais fácil para o usuário se as mobília responderem como se estivessem deslizando em todo o andar com a inércia e a fricção apropriadas.</span><span class="sxs-lookup"><span data-stu-id="ea42c-198">Moving a piece of holographic furniture around on the floor will likely be easier for the user if the furniture responds as if it were sliding across the floor with the appropriate inertia and friction.</span></span>

<span data-ttu-id="ea42c-199">Para gerar comportamentos físicos reais, você provavelmente precisará fazer algum [processamento de malha](spatial-mapping.md#mesh-processing) , como o preenchimento de buracos, a remoção de hallucinations flutuantes e a suavização de superfícies de ásperos.</span><span class="sxs-lookup"><span data-stu-id="ea42c-199">To generate realistic physical behaviors, you'll likely need to do some [mesh processing](spatial-mapping.md#mesh-processing) such as filling holes, removing floating hallucinations and smoothing rough surfaces.</span></span>

<span data-ttu-id="ea42c-200">Você também precisará considerar como a [experiência de verificação](spatial-mapping.md#the-environment-scanning-experience) do seu aplicativo influencia sua simulação física.</span><span class="sxs-lookup"><span data-stu-id="ea42c-200">You'll also need to consider how your application's [scanning experience](spatial-mapping.md#the-environment-scanning-experience) influences its physics simulation.</span></span> <span data-ttu-id="ea42c-201">Em primeiro lugar, as superfícies ausentes não colidirão nada; o que acontece quando a bola de borracha faz o corredor e o final do mundo conhecido?</span><span class="sxs-lookup"><span data-stu-id="ea42c-201">Firstly, missing surfaces won't collide with anything; what happens when the rubber ball rolls off down the corridor and off the end of the known world?</span></span> <span data-ttu-id="ea42c-202">Em segundo lugar, você precisa decidir se continuará a responder às alterações no ambiente ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="ea42c-202">Secondly, you need to decide whether you'll continue to respond to changes in the environment over time.</span></span> <span data-ttu-id="ea42c-203">Em alguns casos, você desejará responder o mais rápido possível; Digamos que se o usuário estiver usando portas e móveis como Barricades móveis em defesa contra uma Tempest de setas romanos de entrada.</span><span class="sxs-lookup"><span data-stu-id="ea42c-203">In some cases, you'll want to respond as quickly as possible; say if the user is using doors and furniture as movable barricades in defense against a tempest of incoming Roman arrows.</span></span> <span data-ttu-id="ea42c-204">Em outros casos, no entanto, talvez você queira ignorar novas atualizações; dirigir seu carro Holographic em volta ao Racetrack em seu andar pode repentinamente não ser tão divertido se seu cão decidir ficar no meio do controle.</span><span class="sxs-lookup"><span data-stu-id="ea42c-204">In other cases though, you may want to ignore new updates; driving your holographic sports car around the racetrack on your floor may suddenly not be so fun if your dog decides to sit in the middle of the track.</span></span>

### <a name="navigation"></a><span data-ttu-id="ea42c-205">Navegação</span><span class="sxs-lookup"><span data-stu-id="ea42c-205">Navigation</span></span>

<span data-ttu-id="ea42c-206">Os aplicativos podem usar dados de mapeamento espacial para conceder aos caracteres holográficos (ou agentes) a capacidade de navegar pelo mundo real da mesma maneira que uma pessoa real.</span><span class="sxs-lookup"><span data-stu-id="ea42c-206">Applications can use spatial mapping data to grant holographic characters (or agents) the ability to navigate the real world in the same way a real person would.</span></span> <span data-ttu-id="ea42c-207">Isso pode ajudar a reforçar a presença de caracteres holográficos restringindo-os ao mesmo conjunto de comportamentos naturais e familiares que aqueles do usuário e seus amigos.</span><span class="sxs-lookup"><span data-stu-id="ea42c-207">This can help reinforce the presence of holographic characters by restricting them to the same set of natural, familiar behaviors as those of the user and their friends.</span></span>

<span data-ttu-id="ea42c-208">As funcionalidades de navegação também podem ser úteis para os usuários.</span><span class="sxs-lookup"><span data-stu-id="ea42c-208">Navigation capabilities could be useful to users as well.</span></span> <span data-ttu-id="ea42c-209">Depois que um mapa de navegação tiver sido criado em uma determinada área, ele poderá ser compartilhado para fornecer instruções holográficas para novos usuários não familiarizados com esse local.</span><span class="sxs-lookup"><span data-stu-id="ea42c-209">Once a navigation map has been built in a given area, it could be shared to provide holographic directions for new users unfamiliar with that location.</span></span> <span data-ttu-id="ea42c-210">Esse mapa pode ser projetado para ajudar a manter o fluxo contínuo do 'tráfego' ou evitar acidentes em locais perigosos, como locais de construção.</span><span class="sxs-lookup"><span data-stu-id="ea42c-210">This map could be designed to help keep pedestrian 'traffic' flowing smoothly, or to avoid accidents in dangerous locations like construction sites.</span></span>

<span data-ttu-id="ea42c-211">Os principais desafios técnicos envolvidos na implementação da funcionalidade de navegação serão a detecção confiável de superfícies walkable (os humanos não andam em tabelas!) e a adaptação elegante às alterações no ambiente (os humanos não passam por portas fechadas!).</span><span class="sxs-lookup"><span data-stu-id="ea42c-211">The key technical challenges involved in implementing navigation functionality will be reliable detection of walkable surfaces (humans don't walk on tables!) and graceful adaptation to changes in the environment (humans don't walk through closed doors!).</span></span> <span data-ttu-id="ea42c-212">A malha pode exigir algum [processamento antes](spatial-mapping.md#mesh-processing) de ser acessível para planejamento de caminho e navegação por um caractere virtual.</span><span class="sxs-lookup"><span data-stu-id="ea42c-212">The mesh may require some [processing](spatial-mapping.md#mesh-processing) before it's usable for path-planning and navigation by a virtual character.</span></span> <span data-ttu-id="ea42c-213">Suavizar a malha e remover desilusão pode ajudar a evitar que os caracteres fique preso.</span><span class="sxs-lookup"><span data-stu-id="ea42c-213">Smoothing the mesh and removing hallucinations may help avoid characters becoming stuck.</span></span> <span data-ttu-id="ea42c-214">Talvez você também queira simplificar drasticamente a malha para acelerar os cálculos de navegação e planejamento de caminho do seu caractere.</span><span class="sxs-lookup"><span data-stu-id="ea42c-214">You may also wish to drastically simplify the mesh to speed up your character's path-planning and navigation calculations.</span></span> <span data-ttu-id="ea42c-215">Esses desafios receberam muita atenção no desenvolvimento da tecnologia de jogos de vídeo e há uma grande quantidade de pesquisas disponíveis sobre esses tópicos.</span><span class="sxs-lookup"><span data-stu-id="ea42c-215">These challenges have received a great deal of attention in the development of video game technology, and there's a wealth of available research literature on these topics.</span></span>

<span data-ttu-id="ea42c-216">A funcionalidade interna na NavMesh no Unity não pode ser usada com superfícies de mapeamento espacial.</span><span class="sxs-lookup"><span data-stu-id="ea42c-216">The built-in NavMesh functionality in Unity cannot be used with spatial mapping surfaces.</span></span> <span data-ttu-id="ea42c-217">Isso acontece porque as superfícies de mapeamento espacial não são conhecidas até que o aplicativo seja iniciado, mas os arquivos de dados NavMesh precisam ser gerados a partir de ativos de origem com antecedência.</span><span class="sxs-lookup"><span data-stu-id="ea42c-217">This is because spatial mapping surfaces aren't known until the application starts, but NavMesh data files need to be generated from source assets ahead of time.</span></span> <span data-ttu-id="ea42c-218">Observe também que o sistema de mapeamento espacial não fornecerá informações sobre [superfícies distantes](spatial-mapping.md#the-environment-scanning-experience) do local atual do usuário.</span><span class="sxs-lookup"><span data-stu-id="ea42c-218">Also note that, the spatial mapping system won't provide [information about surfaces far away](spatial-mapping.md#the-environment-scanning-experience) from the user's current location.</span></span> <span data-ttu-id="ea42c-219">Portanto, o aplicativo deve 'lembrar' aparecer se for para criar um mapa de uma área grande.</span><span class="sxs-lookup"><span data-stu-id="ea42c-219">So the application must 'remember' surfaces itself if it's to build a map of a large area.</span></span>

### <a name="visualization"></a><span data-ttu-id="ea42c-220">Visualização</span><span class="sxs-lookup"><span data-stu-id="ea42c-220">Visualization</span></span>

<span data-ttu-id="ea42c-221">Na maioria das vezes, é apropriado que as superfícies espaciais sejam invisíveis; para minimizar a desordem Visual e deixar o mundo real se falar de si mesmo.</span><span class="sxs-lookup"><span data-stu-id="ea42c-221">Most of the time it's appropriate for spatial surfaces to be invisible; to minimize visual clutter and let the real world speak for itself.</span></span> <span data-ttu-id="ea42c-222">No entanto, às vezes é útil visualizar as superfícies de mapeamento espacial diretamente, apesar de suas contrapartes reais estarem visíveis.</span><span class="sxs-lookup"><span data-stu-id="ea42c-222">However, sometimes it's useful to visualize spatial mapping surfaces directly, despite their real-world counterparts being visible.</span></span>

<span data-ttu-id="ea42c-223">Por exemplo, quando o usuário está tentando colocar um holograma em uma superfície (colocando um gabinete Holographic na parede, digamos), pode ser útil "aterrar" o holograma ao converter uma sombra na superfície.</span><span class="sxs-lookup"><span data-stu-id="ea42c-223">For example, when the user is trying to place a hologram onto a surface (placing a holographic cabinet on the wall, say) it can be useful to 'ground' the hologram by casting a shadow onto the surface.</span></span> <span data-ttu-id="ea42c-224">Isso dá ao usuário um sentido muito mais claro da proximidade física exata entre o holograma e a superfície.</span><span class="sxs-lookup"><span data-stu-id="ea42c-224">This gives the user a much clearer sense of the exact physical proximity between the hologram and the surface.</span></span> <span data-ttu-id="ea42c-225">Este também é um exemplo da prática mais geral de ' Visualizar visualmente ' uma alteração antes de o usuário confirmá-la.</span><span class="sxs-lookup"><span data-stu-id="ea42c-225">This is also an example of the more general practice of visually 'previewing' a change before the user commits to it.</span></span>

<span data-ttu-id="ea42c-226">Ao visualizar as superfícies, o aplicativo pode compartilhar com o usuário sua compreensão do ambiente.</span><span class="sxs-lookup"><span data-stu-id="ea42c-226">By visualizing surfaces, the application can share with the user its understanding of the environment.</span></span> <span data-ttu-id="ea42c-227">Por exemplo, um jogo de tabuleiro de Holographic poderia visualizar as superfícies horizontais identificadas como "tabelas", de modo que o usuário saiba onde elas devem ir para interagir.</span><span class="sxs-lookup"><span data-stu-id="ea42c-227">For example, a holographic board game could visualize the horizontal surfaces that it has identified as 'tables', so the user knows where they should go to interact.</span></span>

<span data-ttu-id="ea42c-228">A visualização de superfícies pode ser uma maneira útil de mostrar os espaços próximos do usuário que estão ocultos na exibição.</span><span class="sxs-lookup"><span data-stu-id="ea42c-228">Visualizing surfaces can be a useful way to show the user nearby spaces that are hidden from view.</span></span> <span data-ttu-id="ea42c-229">Isso pode fornecer uma maneira de fornecer ao usuário acesso à sua cozinha (e a todos os seus hologramas contidos) a partir de sua sala de vida.</span><span class="sxs-lookup"><span data-stu-id="ea42c-229">This could provide a way to give the user access to their kitchen (and all of its contained holograms) from their living room.</span></span>

<span data-ttu-id="ea42c-230">As malhas de superfície fornecidas pelo mapeamento espacial podem não ser particularmente ' limpas '.</span><span class="sxs-lookup"><span data-stu-id="ea42c-230">The surface meshes provided by spatial mapping may not be particularly 'clean'.</span></span> <span data-ttu-id="ea42c-231">É importante visualizá-los adequadamente.</span><span class="sxs-lookup"><span data-stu-id="ea42c-231">It's important to visualize them appropriately.</span></span> <span data-ttu-id="ea42c-232">Os cálculos de iluminação tradicionais podem realçar erros em normalidades de superfície de maneira Visual, enquanto as texturas "limpas" projetadas na superfície podem ajudar a dar uma aparência mais organizada.</span><span class="sxs-lookup"><span data-stu-id="ea42c-232">Traditional lighting calculations may highlight errors in surface normals in a visually distracting manner, while 'clean' textures projected onto the surface may help to give it a tidier appearance.</span></span> <span data-ttu-id="ea42c-233">Também é possível fazer o [processamento de malha](spatial-mapping.md#mesh-processing) para melhorar as propriedades de malha, antes que as superfícies sejam renderizadas.</span><span class="sxs-lookup"><span data-stu-id="ea42c-233">It's also possible to do [mesh processing](spatial-mapping.md#mesh-processing) to improve mesh properties, before the surfaces are rendered.</span></span>

> [!NOTE]
> <span data-ttu-id="ea42c-234">O HoloLens 2 implementa uma nova [cena que entende o tempo de execução](scene-understanding.md), que fornece aos desenvolvedores de realidade misturada uma representação de ambiente estruturada e de alto nível projetada para simplificar a implementação do posicionamento, oclusão, física e de navegação.</span><span class="sxs-lookup"><span data-stu-id="ea42c-234">HoloLens 2 implements a new [Scene Understanding Runtime](scene-understanding.md), that provides Mixed Reality developers with a structured, high-level environment representation designed to simplify the implementation of placement, occlusion, physics and navigation.</span></span>

## <a name="using-the-surface-observer"></a><span data-ttu-id="ea42c-235">Usando o observador de superfície</span><span class="sxs-lookup"><span data-stu-id="ea42c-235">Using The Surface Observer</span></span>

<span data-ttu-id="ea42c-236">O ponto de partida para o mapeamento espacial é o observador de superfície.</span><span class="sxs-lookup"><span data-stu-id="ea42c-236">The starting point for spatial mapping is the surface observer.</span></span> <span data-ttu-id="ea42c-237">O fluxo do programa é o seguinte:</span><span class="sxs-lookup"><span data-stu-id="ea42c-237">Program flow is as follows:</span></span>
* <span data-ttu-id="ea42c-238">Criar um objeto de observador de superfície</span><span class="sxs-lookup"><span data-stu-id="ea42c-238">Create a surface observer object</span></span>
   * <span data-ttu-id="ea42c-239">Forneça um ou mais volumes espaciais para definir as regiões de interesse nas quais o aplicativo deseja receber dados de mapeamento espacial.</span><span class="sxs-lookup"><span data-stu-id="ea42c-239">Provide one or more spatial volumes, to define the regions of interest in which the application wishes to receive spatial mapping data.</span></span> <span data-ttu-id="ea42c-240">Um volume espacial é simplesmente uma forma que define uma região do espaço, como uma esfera ou uma caixa.</span><span class="sxs-lookup"><span data-stu-id="ea42c-240">A spatial volume is simply a shape defining a region of space, such as a sphere or a box.</span></span>
   * <span data-ttu-id="ea42c-241">Use um volume espacial com um sistema de coordenadas espaciais bloqueado pelo mundo para identificar uma região fixa do mundo físico.</span><span class="sxs-lookup"><span data-stu-id="ea42c-241">Use a spatial volume with a world-locked spatial coordinate system to identify a fixed region of the physical world.</span></span>
   * <span data-ttu-id="ea42c-242">Use um volume espacial, atualizou cada quadro com um sistema de coordenadas espaciais bloqueado pelo corpo para identificar uma região de espaço que se move (mas não gira) com o usuário.</span><span class="sxs-lookup"><span data-stu-id="ea42c-242">Use a spatial volume, updated each frame with a body-locked spatial coordinate system, to identify a region of space that moves (but doesn't rotate) with the user.</span></span>
   * <span data-ttu-id="ea42c-243">Esses volumes espaciais podem ser alterados posteriormente a qualquer momento, conforme o status do aplicativo ou do usuário muda.</span><span class="sxs-lookup"><span data-stu-id="ea42c-243">These spatial volumes may be changed later at any time, as the status of the application or the user changes.</span></span>
* <span data-ttu-id="ea42c-244">Usar sondagem ou notificação para recuperar informações sobre superfícies espaciais</span><span class="sxs-lookup"><span data-stu-id="ea42c-244">Use polling or notification to retrieve information about spatial surfaces</span></span>
   * <span data-ttu-id="ea42c-245">Você pode 'sondar' o observador da superfície quanto ao status da superfície espacial a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="ea42c-245">You may 'poll' the surface observer for spatial surface status at any time.</span></span> <span data-ttu-id="ea42c-246">Em vez disso, você pode se registrar para o evento 'superfícies alteradas' do observador de superfície, que notificará o aplicativo quando as superfícies espaciais foram alteradas.</span><span class="sxs-lookup"><span data-stu-id="ea42c-246">Instead, you may register for the surface observer's 'surfaces changed' event, which will notify the application when spatial surfaces have changed.</span></span>
   * <span data-ttu-id="ea42c-247">Para um volume espacial dinâmico, como a exibição frustum ou um volume bloqueado pelo corpo, os aplicativos precisarão sondar alterações em cada quadro definindo a região de interesse e, em seguida, obtendo o conjunto atual de superfícies espaciais.</span><span class="sxs-lookup"><span data-stu-id="ea42c-247">For a dynamic spatial volume, such as the view frustum, or a body-locked volume, applications will need to poll for changes each frame by setting the region of interest and then obtaining the current set of spatial surfaces.</span></span>
   * <span data-ttu-id="ea42c-248">Para um volume estático, como um cubo mundialmente bloqueado que abrange uma única sala, os aplicativos podem se registrar para o evento 'superfícies alteradas' serem notificados quando superfícies espaciais dentro desse volume podem ter sido alteradas.</span><span class="sxs-lookup"><span data-stu-id="ea42c-248">For a static volume, such as a world-locked cube covering a single room, applications may register for the 'surfaces changed' event to be notified when spatial surfaces inside that volume may have changed.</span></span>
* <span data-ttu-id="ea42c-249">Alterações nas superfícies de processo</span><span class="sxs-lookup"><span data-stu-id="ea42c-249">Process surfaces changes</span></span>
   * <span data-ttu-id="ea42c-250">Iterar o conjunto fornecido de superfícies espaciais.</span><span class="sxs-lookup"><span data-stu-id="ea42c-250">Iterate the provided set of spatial surfaces.</span></span>
   * <span data-ttu-id="ea42c-251">Classificar superfícies espaciais como adicionadas, alteradas ou removidas.</span><span class="sxs-lookup"><span data-stu-id="ea42c-251">Classify spatial surfaces as added, changed, or removed.</span></span>
   * <span data-ttu-id="ea42c-252">Para cada superfície espacial adicionada ou alterada, se apropriado, envie uma solicitação assíncrona para receber a malha atualizada que representa o estado atual da superfície no nível desejado de detalhes.</span><span class="sxs-lookup"><span data-stu-id="ea42c-252">For each added or changed spatial surface, if appropriate submit an asynchronous request to receive updated mesh representing the surface's current state at the desired level of detail.</span></span>
* <span data-ttu-id="ea42c-253">Processe a solicitação de malha assíncrona (mais detalhes nas seções a seguir).</span><span class="sxs-lookup"><span data-stu-id="ea42c-253">Process the asynchronous mesh request (more details in following sections).</span></span>

## <a name="mesh-caching"></a><span data-ttu-id="ea42c-254">Cache de malha</span><span class="sxs-lookup"><span data-stu-id="ea42c-254">Mesh Caching</span></span>

<span data-ttu-id="ea42c-255">As superfícies espaciais são representadas por malhas de triângulo denso.</span><span class="sxs-lookup"><span data-stu-id="ea42c-255">Spatial surfaces are represented by dense triangle meshes.</span></span> <span data-ttu-id="ea42c-256">Armazenar, renderizar e processar essas malhas pode consumir recursos computacionais e de armazenamento significativos.</span><span class="sxs-lookup"><span data-stu-id="ea42c-256">Storing, rendering, and processing these meshes can consume significant computational and storage resources.</span></span> <span data-ttu-id="ea42c-257">Assim, cada aplicativo deve adotar um esquema de cache de malha apropriado às suas necessidades, para minimizar os recursos usados para processamento e armazenamento de malha.</span><span class="sxs-lookup"><span data-stu-id="ea42c-257">As such, each application should adopt a mesh caching scheme appropriate to its needs, to minimize the resources used for mesh processing and storage.</span></span> <span data-ttu-id="ea42c-258">Esse esquema deve determinar quais malhas manter e quais descartar e quando atualizar a malha para cada superfície espacial.</span><span class="sxs-lookup"><span data-stu-id="ea42c-258">This scheme should determine which meshes to keep and which to discard, and when to update the mesh for each spatial surface.</span></span>

<span data-ttu-id="ea42c-259">Muitas das considerações discutidas aqui informarão diretamente como seu aplicativo deve abordar o cache de malha.</span><span class="sxs-lookup"><span data-stu-id="ea42c-259">Many of the considerations discussed there will directly inform how your application should approach mesh caching.</span></span> <span data-ttu-id="ea42c-260">Você deve considerar como o usuário passa pelo ambiente, quais superfícies são necessárias, quando superfícies diferentes serão observadas e quando as alterações no ambiente devem ser capturadas.</span><span class="sxs-lookup"><span data-stu-id="ea42c-260">You should consider how the user moves through the environment, which surfaces are needed, when different surfaces will be observed and when changes in the environment should be captured.</span></span>

<span data-ttu-id="ea42c-261">Ao interpretar o evento "superfícies alteradas" fornecido pelo observador de superfície, a lógica de cache de malha básica é a seguinte:</span><span class="sxs-lookup"><span data-stu-id="ea42c-261">When interpreting the 'surfaces changed' event provided by the surface observer, the basic mesh caching logic is as follows:</span></span>
* <span data-ttu-id="ea42c-262">Se o aplicativo vir uma ID de superfície espacial que ele não viu antes, ele deve tratá-lo como uma nova superfície espacial.</span><span class="sxs-lookup"><span data-stu-id="ea42c-262">If the application sees a spatial surface ID that it hasn't seen before, it should treat this as a new spatial surface.</span></span>
* <span data-ttu-id="ea42c-263">Se o aplicativo vir uma superfície espacial com uma ID conhecida, mas com uma nova hora de atualização, ela deverá tratá-la como uma superfície espacial atualizada.</span><span class="sxs-lookup"><span data-stu-id="ea42c-263">If the application sees a spatial surface with a known ID but with a new update time, it should treat this as an updated spatial surface.</span></span>
* <span data-ttu-id="ea42c-264">Se o aplicativo não vir mais uma superfície espacial com uma ID conhecida, ele deverá tratá-lo como uma superfície espacial removida.</span><span class="sxs-lookup"><span data-stu-id="ea42c-264">If the application no longer sees a spatial surface with a known ID, it should treat this as a removed spatial surface.</span></span>

<span data-ttu-id="ea42c-265">Cabe a cada aplicativo, então, fazer as seguintes escolhas:</span><span class="sxs-lookup"><span data-stu-id="ea42c-265">It's up to each application to then make the following choices:</span></span>
* <span data-ttu-id="ea42c-266">Para novas superfícies espaciais, a malha deve ser solicitada?</span><span class="sxs-lookup"><span data-stu-id="ea42c-266">For new spatial surfaces, should mesh be requested?</span></span>
   * <span data-ttu-id="ea42c-267">Geralmente, a malha deve ser solicitada imediatamente para novas superfícies espaciais, o que pode fornecer novas informações úteis ao usuário.</span><span class="sxs-lookup"><span data-stu-id="ea42c-267">Generally mesh should be requested immediately for new spatial surfaces, which may provide useful new information to the user.</span></span>
   * <span data-ttu-id="ea42c-268">No entanto, novas superfícies espaciais perto e na frente do usuário devem receber prioridade e sua malha deve ser solicitada primeiro.</span><span class="sxs-lookup"><span data-stu-id="ea42c-268">However, new spatial surfaces near and in front of the user should be given priority and their mesh should be requested first.</span></span>
   * <span data-ttu-id="ea42c-269">Se a nova malha não for necessária, se, por exemplo, o aplicativo tiver ' congelado ' permanentemente ou temporariamente seu modelo do ambiente, ele não deverá ser solicitado.</span><span class="sxs-lookup"><span data-stu-id="ea42c-269">If the new mesh isn't needed, if for example the application has permanently or temporarily 'frozen' its model of the environment, then it shouldn't be requested.</span></span>
* <span data-ttu-id="ea42c-270">Para superfícies espaciais atualizadas, a malha deve ser solicitada?</span><span class="sxs-lookup"><span data-stu-id="ea42c-270">For updated spatial surfaces, should mesh be requested?</span></span>
   * <span data-ttu-id="ea42c-271">As superfícies espaciais atualizadas perto e na frente do usuário devem receber prioridade e sua malha deve ser solicitada primeiro.</span><span class="sxs-lookup"><span data-stu-id="ea42c-271">Updated spatial surfaces near and in front of the user should be given priority and their mesh should be requested first.</span></span>
   * <span data-ttu-id="ea42c-272">Também pode ser apropriado fornecer prioridade mais alta para novas superfícies do que para superfícies atualizadas, especialmente durante a experiência de verificação.</span><span class="sxs-lookup"><span data-stu-id="ea42c-272">It may also be appropriate to give higher priority to new surfaces than to updated surfaces, especially during the scanning experience.</span></span>
   * <span data-ttu-id="ea42c-273">Para limitar os custos de processamento, os aplicativos podem querer limitar a taxa na qual eles processam atualizações para superfícies espaciais.</span><span class="sxs-lookup"><span data-stu-id="ea42c-273">To limit processing costs, applications may wish to throttle the rate at which they process updates to spatial surfaces.</span></span>
   * <span data-ttu-id="ea42c-274">Pode ser possível inferir que as alterações em uma superfície espacial sejam secundárias, por exemplo, se os limites da superfície são pequenos, caso em que a atualização pode não ser importante o suficiente para processar.</span><span class="sxs-lookup"><span data-stu-id="ea42c-274">It may be possible to infer that changes to a spatial surface are minor, for example if the bounds of the surface are small, in which case the update may not be important enough to process.</span></span>
   * <span data-ttu-id="ea42c-275">As atualizações em superfícies espaciais fora da região atual de interesse do usuário podem ser totalmente ignoradas, embora, nesse caso, possa ser mais eficiente modificar os volumes delimitadores espaciais em uso pelo observador da superfície.</span><span class="sxs-lookup"><span data-stu-id="ea42c-275">Updates to spatial surfaces outside the current region of interest of the user may be ignored entirely, though in this case it may be more efficient to modify the spatial bounding volumes in use by the surface observer.</span></span>
* <span data-ttu-id="ea42c-276">Para superfícies espaciais removidas, a malha deve ser descartada?</span><span class="sxs-lookup"><span data-stu-id="ea42c-276">For removed spatial surfaces, should mesh be discarded?</span></span>
   * <span data-ttu-id="ea42c-277">Geralmente, a malha deve ser descartada imediatamente para superfícies espaciais removidas, para que a oclusão do holograma permaneça correta.</span><span class="sxs-lookup"><span data-stu-id="ea42c-277">Generally mesh should be discarded immediately for removed spatial surfaces, so that hologram occlusion remains correct.</span></span>
   * <span data-ttu-id="ea42c-278">No entanto, se o aplicativo tiver motivos para acreditar que uma superfície espacial reaparecerá em breve (com base no design da experiência do usuário), poderá ser mais eficiente mantê-la do que descartar sua malha e recriá-la mais tarde.</span><span class="sxs-lookup"><span data-stu-id="ea42c-278">However, if the application has reason to believe that a spatial surface will reappear shortly (based upon the design of the user experience), then it may be more efficient to keep it than to discard its mesh and recreate it again later.</span></span>
   * <span data-ttu-id="ea42c-279">Se o aplicativo estiver criando um modelo em grande escala do ambiente do usuário, talvez ele não queira descartar malhas.</span><span class="sxs-lookup"><span data-stu-id="ea42c-279">If the application is building a large-scale model of the user's environment, then it may not wish to discard any meshes at all.</span></span> <span data-ttu-id="ea42c-280">No entanto, ele ainda precisará limitar o uso de recursos, possivelmente por meio do spool de malhas no disco à medida que as superfícies espaciais desaparecerem.</span><span class="sxs-lookup"><span data-stu-id="ea42c-280">It will still need to limit resource usage though, possibly by spooling meshes to disk as spatial surfaces disappear.</span></span>
   * <span data-ttu-id="ea42c-281">Alguns eventos relativamente raros durante a geração de superfície espacial podem fazer com que superfícies espaciais sejam substituídas por novas superfícies espaciais em um local semelhante, mas com IDs diferentes.</span><span class="sxs-lookup"><span data-stu-id="ea42c-281">Some relatively rare events during spatial surface generation can cause spatial surfaces to be replaced by new spatial surfaces in a similar location but with different IDs.</span></span> <span data-ttu-id="ea42c-282">Portanto, os aplicativos que optam por não descartar uma superfície removida devem ter cuidado para não acabar com várias malhas de superfícies espaciais altamente sobrecargadas que abrangem o mesmo local.</span><span class="sxs-lookup"><span data-stu-id="ea42c-282">So, applications that choose not to discard a removed surface should take care not to end up with multiple highly overlapped spatial surfaces meshes covering the same location.</span></span>
* <span data-ttu-id="ea42c-283">A malha deve ser descartada para qualquer outra superfície espacial?</span><span class="sxs-lookup"><span data-stu-id="ea42c-283">Should mesh be discarded for any other spatial surfaces?</span></span>
   * <span data-ttu-id="ea42c-284">Mesmo que exista uma superfície espacial, se ela não for mais útil para a experiência do usuário, ela deverá ser descartada.</span><span class="sxs-lookup"><span data-stu-id="ea42c-284">Even while a spatial surface exists, if it's no longer useful to the user's experience then it should be discarded.</span></span> <span data-ttu-id="ea42c-285">Por exemplo, se o aplicativo 'substituir' a sala do outro lado de uma porta por um espaço virtual alternativo, as superfícies espaciais nessa sala não serão mais importantes.</span><span class="sxs-lookup"><span data-stu-id="ea42c-285">For example, if the application 'replaces' the room on the other side of a doorway with an alternate virtual space then the spatial surfaces in that room no longer matter.</span></span>

<span data-ttu-id="ea42c-286">Aqui está um exemplo de estratégia de cache de malha, usando a histeresia espacial e temporal:</span><span class="sxs-lookup"><span data-stu-id="ea42c-286">Here's an example mesh caching strategy, using spatial and temporal hysteresis:</span></span>
* <span data-ttu-id="ea42c-287">Considere um aplicativo que deseja usar um volume de interesse espacial em forma de frustum que segue o olhar do usuário à medida que eles buscam e percorrem.</span><span class="sxs-lookup"><span data-stu-id="ea42c-287">Consider an application that wishes to use a frustum-shaped spatial volume of interest that follows the user's gaze as they look around and walk around.</span></span>
* <span data-ttu-id="ea42c-288">Uma superfície espacial pode desaparecer temporariamente desse volume simplesmente porque o usuário fica longe da superfície ou das etapas mais distantes dela... apenas para olhar de volta ou se aproximar mais de um momento mais tarde.</span><span class="sxs-lookup"><span data-stu-id="ea42c-288">A spatial surface may disappear temporarily from this volume simply because the user looks away from the surface or steps further away from it... only to look back or moves closer again a moment later.</span></span> <span data-ttu-id="ea42c-289">Nesse caso, descartar e recriar a malha para essa superfície representa muitos processos redundantes.</span><span class="sxs-lookup"><span data-stu-id="ea42c-289">In this case, discarding and re-creating the mesh for this surface represents many redundant processings.</span></span>
* <span data-ttu-id="ea42c-290">Para reduzir o número de alterações processadas, o aplicativo usa dois observadores de superfície espacial, um contido dentro do outro.</span><span class="sxs-lookup"><span data-stu-id="ea42c-290">To reduce the number of changes processed, the application uses two spatial surface observers, one contained within the other.</span></span> <span data-ttu-id="ea42c-291">O volume maior é esférico e segue o usuário ' lentamente '; Ele só se move quando necessário para garantir que seu centro esteja dentro de 2,0 metros do usuário.</span><span class="sxs-lookup"><span data-stu-id="ea42c-291">The larger volume is spherical and follows the user 'lazily'; it only moves when necessary to ensure that its center is within 2.0 meters of the user.</span></span>
* <span data-ttu-id="ea42c-292">As malhas de superfície espacial novas e atualizadas são sempre processadas do observador de superfície interna menor, mas as malhas são armazenadas em cache até que desapareçam do observador de superfície externa maior.</span><span class="sxs-lookup"><span data-stu-id="ea42c-292">New and updated spatial surface meshes are always processed from the smaller inner surface observer, but meshes are cached until they disappear from the larger outer surface observer.</span></span> <span data-ttu-id="ea42c-293">Isso permite que o aplicativo Evite processar muitas alterações redundantes devido à movimentação de usuário local.</span><span class="sxs-lookup"><span data-stu-id="ea42c-293">This allows the application to avoid processing many redundant changes because of local user movement.</span></span>
* <span data-ttu-id="ea42c-294">Como uma superfície espacial também pode desaparecer temporariamente devido à perda de rastreamento, o aplicativo também adia a descartação de superfícies espaciais removidas durante a perda de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="ea42c-294">Since a spatial surface may also disappear temporarily because of tracking loss, the application also defers discarding removed spatial surfaces during tracking loss.</span></span>
* <span data-ttu-id="ea42c-295">Em geral, um aplicativo deve avaliar a compensação entre o processamento de atualização reduzido e o maior uso de memória para determinar sua estratégia de cache ideal.</span><span class="sxs-lookup"><span data-stu-id="ea42c-295">In general, an application should evaluate the tradeoff between reduced update processing and increased memory usage to determine its ideal caching strategy.</span></span>

## <a name="rendering"></a><span data-ttu-id="ea42c-296">Renderização</span><span class="sxs-lookup"><span data-stu-id="ea42c-296">Rendering</span></span>

<span data-ttu-id="ea42c-297">Há três maneiras principais pelas quais as malhas de mapeamento espacial tendem a ser usadas para renderização:</span><span class="sxs-lookup"><span data-stu-id="ea42c-297">There are three primary ways in which spatial mapping meshes tend to be used for rendering:</span></span>
* <span data-ttu-id="ea42c-298">Para visualização de superfície</span><span class="sxs-lookup"><span data-stu-id="ea42c-298">For surface visualization</span></span>
   * <span data-ttu-id="ea42c-299">Geralmente, é útil Visualizar superfícies espaciais diretamente.</span><span class="sxs-lookup"><span data-stu-id="ea42c-299">It's often useful to visualize spatial surfaces directly.</span></span> <span data-ttu-id="ea42c-300">Por exemplo, a conversão de ' Shadows ' de objetos em superfícies espaciais pode fornecer comentários visuais úteis ao usuário enquanto eles estão colocando hologramas em superfícies.</span><span class="sxs-lookup"><span data-stu-id="ea42c-300">For example, casting 'shadows' from objects onto spatial surfaces can provide helpful visual feedback to the user while they're placing holograms on surfaces.</span></span>
   * <span data-ttu-id="ea42c-301">Uma coisa a ser lembrada é que as malhas espaciais são diferentes para o tipo de malha que um artista 3D pode criar.</span><span class="sxs-lookup"><span data-stu-id="ea42c-301">One thing to bear in mind is that spatial meshes are different to the kind of meshes that a 3D artist might create.</span></span> <span data-ttu-id="ea42c-302">A topologia de triângulo não será tão "limpa" quanto a topologia criada por humanos, e a malha será afetada de [vários erros](spatial-mapping.md#what-influences-spatial-mapping-quality).</span><span class="sxs-lookup"><span data-stu-id="ea42c-302">The triangle topology won't be as 'clean' as human-created topology, and the mesh will suffer from [various errors](spatial-mapping.md#what-influences-spatial-mapping-quality).</span></span>
   * <span data-ttu-id="ea42c-303">Para criar uma insinteição visual, talvez você queira fazer algum processamento de [malha,](spatial-mapping.md#mesh-processing)por exemplo, para preencher os orifícios ou os normais de superfície suave.</span><span class="sxs-lookup"><span data-stu-id="ea42c-303">To create a pleasing visual aesthetic, you may want to do some [mesh processing](spatial-mapping.md#mesh-processing), for example to fill holes or smooth surface normals.</span></span> <span data-ttu-id="ea42c-304">Você também pode querer usar um sombreador para projetar texturas projetadas por um artista em sua malha, em vez de visualizar diretamente a topologia e os normais da malha.</span><span class="sxs-lookup"><span data-stu-id="ea42c-304">You may also wish to use a shader to project artist-designed textures onto your mesh instead of directly visualizing mesh topology and normals.</span></span>
* <span data-ttu-id="ea42c-305">Para oclusão de hologramas por trás de superfícies do mundo real</span><span class="sxs-lookup"><span data-stu-id="ea42c-305">For occluding holograms behind real-world surfaces</span></span>
   * <span data-ttu-id="ea42c-306">Superfícies espaciais podem ser renderizadas em uma passagem somente de profundidade, o que afeta apenas o [buffer](/windows/win32/direct3d9/depth-buffers) de profundidade e não afeta os destinos de renderização de cores.</span><span class="sxs-lookup"><span data-stu-id="ea42c-306">Spatial surfaces can be rendered in a depth-only pass, which only affects the [depth buffer](/windows/win32/direct3d9/depth-buffers) and doesn't affect color render targets.</span></span>
   * <span data-ttu-id="ea42c-307">Isso impede que o buffer de profundidade oclua os hologramas renderizados posteriormente por trás de superfícies espaciais.</span><span class="sxs-lookup"><span data-stu-id="ea42c-307">This primes the depth buffer to occlude subsequently rendered holograms behind spatial surfaces.</span></span> <span data-ttu-id="ea42c-308">A oclusão precisa de hologramas melhora a noção de que os hologramas realmente existem dentro do espaço físico do usuário.</span><span class="sxs-lookup"><span data-stu-id="ea42c-308">Accurate occlusion of holograms enhances the sense that holograms really exist within the user's physical space.</span></span>
   * <span data-ttu-id="ea42c-309">Para habilitar a renderização somente de profundidade, atualize o estado do blend para definir [RenderTargetWriteMask](/windows/win32/api/d3d11_1/ns-d3d11_1-d3d11_render_target_blend_desc1) como zero para todos os destinos de renderização de cor.</span><span class="sxs-lookup"><span data-stu-id="ea42c-309">To enable depth-only rendering, update your blend state to set the [RenderTargetWriteMask](/windows/win32/api/d3d11_1/ns-d3d11_1-d3d11_render_target_blend_desc1) to zero for all color render targets.</span></span>
* <span data-ttu-id="ea42c-310">Para modificar a aparência de hologramas ocluídos por superfícies do mundo real</span><span class="sxs-lookup"><span data-stu-id="ea42c-310">For modifying the appearance of holograms occluded by real-world surfaces</span></span>
   * <span data-ttu-id="ea42c-311">Normalmente, a geometria renderizada fica oculta quando está oclusa.</span><span class="sxs-lookup"><span data-stu-id="ea42c-311">Normally rendered geometry is hidden when it's occluded.</span></span> <span data-ttu-id="ea42c-312">Isso é feito definindo a função de profundidade em seu estado de estêncil de profundidade como "menor  ou igual", o que faz com que a geometria seja visível apenas quando está mais próxima da câmera do que toda a geometria renderizada anteriormente. [](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc)</span><span class="sxs-lookup"><span data-stu-id="ea42c-312">This is achieved by setting the depth function in your [depth-stencil state](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc) to "less than or equal", which causes geometry to be visible only where it's **closer** to the camera than all previously rendered geometry.</span></span>
   * <span data-ttu-id="ea42c-313">No entanto, pode ser útil manter determinada geometria visível mesmo quando ela está oclusa e modificar sua aparência quando ocluído como uma maneira de fornecer comentários visuais ao usuário.</span><span class="sxs-lookup"><span data-stu-id="ea42c-313">However, it may be useful to keep certain geometry visible even when it's occluded, and to modify its appearance when occluded as a way of providing visual feedback to the user.</span></span> <span data-ttu-id="ea42c-314">Por exemplo, isso permite que o aplicativo mostre ao usuário o local de um objeto, deixando claro que está atrás de uma superfície do mundo real.</span><span class="sxs-lookup"><span data-stu-id="ea42c-314">For example, this allows the application to show the user the location of an object while making it clear that is behind a real-world surface.</span></span>
   * <span data-ttu-id="ea42c-315">Para fazer isso, renderize a geometria uma segunda vez com um sombreador diferente que cria a aparência 'oclusiva' desejada.</span><span class="sxs-lookup"><span data-stu-id="ea42c-315">To achieve this, render the geometry a second time with a different shader that creates the desired 'occluded' appearance.</span></span> <span data-ttu-id="ea42c-316">Antes de renderizar a geometria pela segunda vez, faça duas alterações no estado [de estêncil de profundidade.](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc)</span><span class="sxs-lookup"><span data-stu-id="ea42c-316">Before rendering the geometry for the second time, make two changes to your [depth-stencil state](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc).</span></span> <span data-ttu-id="ea42c-317">Primeiro, de definir a função de profundidade como "maior ou igual" para  que a geometria seja visível somente onde ela está mais distante da câmera do que toda a geometria renderizada anteriormente.</span><span class="sxs-lookup"><span data-stu-id="ea42c-317">First, set the depth function to "greater than or equal" so that the geometry will be visible only where it's **further** from the camera than all previously rendered geometry.</span></span> <span data-ttu-id="ea42c-318">Em segundo lugar, defina DepthWriteMask como zero, para que o buffer de profundidade não seja modificado (o buffer de profundidade deve continuar a representar a profundidade da geometria **mais próxima** da câmera).</span><span class="sxs-lookup"><span data-stu-id="ea42c-318">Second, set the DepthWriteMask to zero, so that the depth buffer won't be modified (the depth buffer should continue to represent the depth of the geometry **closest** to the camera).</span></span>

<span data-ttu-id="ea42c-319">O [desempenho](../develop/platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md) é uma preocupação importante ao renderizar malhas de mapeamento espacial.</span><span class="sxs-lookup"><span data-stu-id="ea42c-319">[Performance](../develop/platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md) is an important concern when rendering spatial mapping meshes.</span></span> <span data-ttu-id="ea42c-320">Aqui estão algumas técnicas de desempenho de renderização específicas para renderizar malhas de mapeamento espacial:</span><span class="sxs-lookup"><span data-stu-id="ea42c-320">Here are some rendering performance techniques specific to rendering spatial mapping meshes:</span></span>
* <span data-ttu-id="ea42c-321">Ajustar densidade do triângulo</span><span class="sxs-lookup"><span data-stu-id="ea42c-321">Adjust triangle density</span></span>
   * <span data-ttu-id="ea42c-322">Ao solicitar malhas de superfície espacial do seu observador de superfície, solicite a menor densidade de malhas de triângulo que será suficiente para suas necessidades.</span><span class="sxs-lookup"><span data-stu-id="ea42c-322">When requesting spatial surface meshes from your surface observer, request the lowest density of triangle meshes that will suffice for your needs.</span></span>
   * <span data-ttu-id="ea42c-323">Pode fazer sentido variar a densidade do triângulo em uma superfície por superfície, dependendo da distância da superfície do usuário e de sua relevância para a experiência do usuário.</span><span class="sxs-lookup"><span data-stu-id="ea42c-323">It may make sense to vary triangle density on a surface by surface basis, depending on the surface's distance from the user, and its relevance to the user experience.</span></span>
   * <span data-ttu-id="ea42c-324">Reduzir as contagens de triângulos reduzirá o uso de memória e os custos de processamento de vértice na GPU, embora não afete os custos de processamento de pixel.</span><span class="sxs-lookup"><span data-stu-id="ea42c-324">Reducing triangle counts will reduce memory usage and vertex processing costs on the GPU, though it won't affect pixel processing costs.</span></span>
* <span data-ttu-id="ea42c-325">Usar a remoção de frustum</span><span class="sxs-lookup"><span data-stu-id="ea42c-325">Use frustum culling</span></span>
   * <span data-ttu-id="ea42c-326">A remoção de frustum ignora objetos de desenho que não podem ser vistos porque estão fora do frustum de exibição atual.</span><span class="sxs-lookup"><span data-stu-id="ea42c-326">Frustum culling skips drawing objects that cannot be seen because they are outside the current display frustum.</span></span> <span data-ttu-id="ea42c-327">Isso reduz os custos de processamento de CPU e GPU.</span><span class="sxs-lookup"><span data-stu-id="ea42c-327">This reduces both CPU and GPU processing costs.</span></span>
   * <span data-ttu-id="ea42c-328">Como a remoção é realizada em uma base por malha e as superfícies espaciais podem ser grandes, dividir cada malha de superfície espacial em partes menores pode resultar em uma remoção mais eficiente (na medida em que menos triângulos de fora da tela são renderizados).</span><span class="sxs-lookup"><span data-stu-id="ea42c-328">Since culling is performed on a per-mesh basis and spatial surfaces can be large, breaking each spatial surface mesh into smaller chunks may result in more efficient culling (in that fewer offscreen triangles are rendered).</span></span> <span data-ttu-id="ea42c-329">No entanto, há uma compensação; Quanto mais malhas você tiver, mais chamadas de desenho deverão ser feitas, o que pode aumentar os custos de CPU.</span><span class="sxs-lookup"><span data-stu-id="ea42c-329">There's a tradeoff, however; the more meshes you have, the more draw calls you must make, which can increase CPU costs.</span></span> <span data-ttu-id="ea42c-330">Em um caso extremo, os próprios cálculos de remoção de frustum podem até mesmo ter um custo de CPU mensurável.</span><span class="sxs-lookup"><span data-stu-id="ea42c-330">In an extreme case, the frustum culling calculations themselves could even have a measurable CPU cost.</span></span>
* <span data-ttu-id="ea42c-331">Ajustar a ordem de renderização</span><span class="sxs-lookup"><span data-stu-id="ea42c-331">Adjust rendering order</span></span>
   * <span data-ttu-id="ea42c-332">As superfícies espaciais tendem a ser grandes, pois representam o ambiente inteiro do usuário em torno delas.</span><span class="sxs-lookup"><span data-stu-id="ea42c-332">Spatial surfaces tend to be large, because they represent the user's entire environment surrounding them.</span></span> <span data-ttu-id="ea42c-333">Os custos de processamento de pixel na GPU podem ser altos, especialmente em casos em que há mais de uma camada de geometria visível (incluindo superfícies espaciais e outros hologramas).</span><span class="sxs-lookup"><span data-stu-id="ea42c-333">Pixel processing costs on the GPU can be high, especially in cases where there's more than one layer of visible geometry (including both spatial surfaces and other holograms).</span></span> <span data-ttu-id="ea42c-334">Nesse caso, a camada mais próxima do usuário será occluding as camadas mais distantes, portanto, qualquer tempo de GPU gasto renderizando essas camadas mais distantes é desperdiçado.</span><span class="sxs-lookup"><span data-stu-id="ea42c-334">In this case, the layer nearest to the user will be occluding any layers further away, so any GPU time spent rendering those more distant layers is wasted.</span></span>
   * <span data-ttu-id="ea42c-335">Para reduzir esse trabalho redundante na GPU, ele ajuda a renderizar superfícies opacas na ordem de frente para trás (aquelas mais próximas primeiro, mais distantes por último).</span><span class="sxs-lookup"><span data-stu-id="ea42c-335">To reduce this redundant work on the GPU, it helps to render opaque surfaces in front-to-back order (closer ones first, more distant ones last).</span></span> <span data-ttu-id="ea42c-336">Por 'opaco', queremos dizer superfícies para as quais DepthWriteMask é definido como um em seu estado [de estêncil de profundidade.](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc)</span><span class="sxs-lookup"><span data-stu-id="ea42c-336">By 'opaque' we mean surfaces for which the DepthWriteMask is set to one in your [depth-stencil state](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc).</span></span> <span data-ttu-id="ea42c-337">Quando as superfícies mais próximas são renderizadas, elas a primem o buffer de profundidade para que superfícies mais distantes sejam ignoradas com eficiência pelo processador de pixel na GPU.</span><span class="sxs-lookup"><span data-stu-id="ea42c-337">When the nearest surfaces are rendered, they'll prime the depth buffer so that more distant surfaces are efficiently skipped by the pixel processor on the GPU.</span></span>

## <a name="mesh-processing"></a><span data-ttu-id="ea42c-338">Processamento de malha</span><span class="sxs-lookup"><span data-stu-id="ea42c-338">Mesh Processing</span></span>

<span data-ttu-id="ea42c-339">Um aplicativo pode querer fazer várias [operações em](spatial-mapping.md#mesh-processing) malhas de superfície espacial para atender às suas necessidades.</span><span class="sxs-lookup"><span data-stu-id="ea42c-339">An application may want to do [various operations](spatial-mapping.md#mesh-processing) on spatial surface meshes to suit its needs.</span></span> <span data-ttu-id="ea42c-340">Os dados de índice e vértice fornecidos com cada malha de superfície espacial usam o mesmo layout familiar que os buffers de [vértice](/windows/win32/direct3d9/rendering-from-vertex-and-index-buffers) e índice usados para renderizar malhas de triângulo em todas as APIs de renderização modernas.</span><span class="sxs-lookup"><span data-stu-id="ea42c-340">The index and vertex data provided with each spatial surface mesh uses the same familiar layout as the [vertex and index buffers](/windows/win32/direct3d9/rendering-from-vertex-and-index-buffers) that are used for rendering triangle meshes in all modern rendering APIs.</span></span> <span data-ttu-id="ea42c-341">No entanto, um fato importante a ser ciente é que os triângulos de mapeamento espacial têm uma ordem de vento no sentido horário **frontal.**</span><span class="sxs-lookup"><span data-stu-id="ea42c-341">However, one key fact to be aware of is that spatial mapping triangles have a **front-clockwise winding order**.</span></span> <span data-ttu-id="ea42c-342">Cada triângulo é representado por três índices de vértice no buffer de índice da malha e  esses índices identificarão os vértices do triângulo em uma ordem horário, quando o triângulo for exibido do lado frontal. </span><span class="sxs-lookup"><span data-stu-id="ea42c-342">Each triangle is represented by three vertex indices in the mesh's index buffer and these indices will identify the triangle's vertices in a **clockwise** order, when the triangle is viewed from the **front** side.</span></span> <span data-ttu-id="ea42c-343">O lado frontal (ou fora) das malhas da superfície espacial corresponde à esperada do lado frontal (visível) das superfícies do mundo real.</span><span class="sxs-lookup"><span data-stu-id="ea42c-343">The front side (or outside) of spatial surface meshes corresponds as you would expect to the front (visible) side of real world surfaces.</span></span>

<span data-ttu-id="ea42c-344">Os aplicativos só deverão fazer a simplificação de malha se a densidade de triângulo mais alta fornecida pelo observador de superfície ainda for insuficientemente grosseira – esse trabalho é computacionalmente caro e já está sendo executado pelo runtime para gerar os vários níveis de detalhes fornecidos.</span><span class="sxs-lookup"><span data-stu-id="ea42c-344">Applications should only do mesh simplification if the coarsest triangle density provided by the surface observer is still insufficiently coarse - this work is computationally expensive and already being performed by the runtime to generate the various provided levels of detail.</span></span>

<span data-ttu-id="ea42c-345">Como cada observador de superfície pode fornecer várias superfícies espaciais não conectadas, alguns aplicativos podem querer cortar essas malhas de superfície espacial entre si e, em seguida, reenconectá-las.</span><span class="sxs-lookup"><span data-stu-id="ea42c-345">Because each surface observer can provide multiple unconnected spatial surfaces, some applications may wish to clip these spatial surface meshes against each other, then zipper them together.</span></span> <span data-ttu-id="ea42c-346">Em geral, a etapa de recorte é necessária, pois malhas de superfície espacial próximas geralmente se sobrepõem ligeiramente.</span><span class="sxs-lookup"><span data-stu-id="ea42c-346">In general, the clipping step is required, as nearby spatial surface meshes often overlap slightly.</span></span>

## <a name="raycasting-and-collision"></a><span data-ttu-id="ea42c-347">Raycasting e Colisão</span><span class="sxs-lookup"><span data-stu-id="ea42c-347">Raycasting and Collision</span></span>

<span data-ttu-id="ea42c-348">Para que uma API física (como [Havok](https://www.havok.com/)) forneça um aplicativo com raycasting e funcionalidade de colisão para superfícies espaciais, o aplicativo deve fornecer malhas de superfície espacial para a API física.</span><span class="sxs-lookup"><span data-stu-id="ea42c-348">In order for a physics API (such as [Havok](https://www.havok.com/)) to provide an application with raycasting and collision functionality for spatial surfaces, the application must provide spatial surface meshes to the physics API.</span></span> <span data-ttu-id="ea42c-349">As malhas usadas para a física geralmente têm as seguintes propriedades:</span><span class="sxs-lookup"><span data-stu-id="ea42c-349">Meshes used for physics often have the following properties:</span></span>
* <span data-ttu-id="ea42c-350">Eles contêm apenas pequenos números de triângulos.</span><span class="sxs-lookup"><span data-stu-id="ea42c-350">They contain only small numbers of triangles.</span></span> <span data-ttu-id="ea42c-351">As operações de física são mais intensivas em computação do que as operações de renderização.</span><span class="sxs-lookup"><span data-stu-id="ea42c-351">Physics operations are more computationally intensive than rendering operations.</span></span>
* <span data-ttu-id="ea42c-352">Eles são ' d' água.</span><span class="sxs-lookup"><span data-stu-id="ea42c-352">They're 'water-tight'.</span></span> <span data-ttu-id="ea42c-353">As superfícies destinadas a serem sólidas não devem ter pequenos buracos; até mesmo os orifícios muito pequenos para serem visíveis podem causar problemas.</span><span class="sxs-lookup"><span data-stu-id="ea42c-353">Surfaces intended to be solid shouldn't have small holes in them; even holes too small to be visible can cause problems.</span></span>
* <span data-ttu-id="ea42c-354">Eles são convertidos em convexa hulls.</span><span class="sxs-lookup"><span data-stu-id="ea42c-354">They're converted into convex hulls.</span></span> <span data-ttu-id="ea42c-355">Convexa hulls têm poucos polígonos e são livres de buracos, e são muito mais eficientes em termos de computação do que as malhas de triângulo brutos.</span><span class="sxs-lookup"><span data-stu-id="ea42c-355">Convex hulls have few polygons and are free of holes, and they're much more computationally efficient to process than raw triangle meshes.</span></span>

<span data-ttu-id="ea42c-356">Ao fazer raycasts em relação a superfícies espaciais, tenha em mente que essas superfícies são muitas vezes complexas, formas desorganizadas com detalhes de pouco confusos, assim como sua mesa!</span><span class="sxs-lookup"><span data-stu-id="ea42c-356">When doing raycasts against spatial surfaces, bear in mind that these surfaces are often complex, cluttered shapes full of messy little details - just like your desk!</span></span> <span data-ttu-id="ea42c-357">Isso significa que uma única Raycast geralmente é insuficiente para fornecer a você informações suficientes sobre a forma da superfície e a forma do espaço vazio perto dela.</span><span class="sxs-lookup"><span data-stu-id="ea42c-357">This means that a single raycast is often insufficient to give you enough information about the shape of the surface and the shape of the empty space near it.</span></span> <span data-ttu-id="ea42c-358">Geralmente, é uma boa ideia fazer muitas raycasts em uma pequena área e usar os resultados agregados para obter uma compreensão mais confiável da superfície.</span><span class="sxs-lookup"><span data-stu-id="ea42c-358">It's usually a good idea to do many raycasts within a small area and to use the aggregate results to derive a more reliable understanding of the surface.</span></span> <span data-ttu-id="ea42c-359">Por exemplo, usar a média de 10 raycasts para orientar o posicionamento do holograma em uma superfície produzirá um resultado muito mais suave e menos "tremulação" que usa apenas um único Raycast.</span><span class="sxs-lookup"><span data-stu-id="ea42c-359">For example, using the average of 10 raycasts to guide hologram placement on a surface will yield a far smoother and less 'jittery' result that using just a single raycast.</span></span>

<span data-ttu-id="ea42c-360">No entanto, tenha em mente que cada Raycast pode ter um alto custo computacional.</span><span class="sxs-lookup"><span data-stu-id="ea42c-360">However, bear in mind that each raycast can have a high computational cost.</span></span> <span data-ttu-id="ea42c-361">Dependendo do seu cenário de uso, você deve compensar o custo computacional de raycasts extra (feito a cada quadro) em relação ao custo computacional do [processamento de malha](spatial-mapping.md#mesh-processing) para suavizar e remover buracos em superfícies espaciais (feitas quando as malhas espaciais são atualizadas).</span><span class="sxs-lookup"><span data-stu-id="ea42c-361">Depending on your usage scenario, you should trade off the computational cost of extra raycasts (done every frame) against the computational cost of [mesh processing](spatial-mapping.md#mesh-processing) to smooth and remove holes in spatial surfaces (done when spatial meshes are updated).</span></span>

## <a name="the-environment-scanning-experience"></a><span data-ttu-id="ea42c-362">A experiência de verificação do ambiente</span><span class="sxs-lookup"><span data-stu-id="ea42c-362">The environment scanning experience</span></span>

<span data-ttu-id="ea42c-363">Cada aplicativo que usa o mapeamento espacial deve considerar a possibilidade de fornecer uma "experiência de verificação"; o processo pelo qual o aplicativo orienta o usuário a verificar as superfícies necessárias para que o aplicativo funcione corretamente.</span><span class="sxs-lookup"><span data-stu-id="ea42c-363">Each application that uses spatial mapping should consider providing a 'scanning experience'; the process through which the application guides the user to scan surfaces that are necessary for the application to function correctly.</span></span>

<span data-ttu-id="ea42c-364">![Exemplo de verificação](images/sr-mixedworld-140429-8pm-00068-1000px.png)</span><span class="sxs-lookup"><span data-stu-id="ea42c-364">![Example of scanning](images/sr-mixedworld-140429-8pm-00068-1000px.png)</span></span><br>
<span data-ttu-id="ea42c-365">*Exemplo de verificação*</span><span class="sxs-lookup"><span data-stu-id="ea42c-365">*Example of scanning*</span></span>

<span data-ttu-id="ea42c-366">A natureza dessa experiência de verificação pode variar muito dependendo das necessidades de cada aplicativo, mas dois princípios principais devem orientar seu design.</span><span class="sxs-lookup"><span data-stu-id="ea42c-366">The nature of this scanning experience can vary greatly depending upon each application's needs, but two main principles should guide its design.</span></span>

<span data-ttu-id="ea42c-367">Em primeiro lugar, **a comunicação clara com o usuário é a principal preocupação.**</span><span class="sxs-lookup"><span data-stu-id="ea42c-367">Firstly, **clear communication with the user is the primary concern**.</span></span> <span data-ttu-id="ea42c-368">O usuário sempre deve estar ciente de se os requisitos do aplicativo estão sendo atendidos.</span><span class="sxs-lookup"><span data-stu-id="ea42c-368">The user should always be aware of whether the application's requirements are being met.</span></span> <span data-ttu-id="ea42c-369">Quando eles não estão sendo atendidos, deve ser imediatamente claro para o usuário por que isso é assim e eles devem ser rapidamente levados a tomar a ação apropriada.</span><span class="sxs-lookup"><span data-stu-id="ea42c-369">When they aren't being met, it should be immediately clear to the user why this is so and they should be quickly led to take the appropriate action.</span></span>

<span data-ttu-id="ea42c-370">Em segundo lugar, **os aplicativos devem tentar atingir um equilíbrio entre eficiência e confiabilidade.**</span><span class="sxs-lookup"><span data-stu-id="ea42c-370">Secondly, **applications should attempt to strike a balance between efficiency and reliability**.</span></span> <span data-ttu-id="ea42c-371">Quando for possível fazer isso de forma **confiável,** os aplicativos deverão analisar automaticamente os dados de mapeamento espacial para economizar o tempo do usuário.</span><span class="sxs-lookup"><span data-stu-id="ea42c-371">When it's possible to do so **reliably**, applications should automatically analyze spatial mapping data to save the user time.</span></span> <span data-ttu-id="ea42c-372">Quando não é possível fazer isso de forma confiável, os aplicativos devem permitir que o usuário forneça rapidamente ao aplicativo as informações adicionais necessárias.</span><span class="sxs-lookup"><span data-stu-id="ea42c-372">When it isn't possible to do so reliably, applications should instead enable the user to quickly provide the application with the additional information it requires.</span></span>

<span data-ttu-id="ea42c-373">Para ajudar a projetar a experiência de verificação correta, considere quais das seguintes possibilidades são aplicáveis ao seu aplicativo:</span><span class="sxs-lookup"><span data-stu-id="ea42c-373">To help design the right scanning experience, consider which of the following possibilities are applicable to your application:</span></span>

* <span data-ttu-id="ea42c-374">**Nenhuma experiência de verificação**</span><span class="sxs-lookup"><span data-stu-id="ea42c-374">**No scanning experience**</span></span>
   * <span data-ttu-id="ea42c-375">Um aplicativo pode funcionar perfeitamente sem qualquer experiência de verificação guiada; ele aprenderá sobre as superfícies que são observadas durante a movimentação natural do usuário.</span><span class="sxs-lookup"><span data-stu-id="ea42c-375">An application may function perfectly without any guided scanning experience; it will learn about surfaces that are observed in the course of natural user movement.</span></span>
   * <span data-ttu-id="ea42c-376">Por exemplo, um aplicativo que permite ao usuário desenhar em superfícies com pintura de pulverização holográfica requer conhecimento apenas das superfícies visíveis no momento para o usuário.</span><span class="sxs-lookup"><span data-stu-id="ea42c-376">For example, an application that lets the user draw on surfaces with holographic spray paint requires knowledge only of the surfaces currently visible to the user.</span></span>
   * <span data-ttu-id="ea42c-377">O ambiente já poderá ser verificado se ele for aquele em que o usuário já passou muito tempo usando o HoloLens.</span><span class="sxs-lookup"><span data-stu-id="ea42c-377">The environment may be scanned already if it's one in which the user has already spent lots of time using the HoloLens.</span></span>
   * <span data-ttu-id="ea42c-378">Tenha em mente, no entanto, que a câmera usada pelo mapeamento espacial só pode ver 3,1 m na frente do usuário, portanto, o mapeamento espacial não conhecerá superfícies mais distantes, a menos que o usuário as tenha observado de uma distância mais próxima no passado.</span><span class="sxs-lookup"><span data-stu-id="ea42c-378">Bear in mind however that the camera used by spatial mapping can only see 3.1 m in front of the user, so spatial mapping won't know about any more distant surfaces unless the user has observed them from a closer distance in the past.</span></span>
   * <span data-ttu-id="ea42c-379">Portanto, o usuário entende quais superfícies foram examinadas, o aplicativo deve fornecer comentários visuais para esse efeito, por exemplo, a transmissão de sombras virtuais em superfícies examinadas pode ajudar o usuário a colocar hologramas nessas superfícies.</span><span class="sxs-lookup"><span data-stu-id="ea42c-379">So the user understands which surfaces have been scanned, the application should provide visual feedback to this effect, for example casting virtual shadows onto scanned surfaces may help the user place holograms on those surfaces.</span></span>
   * <span data-ttu-id="ea42c-380">Nesse caso, os volumes delimitados do observador de superfície espacial devem ser atualizados cada quadro para um [sistema de coordenadas espaciais](coordinate-systems.md)bloqueadas pelo corpo, para que eles sigam o usuário.</span><span class="sxs-lookup"><span data-stu-id="ea42c-380">For this case, the spatial surface observer's bounding volumes should be updated each frame to a body-locked [spatial coordinate system](coordinate-systems.md), so that they follow the user.</span></span>

* <span data-ttu-id="ea42c-381">**Encontrar um local adequado**</span><span class="sxs-lookup"><span data-stu-id="ea42c-381">**Find a suitable location**</span></span>
   * <span data-ttu-id="ea42c-382">Um aplicativo pode ser projetado para uso em um local com requisitos específicos.</span><span class="sxs-lookup"><span data-stu-id="ea42c-382">An application may be designed for use in a location with specific requirements.</span></span>
   * <span data-ttu-id="ea42c-383">Por exemplo, o aplicativo pode exigir uma área vazia em todo o usuário para que possa praticar com segurança Holographic Kung-Fu.</span><span class="sxs-lookup"><span data-stu-id="ea42c-383">For example, the application may require an empty area around the user so they can safely practice holographic kung-fu.</span></span>
   * <span data-ttu-id="ea42c-384">Os aplicativos devem comunicar quaisquer requisitos específicos para o usuário antes e reforce-los com comentários visuais claros.</span><span class="sxs-lookup"><span data-stu-id="ea42c-384">Applications should communicate any specific requirements to the user up-front, and reinforce them with clear visual feedback.</span></span>
   * <span data-ttu-id="ea42c-385">Neste exemplo, o aplicativo deve Visualizar a extensão da área vazia necessária e realçar visualmente a presença de qualquer objeto indesejado nessa zona.</span><span class="sxs-lookup"><span data-stu-id="ea42c-385">In this example, the application should visualize the extent of the required empty area and visually highlight the presence of any undesired objects within this zone.</span></span>
   * <span data-ttu-id="ea42c-386">Para esse caso, os volumes delimitados do observador de superfície espacial devem usar um [sistema de coordenadas espaciais](coordinate-systems.md) bloqueados pelo mundo no local escolhido.</span><span class="sxs-lookup"><span data-stu-id="ea42c-386">For this case, the spatial surface observer's bounding volumes should use a world-locked [spatial coordinate system](coordinate-systems.md) in the chosen location.</span></span>

* <span data-ttu-id="ea42c-387">**Encontre uma configuração adequada de superfícies**</span><span class="sxs-lookup"><span data-stu-id="ea42c-387">**Find a suitable configuration of surfaces**</span></span>
   * <span data-ttu-id="ea42c-388">Um aplicativo pode exigir uma configuração específica de superfícies, por exemplo, duas paredes grandes e simples e opostas para criar um Holographic Hall de espelhos.</span><span class="sxs-lookup"><span data-stu-id="ea42c-388">An application may require a specific configuration of surfaces, for example two large, flat, opposing walls to create a holographic hall of mirrors.</span></span>
   * <span data-ttu-id="ea42c-389">Nesses casos, o aplicativo precisará analisar as superfícies fornecidas pelo mapeamento espacial para detectar superfícies adequadas e direcionar o usuário para eles.</span><span class="sxs-lookup"><span data-stu-id="ea42c-389">In such cases, the application will need to analyze the surfaces provided by spatial mapping to detect suitable surfaces, and direct the user toward them.</span></span>
   * <span data-ttu-id="ea42c-390">O usuário deverá ter uma opção de fallback se a análise da superfície do aplicativo não for confiável.</span><span class="sxs-lookup"><span data-stu-id="ea42c-390">The user should have a fallback option if the application's surface analysis isn't reliable.</span></span> <span data-ttu-id="ea42c-391">Por exemplo, se o aplicativo identificar incorretamente um porta como uma parede simples, o usuário precisará de uma maneira simples de corrigir esse erro.</span><span class="sxs-lookup"><span data-stu-id="ea42c-391">For example, if the application incorrectly identifies a doorway as a flat wall, the user needs a simple way to correct this error.</span></span>

* <span data-ttu-id="ea42c-392">**Examinar parte do ambiente**</span><span class="sxs-lookup"><span data-stu-id="ea42c-392">**Scan part of the environment**</span></span>
   * <span data-ttu-id="ea42c-393">Um aplicativo pode desejar capturar apenas parte do ambiente, conforme indicado pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="ea42c-393">An application may wish to only capture part of the environment, as directed by the user.</span></span>
   * <span data-ttu-id="ea42c-394">Por exemplo, o aplicativo examina parte de uma sala para que o usuário possa postar um anúncio Holographic classificado para móveis que desejam vender.</span><span class="sxs-lookup"><span data-stu-id="ea42c-394">For example, the application scans part of a room so the user may post a holographic classified ad for furniture they wish to sell.</span></span>
   * <span data-ttu-id="ea42c-395">Nesse caso, o aplicativo deve capturar dados de mapeamento espacial dentro das regiões observadas pelo usuário durante a verificação.</span><span class="sxs-lookup"><span data-stu-id="ea42c-395">In this case, the application should capture spatial mapping data within the regions observed by the user during their scan.</span></span>

* <span data-ttu-id="ea42c-396">**Verificar a sala inteira**</span><span class="sxs-lookup"><span data-stu-id="ea42c-396">**Scan the whole room**</span></span>
   * <span data-ttu-id="ea42c-397">Um aplicativo pode exigir uma verificação de todas as superfícies no espaço atual, incluindo aquelas por trás do usuário.</span><span class="sxs-lookup"><span data-stu-id="ea42c-397">An application may require a scan of all of the surfaces in the current room, including those behind the user.</span></span>
   * <span data-ttu-id="ea42c-398">Por exemplo, um jogo pode colocar o usuário na função de Sempre, sob pressão de centenas de lilliputianos minúsculos se aproximando de todas as direções.</span><span class="sxs-lookup"><span data-stu-id="ea42c-398">For example, a game may put the user in the role of Gulliver, under siege from hundreds of tiny Lilliputians approaching from all directions.</span></span>
   * <span data-ttu-id="ea42c-399">Nesses casos, o aplicativo precisará determinar quantas superfícies na sala atual já foram examinadas e direcionar o olhar do usuário para preencher lacunas significativas.</span><span class="sxs-lookup"><span data-stu-id="ea42c-399">In such cases, the application will need to determine how many of the surfaces in the current room have already been scanned, and direct the user's gaze to fill in significant gaps.</span></span>
   * <span data-ttu-id="ea42c-400">A chave para esse processo é fornecer comentários visuais que deixa claro para o usuário quais superfícies ainda não foram examinadas.</span><span class="sxs-lookup"><span data-stu-id="ea42c-400">The key to this process is providing visual feedback that makes it clear to the user which surfaces haven't yet been scanned.</span></span> <span data-ttu-id="ea42c-401">O aplicativo pode, por exemplo, usar a base de distância [para](/windows/win32/direct3d9/fog-formulas) realçar visualmente as regiões que não são cobertas por superfícies de mapeamento espacial.</span><span class="sxs-lookup"><span data-stu-id="ea42c-401">The application could, for example,  use [distance-based fog](/windows/win32/direct3d9/fog-formulas) to visually highlight regions that aren't covered by spatial mapping surfaces.</span></span>

* <span data-ttu-id="ea42c-402">**Tirar um instantâneo inicial do ambiente**</span><span class="sxs-lookup"><span data-stu-id="ea42c-402">**Take an initial snapshot of the environment**</span></span>
   * <span data-ttu-id="ea42c-403">Um aplicativo pode querer ignorar todas as alterações no ambiente depois de tirar um 'instantâneo' inicial.</span><span class="sxs-lookup"><span data-stu-id="ea42c-403">An application may wish to ignore all changes in the environment after taking an initial 'snapshot'.</span></span>
   * <span data-ttu-id="ea42c-404">Isso pode ser apropriado para evitar a interrupção de dados criados pelo usuário que estão firmemente a coupleados ao estado inicial do ambiente.</span><span class="sxs-lookup"><span data-stu-id="ea42c-404">This may be appropriate to avoid disruption of user-created data that is tightly coupled to the initial state of the environment.</span></span>
   * <span data-ttu-id="ea42c-405">Nesse caso, o aplicativo deve fazer uma cópia dos dados de mapeamento espacial em seu estado inicial depois que a verificação for concluída.</span><span class="sxs-lookup"><span data-stu-id="ea42c-405">In this case, the application should make a copy of the spatial mapping data in its initial state once the scan is complete.</span></span>
   * <span data-ttu-id="ea42c-406">Os aplicativos devem continuar recebendo atualizações para dados de mapeamento espacial se os hologramas ainda devem ser corretamente ocluídos pelo ambiente.</span><span class="sxs-lookup"><span data-stu-id="ea42c-406">Applications should continue receiving updates to spatial mapping data if holograms are still to be correctly occluded by the environment.</span></span>
   * <span data-ttu-id="ea42c-407">As atualizações contínuas nos dados de mapeamento espacial também permitem visualizar todas as alterações ocorridas, esclarecendo ao usuário as diferenças entre estados anteriores e atuais do ambiente.</span><span class="sxs-lookup"><span data-stu-id="ea42c-407">Continued updates to spatial mapping data also allow visualizing any changes that have occurred, clarifying to the user the differences between prior and present states of the environment.</span></span>

* <span data-ttu-id="ea42c-408">**Tirar instantâneos iniciados pelo usuário do ambiente**</span><span class="sxs-lookup"><span data-stu-id="ea42c-408">**Take user-initiated snapshots of the environment**</span></span>
   * <span data-ttu-id="ea42c-409">Um aplicativo só pode querer responder a alterações ambientais quando instruído pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="ea42c-409">An application may only wish to respond to environmental changes when instructed by the user.</span></span>
   * <span data-ttu-id="ea42c-410">Por exemplo, o usuário pode criar várias '3D' de um amigo capturando suas poses em momentos diferentes.</span><span class="sxs-lookup"><span data-stu-id="ea42c-410">For example, the user could create multiple 3D 'statues' of a friend by capturing their poses at different moments.</span></span>

* <span data-ttu-id="ea42c-411">**Permitir que o usuário altere o ambiente**</span><span class="sxs-lookup"><span data-stu-id="ea42c-411">**Allow the user to change the environment**</span></span>
   * <span data-ttu-id="ea42c-412">Um aplicativo pode ser projetado para responder em tempo real a quaisquer alterações feitas no ambiente do usuário.</span><span class="sxs-lookup"><span data-stu-id="ea42c-412">An application may be designed to respond in real time to any changes made in the user's environment.</span></span>
   * <span data-ttu-id="ea42c-413">Por exemplo, o usuário desenhando uma cena pode disparar a 'alteração de cena' para uma peça holográfica que ocorre no outro lado.</span><span class="sxs-lookup"><span data-stu-id="ea42c-413">For example, the user drawing a curtain could trigger 'scene change' for a holographic play taking place on the other side.</span></span>

* <span data-ttu-id="ea42c-414">**Orientar o usuário para evitar erros nos dados de mapeamento espacial**</span><span class="sxs-lookup"><span data-stu-id="ea42c-414">**Guide the user to avoid errors in the spatial mapping data**</span></span>
   * <span data-ttu-id="ea42c-415">Um aplicativo pode desejar fornecer orientações ao usuário enquanto eles estão verificando seu ambiente.</span><span class="sxs-lookup"><span data-stu-id="ea42c-415">An application may wish to provide guidance to the user while they're scanning their environment.</span></span>
   * <span data-ttu-id="ea42c-416">Isso pode ajudar o usuário a evitar determinados tipos de [erros nos dados de mapeamento espacial](spatial-mapping.md#what-influences-spatial-mapping-quality), por exemplo, mantendo-se afastados das janelas sunlit ou dos espelhos.</span><span class="sxs-lookup"><span data-stu-id="ea42c-416">This can help the user to avoid certain kinds of [errors in the spatial mapping data](spatial-mapping.md#what-influences-spatial-mapping-quality), for example by staying away from sunlit windows or mirrors.</span></span>

<span data-ttu-id="ea42c-417">Um detalhe extra a ser considerado é que o ' intervalo ' de dados de mapeamento espacial não é ilimitado.</span><span class="sxs-lookup"><span data-stu-id="ea42c-417">One extra detail to be aware of is that the 'range' of spatial mapping data isn't unlimited.</span></span> <span data-ttu-id="ea42c-418">Embora o mapeamento espacial crie um banco de dados permanente com espaços grandes, ele torna os dados disponíveis apenas para os aplicativos em uma "bolha" de tamanho limitado em relação ao usuário.</span><span class="sxs-lookup"><span data-stu-id="ea42c-418">While spatial mapping does build a permanent database of large spaces, it only makes that data available to applications in a 'bubble' of limited size around the user.</span></span> <span data-ttu-id="ea42c-419">Se você começar no início de um longo corredor e ir longe o suficiente do início, eventualmente as superfícies espaciais no início desaparecerão.</span><span class="sxs-lookup"><span data-stu-id="ea42c-419">If you start at the beginning of a long corridor and walk far enough away from the start, then eventually the spatial surfaces back at the beginning will disappear.</span></span> <span data-ttu-id="ea42c-420">Você pode mitigar isso armazenando em cache essas superfícies em seu aplicativo depois que elas desaparecerem dos dados de mapeamento espacial disponíveis.</span><span class="sxs-lookup"><span data-stu-id="ea42c-420">You can mitigate this by caching those surfaces in your application after they've disappeared from the available spatial mapping data.</span></span>

## <a name="mesh-processing"></a><span data-ttu-id="ea42c-421">Processamento de malha</span><span class="sxs-lookup"><span data-stu-id="ea42c-421">Mesh processing</span></span>

<span data-ttu-id="ea42c-422">Pode ajudar a detectar tipos comuns de erros em superfícies e filtrar, remover ou modificar os dados de mapeamento espacial conforme apropriado.</span><span class="sxs-lookup"><span data-stu-id="ea42c-422">It may help to detect common types of errors in surfaces and to filter, remove or modify the spatial mapping data as appropriate.</span></span>

<span data-ttu-id="ea42c-423">Tenha em mente que os dados de mapeamento espacial devem ser tão fiels quanto possível para superfícies reais, de modo que qualquer processamento que você aplique riscos mudará suas superfícies além da ' verdade '.</span><span class="sxs-lookup"><span data-stu-id="ea42c-423">Bear in mind that spatial mapping data is intended to be as faithful as possible to real-world surfaces, so any processing you apply risks shifting your surfaces further from the 'truth'.</span></span>

<span data-ttu-id="ea42c-424">Aqui estão alguns exemplos de diferentes tipos de processamento de malha que podem ser úteis:</span><span class="sxs-lookup"><span data-stu-id="ea42c-424">Here are some examples of different types of mesh processing that you may find useful:</span></span>

* <span data-ttu-id="ea42c-425">**Preenchimento de orifício**</span><span class="sxs-lookup"><span data-stu-id="ea42c-425">**Hole filling**</span></span>
   * <span data-ttu-id="ea42c-426">Se um pequeno objeto formado por um material escuro falhar ao digitalizar, ele deixará um orifício na superfície ao redor.</span><span class="sxs-lookup"><span data-stu-id="ea42c-426">If a small object made of a dark material fails to scan, it will leave a hole in the surrounding surface.</span></span>
   * <span data-ttu-id="ea42c-427">Os buracos afetam o oclusão: os hologramas podem ser vistos "por meio de um buraco em uma superfície do mundo real opaca supostamente.</span><span class="sxs-lookup"><span data-stu-id="ea42c-427">Holes affect occlusion: holograms can be seen 'through' a hole in a supposedly opaque real-world surface.</span></span>
   * <span data-ttu-id="ea42c-428">Os buracos afetam o raycasts: se você estiver usando o raycasts para ajudar os usuários a interagir com as superfícies, pode ser indesejável que esses raios passem por buracos.</span><span class="sxs-lookup"><span data-stu-id="ea42c-428">Holes affect raycasts: if you're using raycasts to help users interact with surfaces, it may be undesirable for these rays to pass through holes.</span></span> <span data-ttu-id="ea42c-429">Uma mitigação é usar um pacote de vários raycasts cobrindo uma região de tamanho adequado.</span><span class="sxs-lookup"><span data-stu-id="ea42c-429">One mitigation is to use a bundle of multiple raycasts covering an appropriately sized region.</span></span> <span data-ttu-id="ea42c-430">Isso permitirá que você filtre os resultados de "exceção", de modo que, mesmo que um Raycast passe por uma pequena brecha, o resultado da agregação ainda será válido.</span><span class="sxs-lookup"><span data-stu-id="ea42c-430">This will allow you to filter 'outlier' results, so that even if one raycast passes through a small hole, the aggregate result will still be valid.</span></span> <span data-ttu-id="ea42c-431">No entanto, essa abordagem vem com um custo computacional.</span><span class="sxs-lookup"><span data-stu-id="ea42c-431">However, this approach comes at a computational cost.</span></span>
   * <span data-ttu-id="ea42c-432">Os orifícios afetam colisões físicas: um objeto controlado pela simulação de física pode cair por um orifício no chão e se perder.</span><span class="sxs-lookup"><span data-stu-id="ea42c-432">Holes affect physics collisions: an object controlled by physics simulation may drop through a hole in the floor and become lost.</span></span>
   * <span data-ttu-id="ea42c-433">É possível preencher de forma algorítmicamente esses orifícios na malha da superfície.</span><span class="sxs-lookup"><span data-stu-id="ea42c-433">It's possible to algorithmically fill such holes in the surface mesh.</span></span> <span data-ttu-id="ea42c-434">No entanto, você precisará ajustar seu algoritmo para que "orifícios reais", como janelas e portas, não seja preenchido.</span><span class="sxs-lookup"><span data-stu-id="ea42c-434">However, you'll need to tune your algorithm so that 'real holes' such as windows and doorways don't get filled in.</span></span> <span data-ttu-id="ea42c-435">Pode ser difícil diferenciar de forma confiável 'orifícios reais' de 'orifícios imaginários', portanto, você precisará experimentar heurísticas diferentes, como 'tamanho' e 'forma de limite'.</span><span class="sxs-lookup"><span data-stu-id="ea42c-435">It can be difficult to reliably differentiate 'real holes' from 'imaginary holes', so you'll need to experiment with different heuristics such as 'size' and 'boundary shape'.</span></span>

* <span data-ttu-id="ea42c-436">**Remoção de remoção de resíduos**</span><span class="sxs-lookup"><span data-stu-id="ea42c-436">**Hallucination removal**</span></span>
   * <span data-ttu-id="ea42c-437">As reflexões, as luzes brilhante e os objetos móveis podem deixar pequenas 'desilusão' persistentes flutuando no ar médio.</span><span class="sxs-lookup"><span data-stu-id="ea42c-437">Reflections, bright lights, and moving objects can leave small lingering 'hallucinations' floating in mid-air.</span></span>
   * <span data-ttu-id="ea42c-438">As figuras afetam a oclusão: as desilusão podem se tornar visíveis à medida que as formas escuras se movem na frente e ocluem outros hologramas.</span><span class="sxs-lookup"><span data-stu-id="ea42c-438">Hallucinations affect occlusion: hallucinations may become visible as dark shapes moving in front of and occluding other holograms.</span></span>
   * <span data-ttu-id="ea42c-439">As rotinas afetam os raios: se você estiver usando raycasts para ajudar os usuários a interagir com superfícies, esses raios poderão atingir uma desastagem em vez da superfície por trás dela.</span><span class="sxs-lookup"><span data-stu-id="ea42c-439">Hallucinations affect raycasts: if you're using raycasts to help users interact with surfaces, these rays could hit a hallucination instead of the surface behind it.</span></span> <span data-ttu-id="ea42c-440">Assim como com os orifícios, uma mitigação é usar muitos raycasts em vez de um único raycast, mas novamente isso ocorrerá a um custo computacional.</span><span class="sxs-lookup"><span data-stu-id="ea42c-440">As with holes, one mitigation is to use many raycasts instead of a single raycast, but again this will come at a computational cost.</span></span>
   * <span data-ttu-id="ea42c-441">As simulações afetam colisões físicas: um objeto controlado pela simulação de física pode ficar preso em uma desilusão e não conseguir se mover por uma área aparentemente clara do espaço.</span><span class="sxs-lookup"><span data-stu-id="ea42c-441">Hallucinations affect physics collisions: an object controlled by physics simulation may become stuck against a hallucination and be unable to move through a seemingly clear area of space.</span></span>
   * <span data-ttu-id="ea42c-442">É possível filtrar essas reações da malha da superfície.</span><span class="sxs-lookup"><span data-stu-id="ea42c-442">It's possible to filter such hallucinations from the surface mesh.</span></span> <span data-ttu-id="ea42c-443">No entanto, assim como ocorre com os orifícios, você precisará ajustar seu algoritmo para que objetos pequenos reais, como arquibancadas de lâmpada e alças de porta, não seja removido.</span><span class="sxs-lookup"><span data-stu-id="ea42c-443">However, as with holes, you'll need to tune your algorithm so that real small objects such as lamp-stands and door handles don't get removed.</span></span>

* <span data-ttu-id="ea42c-444">**Suavização**</span><span class="sxs-lookup"><span data-stu-id="ea42c-444">**Smoothing**</span></span>
   * <span data-ttu-id="ea42c-445">O mapeamento espacial pode retornar superfícies que parecem ser aproximadas ou 'barulhentos' em comparação com suas contrapartes do mundo real.</span><span class="sxs-lookup"><span data-stu-id="ea42c-445">Spatial mapping may return surfaces that appear to be rough or 'noisy' in comparison to their real-world counterparts.</span></span>
   * <span data-ttu-id="ea42c-446">A suavidade afeta colisões físicas: se o chão for aproximado, uma bola de futebol fisicamente simulada poderá não rolar suavemente em uma linha reta.</span><span class="sxs-lookup"><span data-stu-id="ea42c-446">Smoothness affects physics collisions: if the floor is rough, a physically simulated golf ball may not roll smoothly across it in a straight line.</span></span>
   * <span data-ttu-id="ea42c-447">A suavidade afeta a renderização: se uma superfície for visualizada diretamente, os normais de superfície aproximada poderão afetar sua aparência e interromper uma aparência "limpa".</span><span class="sxs-lookup"><span data-stu-id="ea42c-447">Smoothness affects rendering: if a surface is visualized directly, rough surface normals can affect its appearance and disrupt a 'clean' look.</span></span> <span data-ttu-id="ea42c-448">É possível atenuar isso usando iluminação e texturas apropriadas no sombreador usado para renderizar a superfície.</span><span class="sxs-lookup"><span data-stu-id="ea42c-448">It's possible to mitigate this by using appropriate lighting and textures in the shader that is used to render the surface.</span></span>
   * <span data-ttu-id="ea42c-449">É possível suavizar a áspero em uma malha de superfície.</span><span class="sxs-lookup"><span data-stu-id="ea42c-449">It's possible to smooth out roughness in a surface mesh.</span></span> <span data-ttu-id="ea42c-450">No entanto, isso pode empurrar a superfície para longe da superfície real correspondente.</span><span class="sxs-lookup"><span data-stu-id="ea42c-450">However, this may push the surface further away from the corresponding real-world surface.</span></span> <span data-ttu-id="ea42c-451">Manter uma correspondência próxima é importante para produzir oclusão de holograma precisos e para permitir que os usuários obtenham interações precisas e previsíveis com superfícies holographics.</span><span class="sxs-lookup"><span data-stu-id="ea42c-451">Maintaining a close correspondence is important to produce accurate hologram occlusion, and to enable users to achieve precise and predictable interactions with holographic surfaces.</span></span>
   * <span data-ttu-id="ea42c-452">Se apenas uma alteração superficial for necessária, pode ser suficiente para suavizar Normals de vértice sem alterar as posições de vértice.</span><span class="sxs-lookup"><span data-stu-id="ea42c-452">If only a cosmetic change is required, it may be sufficient to smooth vertex normals without changing vertex positions.</span></span>

* <span data-ttu-id="ea42c-453">**Localização do plano**</span><span class="sxs-lookup"><span data-stu-id="ea42c-453">**Plane finding**</span></span>
   * <span data-ttu-id="ea42c-454">Há muitas formas de análise que um aplicativo pode desejar executar nas superfícies fornecidas pelo mapeamento espacial.</span><span class="sxs-lookup"><span data-stu-id="ea42c-454">There are many forms of analysis that an application may wish to perform on the surfaces provided by spatial mapping.</span></span>
   * <span data-ttu-id="ea42c-455">Um exemplo simples é ' Localizar plano '; identificação das regiões de superfícies limitadas, em grande parte.</span><span class="sxs-lookup"><span data-stu-id="ea42c-455">One simple example is 'plane finding'; identifying bounded, mostly planar regions of surfaces.</span></span>
   * <span data-ttu-id="ea42c-456">As regiões planar podem ser usadas como superfícies de trabalho Holographic, regiões em que o conteúdo Holographic pode ser colocado automaticamente pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ea42c-456">Planar regions can be used as holographic work-surfaces, regions where holographic content can be automatically placed by the application.</span></span>
   * <span data-ttu-id="ea42c-457">As regiões planar podem restringir a interface do usuário, para orientar os usuários a interagir com as superfícies que melhor atendam às suas necessidades.</span><span class="sxs-lookup"><span data-stu-id="ea42c-457">Planar regions can constrain the user interface, to guide users to interact with the surfaces that best suit their needs.</span></span>
   * <span data-ttu-id="ea42c-458">As regiões planar podem ser usadas como no mundo real, para contrapartes Holographic a objetos funcionais, como telas de LCD, tabelas ou quadros de comunicações.</span><span class="sxs-lookup"><span data-stu-id="ea42c-458">Planar regions can be used as in the real world, for holographic counterparts to functional objects such as LCD screens, tables or whiteboards.</span></span>
   * <span data-ttu-id="ea42c-459">As regiões planar podem definir áreas de reprodução, formando a base dos níveis de jogos de vídeo.</span><span class="sxs-lookup"><span data-stu-id="ea42c-459">Planar regions can define play areas, forming the basis of video game levels.</span></span>
   * <span data-ttu-id="ea42c-460">As regiões planar podem ajudar os agentes virtuais a navegar pelo mundo real, identificando as áreas de piso que as pessoas realmente têm a probabilidade de acompanhar.</span><span class="sxs-lookup"><span data-stu-id="ea42c-460">Planar regions can aid virtual agents to navigate the real world, by identifying the areas of floor that real people are likely to walk on.</span></span>

## <a name="prototyping-and-debugging"></a><span data-ttu-id="ea42c-461">Protótipo e depuração</span><span class="sxs-lookup"><span data-stu-id="ea42c-461">Prototyping and debugging</span></span>

### <a name="useful-tools"></a><span data-ttu-id="ea42c-462">Ferramentas úteis</span><span class="sxs-lookup"><span data-stu-id="ea42c-462">Useful tools</span></span>

* <span data-ttu-id="ea42c-463">O [emulador do HoloLens](../develop/platform-capabilities-and-apis/using-the-hololens-emulator.md) pode ser usado para desenvolver aplicativos usando o mapeamento espacial sem acesso a um HoloLens físico.</span><span class="sxs-lookup"><span data-stu-id="ea42c-463">The [HoloLens emulator](../develop/platform-capabilities-and-apis/using-the-hololens-emulator.md) can be used to develop applications using spatial mapping without access to a physical HoloLens.</span></span> <span data-ttu-id="ea42c-464">Ele permite simular uma sessão ao vivo em um HoloLens em um ambiente realista, com todos os dados que seu aplicativo normalmente consumiria, incluindo movimento de HoloLens, sistemas de coordenadas espaciais e malhas de mapeamento espacial.</span><span class="sxs-lookup"><span data-stu-id="ea42c-464">It allows you to simulate a live session on a HoloLens in a realistic environment, with all of the data your application would normally consume, including HoloLens motion, spatial coordinate systems, and spatial mapping meshes.</span></span> <span data-ttu-id="ea42c-465">Isso pode ser usado para fornecer entradas confiáveis e reproduzíveis, que podem ser úteis para depurar problemas e avaliar alterações em seu código.</span><span class="sxs-lookup"><span data-stu-id="ea42c-465">This can be used to provide reliable, repeatable input, which can be useful for debugging problems and evaluating changes to your code.</span></span>
* <span data-ttu-id="ea42c-466">Para reproduzir um cenário, Capture dados de mapeamento espacial pela rede de um HoloLens ao vivo e, em seguida, salve-os no disco e reutilize-os em sessões de depuração posteriores.</span><span class="sxs-lookup"><span data-stu-id="ea42c-466">To reproduce a scenario, capture spatial mapping data over the network from a live HoloLens, then save it to disk and reuse it in later debugging sessions.</span></span>
* <span data-ttu-id="ea42c-467">A [exibição 3D](../develop/platform-capabilities-and-apis/using-the-windows-device-portal.md#3d-view) do portal de dispositivos windows fornece uma maneira de ver todas as superfícies espaciais disponíveis atualmente por meio do sistema de mapeamento espacial.</span><span class="sxs-lookup"><span data-stu-id="ea42c-467">The [Windows device portal 3D view](../develop/platform-capabilities-and-apis/using-the-windows-device-portal.md#3d-view) provides a way to see all of the spatial surfaces currently available via the spatial mapping system.</span></span> <span data-ttu-id="ea42c-468">Isso fornece uma base de comparação para as superfícies espaciais dentro de seu aplicativo; por exemplo, você pode facilmente saber se alguma superfície espacial está ausente ou está sendo exibida no local errado.</span><span class="sxs-lookup"><span data-stu-id="ea42c-468">This provides a basis of comparison for the spatial surfaces inside your application; for example, you can easily tell if any spatial surfaces are missing or are being displayed in the wrong place.</span></span>

### <a name="general-prototyping-guidance"></a><span data-ttu-id="ea42c-469">Diretrizes gerais de criação de protótipos</span><span class="sxs-lookup"><span data-stu-id="ea42c-469">General prototyping guidance</span></span>

* <span data-ttu-id="ea42c-470">Como [os erros nos](spatial-mapping.md#what-influences-spatial-mapping-quality) dados de mapeamento espacial podem afetar fortemente a experiência do usuário, recomendamos que você teste seu aplicativo em uma ampla variedade de ambientes.</span><span class="sxs-lookup"><span data-stu-id="ea42c-470">Because [errors](spatial-mapping.md#what-influences-spatial-mapping-quality) in the spatial mapping data may strongly affect your user's experience, we recommend that you test your application in a wide variety of environments.</span></span>
* <span data-ttu-id="ea42c-471">Não fique preso no hábito de sempre testar no mesmo local, por exemplo, em sua mesa.</span><span class="sxs-lookup"><span data-stu-id="ea42c-471">Don't get trapped in the habit of always testing in the same location, for example at your desk.</span></span> <span data-ttu-id="ea42c-472">Certifique-se de testar em várias superfícies de diferentes posições, formas, tamanhos e materiais.</span><span class="sxs-lookup"><span data-stu-id="ea42c-472">Make sure to test on various surfaces of different positions, shapes, sizes, and materials.</span></span>
* <span data-ttu-id="ea42c-473">Da mesma forma, embora os dados sintéticos ou gravados possam ser úteis para depuração, não se tornem muito dependentes dos mesmos poucos casos de teste.</span><span class="sxs-lookup"><span data-stu-id="ea42c-473">Similarly, while synthetic or recorded data can be useful for debugging, don't become too reliant upon the same few test cases.</span></span> <span data-ttu-id="ea42c-474">Isso pode atrasar a descoberta de problemas importantes que testes mais variados teriam capturado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="ea42c-474">This may delay finding important issues that more varied testing would have caught earlier.</span></span>
* <span data-ttu-id="ea42c-475">É uma boa ideia executar testes com usuários reais (e idealmente sem acesso), pois eles podem não usar o HoloLens ou seu aplicativo exatamente da mesma maneira que você.</span><span class="sxs-lookup"><span data-stu-id="ea42c-475">It's a good idea to perform testing with real (and ideally uncoached) users, because they may not use the HoloLens or your application in exactly the same way that you do.</span></span> <span data-ttu-id="ea42c-476">Na verdade, pode ser surpreendente como o comportamento, o conhecimento e as suposições das pessoas divergentes podem ser!</span><span class="sxs-lookup"><span data-stu-id="ea42c-476">In fact, it may surprise you how divergent people's behavior, knowledge, and assumptions can be!</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="ea42c-477">Solução de problemas</span><span class="sxs-lookup"><span data-stu-id="ea42c-477">Troubleshooting</span></span>

* <span data-ttu-id="ea42c-478">Para que as malhas de superfície sejam orientadas corretamente, cada GameObject precisa estar ativo antes de ser enviado ao SurfaceObserver para que sua malha seja construída.</span><span class="sxs-lookup"><span data-stu-id="ea42c-478">In order for the surface meshes to be orientated correctly, each GameObject needs to be active before it's sent to the SurfaceObserver to have its mesh constructed.</span></span> <span data-ttu-id="ea42c-479">Caso contrário, as malhas aparecerão em seu espaço, mas giradas em ângulos estranho.</span><span class="sxs-lookup"><span data-stu-id="ea42c-479">Otherwise, the meshes will show up in your space but rotated at weird angles.</span></span>
* <span data-ttu-id="ea42c-480">O GameObject que executa o script que se comunica com o SurfaceObserver precisa ser definido como a origem.</span><span class="sxs-lookup"><span data-stu-id="ea42c-480">The GameObject that runs the script that communicates with the SurfaceObserver needs to be set to the origin.</span></span> <span data-ttu-id="ea42c-481">Caso contrário, todos os GameObjects que você criar e enviar ao SurfaceObserver para construir suas malhas terão um deslocamento igual ao deslocamento do Objeto de Jogo Pai.</span><span class="sxs-lookup"><span data-stu-id="ea42c-481">Otherwise, all of GameObjects that you create and send to the SurfaceObserver to have their meshes constructed will have an offset equal to the offset of the Parent Game Object.</span></span> <span data-ttu-id="ea42c-482">Isso pode fazer com que suas malhas mostrem vários metros de distância, o que dificulta a depuração do que está acontecendo.</span><span class="sxs-lookup"><span data-stu-id="ea42c-482">This can make your meshes show up several meters away, which makes it hard to debug what is going on.</span></span>

## <a name="see-also"></a><span data-ttu-id="ea42c-483">Confira também</span><span class="sxs-lookup"><span data-stu-id="ea42c-483">See also</span></span>

* [<span data-ttu-id="ea42c-484">Sistemas de coordenadas</span><span class="sxs-lookup"><span data-stu-id="ea42c-484">Coordinate systems</span></span>](coordinate-systems.md)
* [<span data-ttu-id="ea42c-485">Mapeamento espacial no DirectX</span><span class="sxs-lookup"><span data-stu-id="ea42c-485">Spatial mapping in DirectX</span></span>](../develop/native/spatial-mapping-in-directx.md)
* [<span data-ttu-id="ea42c-486">Mapeamento espacial no Unity</span><span class="sxs-lookup"><span data-stu-id="ea42c-486">Spatial mapping in Unity</span></span>](../develop/unity/spatial-mapping-in-unity.md)
* [<span data-ttu-id="ea42c-487">Noções básicas sobre a cena</span><span class="sxs-lookup"><span data-stu-id="ea42c-487">Scene Understanding</span></span>](scene-understanding.md)
* [<span data-ttu-id="ea42c-488">Visualização de varredura do ambiente</span><span class="sxs-lookup"><span data-stu-id="ea42c-488">Room scan visualization</span></span>](room-scan-visualization.md)
* [<span data-ttu-id="ea42c-489">Projeto de som espacial</span><span class="sxs-lookup"><span data-stu-id="ea42c-489">Spatial sound design</span></span>](spatial-sound-design.md)
* [<span data-ttu-id="ea42c-490">Estudo de caso - Como olhar através dos buracos na sua realidade</span><span class="sxs-lookup"><span data-stu-id="ea42c-490">Case study - Looking through holes in your reality</span></span>](../out-of-scope/case-study-looking-through-holes-in-your-reality.md)