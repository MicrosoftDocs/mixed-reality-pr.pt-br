---
title: Habilitando a segurança de conexão para comunicação remota do Holographic
description: Esta página explica como configurar a comunicação remota do Holographic para usar conexões criptografadas e autenticadas entre o Player e os aplicativos remotos.
author: florianbagarmicrosoft
ms.author: flbagar
ms.date: 12/01/2020
ms.topic: article
keywords: HoloLens, Remoting, comunicação remota Holographic, headset de realidade misturada, headset de realidade mista do Windows, headset de realidade virtual, segurança, autenticação, servidor para cliente
ms.openlocfilehash: b2c054d19044b89b487331806b8256de1379fd53
ms.sourcegitcommit: 9664bcc10ed7e60f7593f3a7ae58c66060802ab1
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/01/2020
ms.locfileid: "96443462"
---
# <a name="enabling-connection-security-for-holographic-remoting"></a><span data-ttu-id="84968-104">Habilitando a segurança de conexão para comunicação remota do Holographic</span><span class="sxs-lookup"><span data-stu-id="84968-104">Enabling connection security for Holographic Remoting</span></span>

>[!IMPORTANT]
><span data-ttu-id="84968-105">Estas diretrizes são específicas para a comunicação remota do Holographic no HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="84968-105">This guidance is specific to Holographic Remoting on HoloLens 2.</span></span>

<span data-ttu-id="84968-106">Esta página fornece uma visão geral da segurança de rede para a comunicação remota do Holographic.</span><span class="sxs-lookup"><span data-stu-id="84968-106">This page gives you an overview of network security for Holographic Remoting.</span></span> <span data-ttu-id="84968-107">Você encontrará informações sobre</span><span class="sxs-lookup"><span data-stu-id="84968-107">You'll find information about</span></span>

* <span data-ttu-id="84968-108">segurança no contexto de comunicação remota do Holographic e por que você pode precisar dela</span><span class="sxs-lookup"><span data-stu-id="84968-108">security in the context of Holographic Remoting and why you might need it</span></span>
* <span data-ttu-id="84968-109">medidas recomendadas com base em diferentes casos de uso</span><span class="sxs-lookup"><span data-stu-id="84968-109">recommended measures based on different use cases</span></span>
* <span data-ttu-id="84968-110">Implementando a segurança em sua solução de comunicação remota do Holographic</span><span class="sxs-lookup"><span data-stu-id="84968-110">implementing security in your Holographic Remoting solution</span></span>

## <a name="overview"></a><span data-ttu-id="84968-111">Visão geral</span><span class="sxs-lookup"><span data-stu-id="84968-111">Overview</span></span>

<span data-ttu-id="84968-112">O Holographic remota troca informações em uma rede.</span><span class="sxs-lookup"><span data-stu-id="84968-112">Holographic Remoting exchanges information over a network.</span></span> <span data-ttu-id="84968-113">Se nenhuma medida de segurança estiver em vigor, os adversários na mesma rede poderão comprometer a integridade da comunicação ou acessar informações confidenciais.</span><span class="sxs-lookup"><span data-stu-id="84968-113">If no security measures are in place, adversaries on the same network may compromise the integrity of the communication or access confidential information.</span></span>

<span data-ttu-id="84968-114">Os aplicativos de exemplo e o Holographic Remoting Player na Windows Store vêm com a segurança desabilitada.</span><span class="sxs-lookup"><span data-stu-id="84968-114">The sample apps and the Holographic Remoting Player in the Windows Store come with security disabled.</span></span> <span data-ttu-id="84968-115">Fazer isso torna os exemplos mais fáceis de entender.</span><span class="sxs-lookup"><span data-stu-id="84968-115">Doing so makes the samples easier to understand.</span></span> <span data-ttu-id="84968-116">Ele também ajuda você a começar com mais rapidez com o desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="84968-116">It also helps you to get started more quickly with development.</span></span>

<span data-ttu-id="84968-117">No entanto, para teste de campo ou uso em produção, é altamente recomendável habilitar a segurança em sua solução de comunicação remota do Holographic.</span><span class="sxs-lookup"><span data-stu-id="84968-117">For field testing or production use however, we strongly recommend enabling security in your Holographic Remoting solution.</span></span>

<span data-ttu-id="84968-118">A segurança na comunicação remota do Holographic, quando configurada corretamente para seu caso de uso, oferece as seguintes garantias:</span><span class="sxs-lookup"><span data-stu-id="84968-118">Security in Holographic Remoting, when set up correctly for your use case, gives you the following guarantees:</span></span>

* <span data-ttu-id="84968-119">**Autenticidade:** o Player e o aplicativo remoto podem ter certeza de que o outro lado é quem eles alegam ser</span><span class="sxs-lookup"><span data-stu-id="84968-119">**Authenticity:** both player and remote app can be sure the other side is who they claim to be</span></span>
* <span data-ttu-id="84968-120">**Confidencialidade:** nenhum terceiro pode ler as informações trocadas entre o Player e o aplicativo remoto</span><span class="sxs-lookup"><span data-stu-id="84968-120">**Confidentiality:** no third party can read the information exchanged between player and remote app</span></span>
* <span data-ttu-id="84968-121">**Integridade:** o Player e o remoto podem detectar qualquer alteração em trânsito em sua comunicação</span><span class="sxs-lookup"><span data-stu-id="84968-121">**Integrity:** player and remote can detect any in-transit changes to their communication</span></span>

>[!IMPORTANT]
><span data-ttu-id="84968-122">Para poder usar os recursos de segurança, você precisará implementar um [player personalizado](holographic-remoting-create-player.md) e um aplicativo remoto personalizado usando a [realidade mista do Windows](holographic-remoting-create-remote-wmr.md) ou as APIs do [OpenXR](holographic-remoting-create-remote-openxr.md) .</span><span class="sxs-lookup"><span data-stu-id="84968-122">To be able to use security features, you will need to implement both a [custom player](holographic-remoting-create-player.md) and a custom remote app using either [Windows Mixed Reality](holographic-remoting-create-remote-wmr.md) or [OpenXR](holographic-remoting-create-remote-openxr.md) APIs.</span></span>

>[!NOTE]
> <span data-ttu-id="84968-123">A partir da versão [2.4.0](holographic-remoting-version-history.md#v2.4.0) , os aplicativos remotos usando a [API OpenXR](../native/openxr.md) podem ser criados.</span><span class="sxs-lookup"><span data-stu-id="84968-123">Starting with version [2.4.0](holographic-remoting-version-history.md#v2.4.0) remote apps using the [OpenXR API](../native/openxr.md) can be created.</span></span> <span data-ttu-id="84968-124">Uma visão geral sobre como estabelecer uma conexão segura em um ambiente OpenXR pode ser encontrada [abaixo](#secure-connection-using-the-openxr-api).</span><span class="sxs-lookup"><span data-stu-id="84968-124">An overview on how to establish a secure connection in an OpenXR environment can be found [below](#secure-connection-using-the-openxr-api).</span></span>

## <a name="planning-the-security-implementation"></a><span data-ttu-id="84968-125">Planejando a implementação de segurança</span><span class="sxs-lookup"><span data-stu-id="84968-125">Planning the security implementation</span></span>

<span data-ttu-id="84968-126">Quando você habilita a segurança na comunicação remota do Holographic, a biblioteca de comunicação remota habilitará automaticamente as verificações de criptografia e integridade para todos os dados trocados pela rede.</span><span class="sxs-lookup"><span data-stu-id="84968-126">When you enable security in Holographic Remoting, the remoting library will automatically enable encryption and integrity checks for all data exchanged over the network.</span></span>

<span data-ttu-id="84968-127">No entanto, garantir a autenticação adequada requer algum trabalho extra.</span><span class="sxs-lookup"><span data-stu-id="84968-127">Ensuring proper authentication requires some extra work though.</span></span> <span data-ttu-id="84968-128">O que exatamente você precisa fazer depende de seu caso de uso e o restante desta seção é sobre como descobrir as etapas necessárias.</span><span class="sxs-lookup"><span data-stu-id="84968-128">What exactly you need to do depends on your use case, and the rest of this section is about figuring out the necessary steps.</span></span>

>[!IMPORTANT]
> <span data-ttu-id="84968-129">Este artigo só pode fornecer diretrizes gerais.</span><span class="sxs-lookup"><span data-stu-id="84968-129">This article can only provide general guidance.</span></span> <span data-ttu-id="84968-130">Se você não tiver certeza, considere consultar um especialista em segurança que possa fornecer orientação específica ao seu caso de uso.</span><span class="sxs-lookup"><span data-stu-id="84968-130">If you feel unsure, consider consulting a security expert that can give you guidance specific to your use case.</span></span>

<span data-ttu-id="84968-131">Primeiro, uma terminologia: ao descrever as conexões de rede, os termos _cliente_ e _servidor_ serão usados.</span><span class="sxs-lookup"><span data-stu-id="84968-131">First some terminology: when describing network connections, the terms _client_ and _server_ will be used.</span></span> <span data-ttu-id="84968-132">O servidor é o lado de escuta de conexões de entrada em um endereço de ponto de extremidade conhecido e o cliente é aquele que se conecta ao ponto de extremidade do servidor.</span><span class="sxs-lookup"><span data-stu-id="84968-132">The server is the side listening for incoming connections on a known endpoint address, and the client is the one connecting to the server's endpoint.</span></span>

>[!NOTE]
> <span data-ttu-id="84968-133">As funções de cliente e servidor não são ligadas a se um aplicativo está agindo como um player ou como um remoto.</span><span class="sxs-lookup"><span data-stu-id="84968-133">The client and and server roles are not tied to whether an app is acting as a player or as a remote.</span></span> <span data-ttu-id="84968-134">Embora os exemplos tenham o Player na função de servidor, é fácil reverter as funções se ele se adequar melhor ao seu caso de uso.</span><span class="sxs-lookup"><span data-stu-id="84968-134">While the samples have the player in the server role, it's easy to reverse the roles if it better fits your use case.</span></span>

### <a name="planning-the-server-to-client-authentication"></a><span data-ttu-id="84968-135">Planejando a autenticação de servidor para cliente</span><span class="sxs-lookup"><span data-stu-id="84968-135">Planning the server-to-client authentication</span></span>

<span data-ttu-id="84968-136">O servidor usa certificados digitais para provar sua identidade para o cliente.</span><span class="sxs-lookup"><span data-stu-id="84968-136">The server uses digital certificates to prove its identity to the client.</span></span> <span data-ttu-id="84968-137">O cliente valida o certificado do servidor durante a fase de handshake de conexão.</span><span class="sxs-lookup"><span data-stu-id="84968-137">The client validates the server's certificate during the connection handshake phase.</span></span> <span data-ttu-id="84968-138">Se o cliente não confiar no servidor, ele encerrará a conexão neste ponto.</span><span class="sxs-lookup"><span data-stu-id="84968-138">If the client doesn't trust the server, it will end the connection at this point.</span></span>

<span data-ttu-id="84968-139">Como o cliente valida o certificado do servidor e quais tipos de certificados de servidor podem ser usados, depende de seu caso de uso.</span><span class="sxs-lookup"><span data-stu-id="84968-139">How the client validates the server certificate, and what kinds of server certificates can be used, depends on your use case.</span></span>

<span data-ttu-id="84968-140">**Caso de uso 1:** O nome do host do servidor não está corrigido ou o servidor não é endereçado por nomes de host.</span><span class="sxs-lookup"><span data-stu-id="84968-140">**Use case 1:** The server hostname isn't fixed, or the server isn't addressed by host name at all.</span></span>

<span data-ttu-id="84968-141">Nesse caso de uso, não é prático (ou até mesmo possível) emitir um certificado para o nome de host do servidor.</span><span class="sxs-lookup"><span data-stu-id="84968-141">In this use case, it isn't practical (or even possible) to issue a certificate for the server's host name.</span></span> <span data-ttu-id="84968-142">A recomendação aqui é validar a impressão digital do certificado em vez disso.</span><span class="sxs-lookup"><span data-stu-id="84968-142">The recommendation here is to validate the certificate's thumbprint instead.</span></span> <span data-ttu-id="84968-143">Como uma impressão digital humana, a impressão digital identifica exclusivamente um certificado.</span><span class="sxs-lookup"><span data-stu-id="84968-143">Like a human fingerprint, the thumbprint uniquely identifies a certificate.</span></span>

<span data-ttu-id="84968-144">É importante comunicar a impressão digital para o cliente fora de banda.</span><span class="sxs-lookup"><span data-stu-id="84968-144">It's important to communicate the thumbprint to the client out-of-band.</span></span> <span data-ttu-id="84968-145">Isso significa que você não pode enviá-lo pela mesma conexão de rede usada para comunicação remota.</span><span class="sxs-lookup"><span data-stu-id="84968-145">That means, you can't send it over the same network connection that's used for remoting.</span></span> <span data-ttu-id="84968-146">Em vez disso, você pode inseri-lo manualmente na configuração do cliente ou fazer com que o cliente verifique um código QR.</span><span class="sxs-lookup"><span data-stu-id="84968-146">Instead, you could manually enter it into the client's configuration, or to have the client scan a QR code.</span></span>

<span data-ttu-id="84968-147">**Caso de uso 2:** O servidor pode ser acessado por um nome de host estável.</span><span class="sxs-lookup"><span data-stu-id="84968-147">**Use case 2:** The server can be reached over a stable host name.</span></span>

<span data-ttu-id="84968-148">Nesse caso de uso, o servidor tem um nome de host específico e você sabe que esse nome não é provavelmente alterado.</span><span class="sxs-lookup"><span data-stu-id="84968-148">In this use case, the server has a specific host name, and you know this name isn't likely to change.</span></span> <span data-ttu-id="84968-149">Você pode usar um certificado emitido para o nome de host do servidor.</span><span class="sxs-lookup"><span data-stu-id="84968-149">You can then use a certificate issued to the server's host name.</span></span> <span data-ttu-id="84968-150">A relação de confiança será estabelecida com base no nome do host e na cadeia de confiança do certificado.</span><span class="sxs-lookup"><span data-stu-id="84968-150">Trust will be established based on the host name and the certificate's chain of trust.</span></span>

<span data-ttu-id="84968-151">Se você escolher essa opção, o cliente precisará saber o nome do host do servidor e o certificado raiz com antecedência.</span><span class="sxs-lookup"><span data-stu-id="84968-151">If you choose this option, the client needs to know the server's host name and the root certificate in advance.</span></span>

### <a name="planning-the-client-to-server-authentication"></a><span data-ttu-id="84968-152">Planejando a autenticação de cliente para servidor</span><span class="sxs-lookup"><span data-stu-id="84968-152">Planning the client-to-server authentication</span></span>

<span data-ttu-id="84968-153">Os clientes se autenticam no servidor usando um token de forma livre.</span><span class="sxs-lookup"><span data-stu-id="84968-153">Clients authenticate against the server using a free-form token.</span></span> <span data-ttu-id="84968-154">O que esse token deve conter dependerá novamente do seu caso de uso:</span><span class="sxs-lookup"><span data-stu-id="84968-154">What this token should contain will again depend on your use case:</span></span>

<span data-ttu-id="84968-155">**Caso de uso 1:** Você só precisa verificar a identidade do aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="84968-155">**Use case 1:** You only need to verify the client app's identity.</span></span>

<span data-ttu-id="84968-156">Nesse caso de uso, um segredo compartilhado pode ser suficiente.</span><span class="sxs-lookup"><span data-stu-id="84968-156">In this use case, a shared secret can be sufficient.</span></span> <span data-ttu-id="84968-157">Esse segredo deve ser complexo o suficiente para que não possa ser adivinhado.</span><span class="sxs-lookup"><span data-stu-id="84968-157">This secret must be complex enough that it can't be guessed.</span></span>

<span data-ttu-id="84968-158">Um bom segredo compartilhado é um GUID aleatório, que é inserido manualmente na configuração do cliente e do servidor.</span><span class="sxs-lookup"><span data-stu-id="84968-158">A good shared secret is a random GUID, which is manually entered in both the server's and client's configuration.</span></span> <span data-ttu-id="84968-159">Para criar um, você pode, por exemplo, usar o `New-Guid` comando no PowerShell.</span><span class="sxs-lookup"><span data-stu-id="84968-159">To create one you can, for example, use the `New-Guid` command in PowerShell.</span></span>

<span data-ttu-id="84968-160">Verifique se esse segredo compartilhado nunca se comunica em canais inseguros.</span><span class="sxs-lookup"><span data-stu-id="84968-160">Make sure this shared secret is never communicated over insecure channels.</span></span> <span data-ttu-id="84968-161">A biblioteca de comunicação remota garante que o segredo compartilhado sempre seja enviado criptografado e somente a pares confiáveis.</span><span class="sxs-lookup"><span data-stu-id="84968-161">The remoting library ensures that the shared secret is always sent encrypted, and only to trusted peers.</span></span>

<span data-ttu-id="84968-162">**Caso de uso 2:** Você também precisa verificar a identidade do usuário do aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="84968-162">**Use case 2:** You also need to verify the identity of the client app's user.</span></span>

<span data-ttu-id="84968-163">Um segredo compartilhado não será suficiente para cobrir esse caso de uso.</span><span class="sxs-lookup"><span data-stu-id="84968-163">A shared secret won't be enough to cover this use case.</span></span> <span data-ttu-id="84968-164">Em vez disso, você pode usar tokens criados por um provedor de identidade.</span><span class="sxs-lookup"><span data-stu-id="84968-164">Instead, you can use tokens created by an identity provider.</span></span> <span data-ttu-id="84968-165">Um fluxo de trabalho de autenticação usando um provedor de identidade ficaria assim:</span><span class="sxs-lookup"><span data-stu-id="84968-165">An authentication workflow using an identity provider would look like this:</span></span>

* <span data-ttu-id="84968-166">O cliente autoriza no provedor de identidade e solicita um token</span><span class="sxs-lookup"><span data-stu-id="84968-166">The client authorizes against the identity provider and requests a token</span></span>
* <span data-ttu-id="84968-167">O provedor de identidade gera um token e o envia para o cliente</span><span class="sxs-lookup"><span data-stu-id="84968-167">The identity provider generates a token and sends it to the client</span></span>
* <span data-ttu-id="84968-168">O cliente envia esse token ao servidor por meio de comunicação remota do Holographic</span><span class="sxs-lookup"><span data-stu-id="84968-168">The client sends this token to the server through Holographic Remoting</span></span>
* <span data-ttu-id="84968-169">O servidor valida o token do cliente em relação ao provedor de identidade</span><span class="sxs-lookup"><span data-stu-id="84968-169">The server validates the client's token against the identity provider</span></span>

<span data-ttu-id="84968-170">Um exemplo de um provedor de identidade é a [plataforma Microsoft Identity](https://docs.microsoft.com/azure/active-directory/develop/).</span><span class="sxs-lookup"><span data-stu-id="84968-170">One example of an identity provider is the [Microsoft identity platform](https://docs.microsoft.com/azure/active-directory/develop/).</span></span>

<span data-ttu-id="84968-171">Como no caso de uso anterior, verifique se esses tokens não são enviados por meio de canais inseguros ou expostos de outra forma.</span><span class="sxs-lookup"><span data-stu-id="84968-171">Like in the previous use case, make sure these tokens aren't sent through insecure channels or otherwise exposed.</span></span>

## <a name="implementing-holographic-remoting-security"></a><span data-ttu-id="84968-172">Implementando a segurança de comunicação remota do Holographic</span><span class="sxs-lookup"><span data-stu-id="84968-172">Implementing holographic remoting security</span></span>

<span data-ttu-id="84968-173">Lembre-se de que você precisa implementar aplicativos remotos e de Player personalizados se desejar habilitar a segurança da conexão.</span><span class="sxs-lookup"><span data-stu-id="84968-173">Remember that you need to implement custom remote and player apps if you want to enable connection security.</span></span> <span data-ttu-id="84968-174">Você pode usar os exemplos fornecidos como pontos de partida para seus próprios aplicativos.</span><span class="sxs-lookup"><span data-stu-id="84968-174">You can use the provided samples as starting points for your own apps.</span></span>

<span data-ttu-id="84968-175">Para habilitar a segurança, chame `ListenSecure()` em vez de e `Listen()` `ConnectSecure()` em vez de `Connect()` para estabelecer a conexão remota.</span><span class="sxs-lookup"><span data-stu-id="84968-175">To enable security, call `ListenSecure()` instead of `Listen()`, and `ConnectSecure()` instead of `Connect()` to establish the remoting connection.</span></span>

<span data-ttu-id="84968-176">Essas chamadas exigem que você forneça implementações de determinadas interfaces para fornecer e validar informações relacionadas à segurança:</span><span class="sxs-lookup"><span data-stu-id="84968-176">These calls require you to provide implementations of certain interfaces for providing and validating security-related information:</span></span>

* <span data-ttu-id="84968-177">O servidor precisa implementar um provedor de certificado e um validador de autenticação</span><span class="sxs-lookup"><span data-stu-id="84968-177">The server needs to implement a certificate provider and an authentication validator</span></span>
* <span data-ttu-id="84968-178">O cliente precisa implementar um provedor de autenticação e um validador de certificado.</span><span class="sxs-lookup"><span data-stu-id="84968-178">The client needs to implement an authentication provider and a certificate validator.</span></span>

<span data-ttu-id="84968-179">Todas as interfaces têm uma função solicitando que você execute uma ação, que recebe um objeto de retorno de chamada como parâmetro.</span><span class="sxs-lookup"><span data-stu-id="84968-179">All interfaces have a function requesting you to take action, which receives a callback object as parameter.</span></span> <span data-ttu-id="84968-180">Usando esse objeto, você pode implementar facilmente a manipulação assíncrona da solicitação.</span><span class="sxs-lookup"><span data-stu-id="84968-180">Using this object, you can easily implement asynchronous handling of the request.</span></span> <span data-ttu-id="84968-181">Mantenha uma referência a esse objeto e chame a função de conclusão quando a ação assíncrona for concluída.</span><span class="sxs-lookup"><span data-stu-id="84968-181">Keep a reference to this object, and call the completion function when the asynchronous action is complete.</span></span> <span data-ttu-id="84968-182">A função de conclusão pode ser chamada de qualquer thread.</span><span class="sxs-lookup"><span data-stu-id="84968-182">The completion function may be called from any thread.</span></span>

>[!TIP]
><span data-ttu-id="84968-183">A implementação de interfaces do WinRT pode ser feita facilmente usando C++/WinRT.</span><span class="sxs-lookup"><span data-stu-id="84968-183">Implementing WinRT interfaces can easily be done using C++/WinRT.</span></span> <span data-ttu-id="84968-184">O capítulo [criar APIs com C++/WinRT](https://docs.microsoft.com//windows/uwp/cpp-and-winrt-apis/author-apis) descreve isso em detalhes.</span><span class="sxs-lookup"><span data-stu-id="84968-184">The [Author APIs with C++/WinRT](https://docs.microsoft.com//windows/uwp/cpp-and-winrt-apis/author-apis) chapter describes this in detail.</span></span>

>[!IMPORTANT]
><span data-ttu-id="84968-185">O `build\native\include\HolographicAppRemoting\Microsoft.Holographic.AppRemoting.idl` dentro do pacote NuGet contém documentação detalhada para a API relacionada a conexões seguras.</span><span class="sxs-lookup"><span data-stu-id="84968-185">The `build\native\include\HolographicAppRemoting\Microsoft.Holographic.AppRemoting.idl` inside the NuGet package contains detailed documentation for the API related to secure connections.</span></span>

### <a name="implementing-a-certificate-provider"></a><span data-ttu-id="84968-186">Implementando um provedor de certificados</span><span class="sxs-lookup"><span data-stu-id="84968-186">Implementing a certificate provider</span></span>

<span data-ttu-id="84968-187">Os provedores de certificado fornecem o aplicativo de servidor com o certificado a ser usado.</span><span class="sxs-lookup"><span data-stu-id="84968-187">Certificate providers supply the server application with the certificate to use.</span></span> <span data-ttu-id="84968-188">A implementação consiste em duas partes:</span><span class="sxs-lookup"><span data-stu-id="84968-188">The implementation consists of two parts:</span></span>

1) <span data-ttu-id="84968-189">Um objeto de certificado, que implementa a `ICertificate` interface:</span><span class="sxs-lookup"><span data-stu-id="84968-189">A certificate object, which implements the `ICertificate` interface:</span></span>

    * <span data-ttu-id="84968-190">`GetCertificatePfx()` deve retornar o conteúdo binário de um `PKCS#12` repositório de certificados.</span><span class="sxs-lookup"><span data-stu-id="84968-190">`GetCertificatePfx()` should return the binary contents of a `PKCS#12` certificate store.</span></span> <span data-ttu-id="84968-191">Um `.pfx` arquivo contém `PKCS#12` dados, portanto, seu conteúdo pode ser usado diretamente aqui.</span><span class="sxs-lookup"><span data-stu-id="84968-191">A `.pfx` file contains `PKCS#12` data, so its contents can be used directly here.</span></span>
    * <span data-ttu-id="84968-192">`GetSubjectName()` deve retornar o nome amigável que identifica o certificado a ser usado.</span><span class="sxs-lookup"><span data-stu-id="84968-192">`GetSubjectName()` should return the friendly name that identifies the certificate to use.</span></span> <span data-ttu-id="84968-193">Se nenhum nome amigável for atribuído ao certificado, essa função deverá retornar o nome da entidade do certificado.</span><span class="sxs-lookup"><span data-stu-id="84968-193">If no friendly name is assigned to the certificate, this function should return the certificate's subject name.</span></span>
    * <span data-ttu-id="84968-194">`GetPfxPassword()` deve retornar a senha necessária para abrir o repositório de certificados (ou uma cadeia de caracteres vazia se nenhuma senha for necessária).</span><span class="sxs-lookup"><span data-stu-id="84968-194">`GetPfxPassword()` should return the password required to open the certificate store (or an empty string if no password is required).</span></span>

2) <span data-ttu-id="84968-195">Um provedor de certificados que implementa a `ICertificateProvider` interface:</span><span class="sxs-lookup"><span data-stu-id="84968-195">A certificate provider implementing the `ICertificateProvider` interface:</span></span>
    * <span data-ttu-id="84968-196">`GetCertificate()` deve construir um objeto de certificado e retorná-lo chamando `CertificateReceived()` no objeto de retorno de chamada.</span><span class="sxs-lookup"><span data-stu-id="84968-196">`GetCertificate()` should construct a certificate object and return it by calling `CertificateReceived()` on the callback object.</span></span>

### <a name="implementing-an-authentication-validator"></a><span data-ttu-id="84968-197">Implementando um validador de autenticação</span><span class="sxs-lookup"><span data-stu-id="84968-197">Implementing an authentication validator</span></span>

<span data-ttu-id="84968-198">Os validadores de autenticação recebem o token de autenticação enviado pelo cliente e respondem com o resultado da validação.</span><span class="sxs-lookup"><span data-stu-id="84968-198">Authentication validators receive the authentication token sent by the client, and answer back with the validation result.</span></span>

<span data-ttu-id="84968-199">Implemente a `IAuthenticationReceiver` interface da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="84968-199">Implement the `IAuthenticationReceiver` interface as follows:</span></span>

* <span data-ttu-id="84968-200">`GetRealm()` deve retornar o nome do realm de autenticação (um realm de HTTP usado durante o handshake de conexão remota).</span><span class="sxs-lookup"><span data-stu-id="84968-200">`GetRealm()` should return the name of the authentication realm (an HTTP realm  used during the remoting connection handshake).</span></span>
* <span data-ttu-id="84968-201">`ValidateToken()` deve validar o token de autenticação do cliente e chamar `ValidationCompleted()` o objeto de retorno de chamada com o resultado da validação.</span><span class="sxs-lookup"><span data-stu-id="84968-201">`ValidateToken()` should validate the client authentication token and call `ValidationCompleted()` on the callback object with the validation result.</span></span>

### <a name="implementing-an-authentication-provider"></a><span data-ttu-id="84968-202">Implementando um provedor de autenticação</span><span class="sxs-lookup"><span data-stu-id="84968-202">Implementing an authentication provider</span></span>

<span data-ttu-id="84968-203">Os provedores de autenticação geram ou recuperam o token de autenticação a ser enviado ao servidor.</span><span class="sxs-lookup"><span data-stu-id="84968-203">Authentication providers generate or retrieve the authentication token to be sent to the server.</span></span>

<span data-ttu-id="84968-204">Implemente a `IAuthenticationProvider` interface da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="84968-204">Implement the `IAuthenticationProvider` interface as follows:</span></span>

* <span data-ttu-id="84968-205">`GetToken()` deve gerar ou recuperar o token de autenticação a ser enviado.</span><span class="sxs-lookup"><span data-stu-id="84968-205">`GetToken()` should generate or retrieve the authentication token to be sent.</span></span> <span data-ttu-id="84968-206">Quando o token estiver pronto, chame o `TokenReceived()` método no objeto de retorno de chamada.</span><span class="sxs-lookup"><span data-stu-id="84968-206">Once the token is ready, call the `TokenReceived()` method on the callback object.</span></span>

### <a name="implementing-a-certificate-validator"></a><span data-ttu-id="84968-207">Implementando um validador de certificado</span><span class="sxs-lookup"><span data-stu-id="84968-207">Implementing a certificate validator</span></span>

<span data-ttu-id="84968-208">Os validadores de certificado recebem a cadeia de certificados enviada pelo servidor e determinam se o servidor pode ser confiável.</span><span class="sxs-lookup"><span data-stu-id="84968-208">Certificate validators receive the certificate chain sent by the server and determine whether the server can be trusted.</span></span>

<span data-ttu-id="84968-209">Para validar certificados, você pode usar a lógica de validação do sistema subjacente.</span><span class="sxs-lookup"><span data-stu-id="84968-209">To validate certificates, you can use the validation logic of the underlying system.</span></span> <span data-ttu-id="84968-210">Essa validação de sistema pode dar suporte a sua própria lógica de validação ou substituí-la completamente.</span><span class="sxs-lookup"><span data-stu-id="84968-210">This system validation can either support your own validation logic, or replace it altogether.</span></span> <span data-ttu-id="84968-211">Se você não passar seu próprio validador de certificado ao solicitar uma conexão segura, a validação do sistema será usada automaticamente.</span><span class="sxs-lookup"><span data-stu-id="84968-211">If you don't pass your own certificate validator when requesting a secure connection, system validation will be used automatically.</span></span>

<span data-ttu-id="84968-212">No Windows, a validação do sistema verificará se há:</span><span class="sxs-lookup"><span data-stu-id="84968-212">On Windows, the system validation will check for:</span></span>

* <span data-ttu-id="84968-213">Integridade da cadeia de certificados: os certificados formam uma cadeia consistente que termina em um certificado raiz confiável</span><span class="sxs-lookup"><span data-stu-id="84968-213">Integrity of the certificate chain: the certificates form a consistent chain that ends at a trusted root certificate</span></span>
* <span data-ttu-id="84968-214">Validade do certificado: o certificado do servidor está dentro de seu período de validade e é emitido para fins de autenticação do servidor</span><span class="sxs-lookup"><span data-stu-id="84968-214">Certificate validity: the server's certificate is within its validity timespan, and is issued for the purpose of server authentication</span></span>
* <span data-ttu-id="84968-215">Revogação: o certificado não foi revogado</span><span class="sxs-lookup"><span data-stu-id="84968-215">Revocation: The certificate hasn't been revoked</span></span>
* <span data-ttu-id="84968-216">Correspondência de nome: o nome de host do servidor corresponde a um dos nomes de host para os quais o certificado foi emitido</span><span class="sxs-lookup"><span data-stu-id="84968-216">Name match: The host name of the server matches one of the host names the certificate was issued for</span></span>

<span data-ttu-id="84968-217">Implemente a `ICertificateValidator` interface da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="84968-217">Implement the `ICertificateValidator` interface as follows:</span></span>

 * <span data-ttu-id="84968-218">`PerformSystemValidation()` deve retornar `true` se uma validação do sistema, conforme descrito acima, deve ser executada.</span><span class="sxs-lookup"><span data-stu-id="84968-218">`PerformSystemValidation()` should return `true` if a system validation as described above should be performed.</span></span> <span data-ttu-id="84968-219">Nesse caso, o resultado da validação do sistema é passado como uma entrada para o `ValidateCertificate()` método.</span><span class="sxs-lookup"><span data-stu-id="84968-219">In this case, the system validation result is passed as an input to the `ValidateCertificate()` method.</span></span>
* <span data-ttu-id="84968-220">`ValidateCertificate()` deve validar a cadeia de certificados e, em seguida, chamar `CertificateValidated()` o retorno de chamada passado com o resultado de validação final.</span><span class="sxs-lookup"><span data-stu-id="84968-220">`ValidateCertificate()` should validate the certificate chain and then call `CertificateValidated()` on the passed callback with the final validation result.</span></span> <span data-ttu-id="84968-221">Esse método aceita a cadeia de certificados, o nome do servidor com o qual a conexão está sendo estabelecida e se uma verificação de revogação deve ser forçada.</span><span class="sxs-lookup"><span data-stu-id="84968-221">This method accepts the certificate chain, the name of the server the connection is being established with, and whether a revocation check should be forced.</span></span> <span data-ttu-id="84968-222">Se a cadeia de certificados contiver vários certificados, o primeiro será o certificado do assunto.</span><span class="sxs-lookup"><span data-stu-id="84968-222">If the certificate chain contains multiple certificates, the first one is the subject certificate.</span></span>

>[!NOTE]
><span data-ttu-id="84968-223">Se o caso de uso exigir uma forma diferente de validação (consulte o caso de uso de certificado #1 acima), ignore a validação do sistema inteiramente.</span><span class="sxs-lookup"><span data-stu-id="84968-223">If your use case requires a different form of validation (see certificate use case #1 above), bypass system validation entirely.</span></span> <span data-ttu-id="84968-224">Em vez disso, use qualquer API ou biblioteca que possa manipular certificados X. 509 codificados em DER para decodificar a cadeia de certificados e executar as verificações necessárias para seu caso de uso.</span><span class="sxs-lookup"><span data-stu-id="84968-224">Instead, use any API or library that can handle DER-encoded X.509 certificates to decode the certificate chain and perform the checks needed for your use case.</span></span>

## <a name="secure-connection-using-the-openxr-api"></a><span data-ttu-id="84968-225">Conexão segura usando a API OpenXR</span><span class="sxs-lookup"><span data-stu-id="84968-225">Secure connection using the OpenXR API</span></span>

<span data-ttu-id="84968-226">Ao usar a API do [OpenXR](../native/openxr.md) , toda a conexão segura relacionada está disponível como parte da `XR_MSFT_holographic_remoting` extensão OpenXR.</span><span class="sxs-lookup"><span data-stu-id="84968-226">When using the the [OpenXR API](../native/openxr.md) all secure connection related API is available as part of the `XR_MSFT_holographic_remoting` OpenXR extension.</span></span>

>[!IMPORTANT]
><span data-ttu-id="84968-227">Para saber mais sobre a API de extensão de OpenXR de comunicação remota Holographic, confira a [especificação](https://htmlpreview.github.io/?https://github.com/microsoft/MixedReality-HolographicRemoting-Samples/blob/master/remote_openxr/specification.html) que pode ser encontrada no [repositório GitHub de exemplos de comunicação remota Holographic](https://github.com/microsoft/MixedReality-HolographicRemoting-Samples).</span><span class="sxs-lookup"><span data-stu-id="84968-227">To learn about the Holographic Remoting OpenXR extension API, check out the [specification](https://htmlpreview.github.io/?https://github.com/microsoft/MixedReality-HolographicRemoting-Samples/blob/master/remote_openxr/specification.html) which can be found in the [Holographic Remoting samples github repository](https://github.com/microsoft/MixedReality-HolographicRemoting-Samples).</span></span>

<span data-ttu-id="84968-228">Os principais elementos para conexão segura usando a `XR_MSFT_holographic_remoting` extensão OpenXR são os seguintes retornos de chamada.</span><span class="sxs-lookup"><span data-stu-id="84968-228">The key elements for secure connection using the `XR_MSFT_holographic_remoting` OpenXR extension are the following callbacks.</span></span>
- <span data-ttu-id="84968-229">`xrRemotingRequestAuthenticationTokenCallbackMSFT`, gera ou recupera o token de autenticação a ser enviado.</span><span class="sxs-lookup"><span data-stu-id="84968-229">`xrRemotingRequestAuthenticationTokenCallbackMSFT`, generates or retrieves the authentication token to be sent.</span></span>
- <span data-ttu-id="84968-230">`xrRemotingValidateServerCertificateCallbackMSFT`, valida a cadeia de certificados.</span><span class="sxs-lookup"><span data-stu-id="84968-230">`xrRemotingValidateServerCertificateCallbackMSFT`, validates the certificate chain.</span></span>
- <span data-ttu-id="84968-231">`xrRemotingValidateAuthenticationTokenCallbackMSFT`, valida o token de autenticação do cliente.</span><span class="sxs-lookup"><span data-stu-id="84968-231">`xrRemotingValidateAuthenticationTokenCallbackMSFT`, validates the client authentication token.</span></span>
- <span data-ttu-id="84968-232">`xrRemotingRequestServerCertificateCallbackMSFT`, forneça o aplicativo de servidor com o certificado a ser usado.</span><span class="sxs-lookup"><span data-stu-id="84968-232">`xrRemotingRequestServerCertificateCallbackMSFT`, supply the server application with the certificate to use.</span></span>

<span data-ttu-id="84968-233">Esses retornos de chamada podem ser fornecidos para o tempo de execução do OpenXR remoto via `xrRemotingSetSecureConnectionClientCallbacksMSFT` e `xrRemotingSetSecureConnectionServerCallbacksMSFT` .</span><span class="sxs-lookup"><span data-stu-id="84968-233">These callbacks can be provided to the remoting OpenXR runtime via `xrRemotingSetSecureConnectionClientCallbacksMSFT` and `xrRemotingSetSecureConnectionServerCallbacksMSFT`.</span></span> <span data-ttu-id="84968-234">Além disso, a conexão segura precisa ser habilitada por meio do parâmetro secureConnection na `XrRemotingConnectInfoMSFT` estrutura ou da `XrRemotingListenInfoMSFT` estrutura, dependendo se você estiver usando o `xrRemotingConnectMSFT` ou o `xrRemotingListenMSFT` .</span><span class="sxs-lookup"><span data-stu-id="84968-234">Additionally, the secure connection needs to be enabled via the secureConnection parameter on the `XrRemotingConnectInfoMSFT` structure or the `XrRemotingListenInfoMSFT` structure depending on whether you are using `xrRemotingConnectMSFT` or `xrRemotingListenMSFT`.</span></span>

<span data-ttu-id="84968-235">Essa API é bastante semelhante à API baseada em IDL descrita em [implementando a segurança de comunicação remota do Holographic](#implementing-holographic-remoting-security) , mas em vez de implementar interfaces, você deve fornecer implementações de retorno de chamada.</span><span class="sxs-lookup"><span data-stu-id="84968-235">This API is quite similar to the IDL based API described in [Implementing holographic remoting security](#implementing-holographic-remoting-security) but instead of implementing interfaces your are supposed to provide callback implementations.</span></span> <span data-ttu-id="84968-236">Você pode encontrar um exemplo detalhado como parte do aplicativo de exemplo OpenXR encontrado no [repositório GitHub de exemplos de comunicação remota do Holographic](https://github.com/microsoft/MixedReality-HolographicRemoting-Samples).</span><span class="sxs-lookup"><span data-stu-id="84968-236">You can find an detailed example as part of the OpenXR sample app found in the [Holographic Remoting samples github repository](https://github.com/microsoft/MixedReality-HolographicRemoting-Samples).</span></span>

## <a name="see-also"></a><span data-ttu-id="84968-237">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="84968-237">See Also</span></span>
* [<span data-ttu-id="84968-238">Escrevendo um aplicativo remoto de comunicação remota do Holographic usando as APIs do Windows Mixed Realiy</span><span class="sxs-lookup"><span data-stu-id="84968-238">Writing a Holographic Remoting remote app using Windows Mixed Realiy APIs</span></span>](holographic-remoting-create-remote-wmr.md)
* [<span data-ttu-id="84968-239">Escrevendo um aplicativo remoto de comunicação remota do Holographic usando APIs do OpenXR</span><span class="sxs-lookup"><span data-stu-id="84968-239">Writing a Holographic Remoting remote app using OpenXR APIs</span></span>](holographic-remoting-create-remote-openxr.md)
* [<span data-ttu-id="84968-240">Como escrever um aplicativo personalizado do Holographic Remoting Player</span><span class="sxs-lookup"><span data-stu-id="84968-240">Writing a custom Holographic Remoting player app</span></span>](holographic-remoting-create-player.md)
* [<span data-ttu-id="84968-241">Solução de problemas e limitações de comunicação remota do Holographic</span><span class="sxs-lookup"><span data-stu-id="84968-241">Holographic Remoting troubleshooting and limitations</span></span>](holographic-remoting-troubleshooting.md)
* [<span data-ttu-id="84968-242">Termos de licença de software de comunicação remota holográfica</span><span class="sxs-lookup"><span data-stu-id="84968-242">Holographic Remoting software license terms</span></span>](https://docs.microsoft.com//legal/mixed-reality/microsoft-holographic-remoting-software-license-terms)
* [<span data-ttu-id="84968-243">Política de Privacidade da Microsoft</span><span class="sxs-lookup"><span data-stu-id="84968-243">Microsoft Privacy Statement</span></span>](https://go.microsoft.com/fwlink/?LinkId=521839)
