---
title: Bloqueios mundiais e âncoras espaciais no Unity
description: Saiba como usar as ferramentas de bloqueio mundial e âncoras espaciais em aplicativos de realidade misturada no Unity.
author: hferrone
ms.author: v-hferrone
ms.date: 04/7/2021
ms.topic: article
keywords: Unity, âncoras espaciais, repositório de ancoragem, HoloLens, headset de realidade misturada, headset de realidade mista do Windows, headset de realidade virtual, ferramentas de bloqueio mundial, hologramas
ms.openlocfilehash: 4fc982244a766bb34f15b356d608f2aad18f7a88
ms.sourcegitcommit: 3e36b2fbbcc250c49aaf8ca1b6133cf0e9db69fa
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/16/2021
ms.locfileid: "107528762"
---
# <a name="world-locking-and-spatial-anchors-in-unity"></a><span data-ttu-id="8a3d3-104">Bloqueios mundiais e âncoras espaciais no Unity</span><span class="sxs-lookup"><span data-stu-id="8a3d3-104">World locking and spatial anchors in Unity</span></span>

![Imagem do herói das ferramentas de bloqueio mundial](images/wlt-img-01.jpeg)

<span data-ttu-id="8a3d3-106">Fazer com que seus hologramas permaneçam em vigor, mover-se para você ou, em alguns casos, posicioná-los em relação a outros hologramas é uma grande parte da criação de aplicativos de realidade misturada.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-106">Getting your holograms to stay in place, move with you, or in some cases position themselves relative to other holograms is a big part of creating Mixed Reality applications.</span></span> <span data-ttu-id="8a3d3-107">Este artigo o guiará pela solução recomendada usando as ferramentas de bloqueio mundial, mas também abordaremos a configuração manual das âncoras espaciais em seus projetos do Unity.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-107">This article will take you through our recommended solution using World Locking Tools, but we'll also cover manually setting up spatial anchors in your Unity projects.</span></span> <span data-ttu-id="8a3d3-108">Antes de passarmos por qualquer código, é importante entender como o Unity lida com o espaço de coordenadas e as âncoras em seu próprio mecanismo.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-108">Before we jump into any code, it's important to understand how Unity handles coordinate space and anchors in its own engine.</span></span>

## <a name="world-scale-coordinate-systems"></a><span data-ttu-id="8a3d3-109">Sistemas de coordenadas de escala mundial</span><span class="sxs-lookup"><span data-stu-id="8a3d3-109">World-scale coordinate systems</span></span>

<span data-ttu-id="8a3d3-110">Hoje em dia, ao escrever jogos, aplicativos de visualização de dados ou aplicativos de realidade virtual, a abordagem típica é estabelecer um **sistema de coordenadas do mundo** absoluto que todas as outras coordenadas possam Mapear de forma confiável de volta para o.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-110">Today, when writing games, data visualization apps, or virtual reality apps, the typical approach is to establish one absolute **world coordinate system** that all other coordinates can reliably map back to.</span></span> <span data-ttu-id="8a3d3-111">Nesse ambiente, você sempre pode encontrar uma transformação estável que define uma relação entre quaisquer dois objetos nesse mundo.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-111">In that environment, you can always find a stable transform that defines a relationship between any two objects in that world.</span></span> <span data-ttu-id="8a3d3-112">Se você não moveu esses objetos, suas transformações relativas sempre permanecerão as mesmas.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-112">If you didn't move those objects, their relative transforms would always remain the same.</span></span> <span data-ttu-id="8a3d3-113">Esse tipo de sistema de coordenadas global é fácil de ser adequado ao renderizar um mundo puramente virtual em que você conhece toda a geometria com antecedência.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-113">This kind of global coordinate system is easy to get right when rendering a purely virtual world where you know all of the geometry in advance.</span></span> <span data-ttu-id="8a3d3-114">Atualmente, os aplicativos VR em escala de sala normalmente estabelecem esse tipo de sistema de coordenadas de escala de sala absoluto com sua origem no chão.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-114">Room-scale VR apps today typically establish this kind of absolute room-scale coordinate system with its origin on the floor.</span></span>

<span data-ttu-id="8a3d3-115">Por outro lado, um dispositivo de realidade misturada sem compartilhamento de porta, como o HoloLens, tem uma compreensão dinâmica orientada por sensor do mundo, ajustando continuamente seu conhecimento ao longo do tempo do ambiente do usuário à medida que eles orientam muitos medidores em todo um andar de um edifício.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-115">In contrast, an untethered mixed reality device such as HoloLens has a dynamic sensor-driven understanding of the world, continuously adjusting its knowledge over time of the user's surroundings as they walk many meters across an entire floor of a building.</span></span> <span data-ttu-id="8a3d3-116">Em uma experiência de escala mundial, se você colocou todos os seus hologramas em um sistema de coordenadas rígidos ingênuas, esses hologramas acabarão se esgotando ao longo do tempo, seja com base no mundo ou em relação uns aos outros.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-116">In a world-scale experience, if you placed all your holograms in a naive rigid coordinate system, those holograms would end up drifting over time, either based on the world or relative to each other.</span></span>

<span data-ttu-id="8a3d3-117">Por exemplo, o headset pode acreditar, no momento, que dois locais do mundo tenham 4 metros de distância e depois refinam essa compreensão, aprendendo que os locais estão na verdade 3,9 metros de distância.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-117">For example, the headset may currently believe two locations in the world to be 4 meters apart, and then later refine that understanding, learning that the locations are in fact 3.9 meters apart.</span></span> <span data-ttu-id="8a3d3-118">Se esses hologramas tiverem sido inicialmente colocados quatro metros de distância em um único sistema de coordenadas rígidos, um deles sempre pareceria de 0,1 metros do mundo real.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-118">If those holograms had initially been placed 4 meters apart in a single rigid coordinate system, one of them would then always appear 0.1 meters off from the real world.</span></span>

<span data-ttu-id="8a3d3-119">Você pode colocar manualmente **âncoras espaciais** no Unity para manter a posição de um holograma no mundo físico quando o usuário é móvel, mas isso sacrifica a autoconsistência no mundo virtual.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-119">You can manually place **spatial anchors** in Unity to maintain a hologram's position in the physical world when the user is mobile - however, this sacrifices the self-consistency within the virtual world.</span></span> <span data-ttu-id="8a3d3-120">Âncoras diferentes estão constantemente mudando em relação umas às outras e também estão passando pelo espaço de coordenadas global.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-120">Different anchors are constantly moving in relation to one another, and are also moving through the global coordinate space.</span></span> <span data-ttu-id="8a3d3-121">Nesse cenário, tarefas simples, como layout, tornam-se difíceis e problemas de simulação de física.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-121">In this scenario, simple tasks like layout become difficult and physics simulation problematic.</span></span>

<span data-ttu-id="8a3d3-122">As **ferramentas de bloqueio mundial** oferecem o melhor dos dois mundos, estabilizando um único sistema de coordenadas rígidos usando um fornecimento interno de âncoras espaciais espalhados por toda a cena virtual à medida que o usuário se movimenta.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-122">**World Locking Tools** gets you the best of both worlds, stabilizing a single rigid coordinate system using an internal supply of spatial anchors spread throughout the virtual scene as the user moves around.</span></span> <span data-ttu-id="8a3d3-123">As ferramentas analisam as coordenadas da câmera e as âncoras espaciais a cada quadro.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-123">The tools analyze the coordinates of the camera and those spatial anchors every frame.</span></span> <span data-ttu-id="8a3d3-124">Em vez de alterar as coordenadas de tudo no mundo para compensar as correções nas coordenadas do cabeçalho do usuário, as ferramentas simplesmente corrigem as coordenadas da cabeça.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-124">Instead of changing the coordinates of everything in the world to compensate for the corrections in the coordinates of the user's head, the tools just fix the head's coordinates instead.</span></span>

## <a name="choosing-your-world-locking-approach"></a><span data-ttu-id="8a3d3-125">Escolhendo sua abordagem de bloqueio mundial</span><span class="sxs-lookup"><span data-stu-id="8a3d3-125">Choosing your world locking approach</span></span>

* <span data-ttu-id="8a3d3-126">**Nossa recomendação** é usar as **ferramentas de bloqueio mundial** para todas as suas necessidades de posicionamento de holograma.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-126">**Our recommendation** is to use **World Locking Tools** for all your hologram positioning needs.</span></span> 
    * <span data-ttu-id="8a3d3-127">As ferramentas de bloqueio Mundial fornecem um sistema de coordenadas estável que minimiza as inconsistências visíveis entre marcadores virtuais e do mundo real.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-127">World Locking Tools provides a stable coordinate system that minimizes the visible inconsistencies between virtual and real world markers.</span></span> <span data-ttu-id="8a3d3-128">Em outras palavras, o mundo de ti bloqueia toda a cena com um pool compartilhado de âncoras, em vez de bloquear cada grupo de objetos com a própria âncora individual do grupo.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-128">Put another way, it world-locks the entire scene with a shared pool of anchors, rather than locking each group of objects with the group's own individual anchor.</span></span>
* <span data-ttu-id="8a3d3-129">**Para o Unity 2019/2020 usando o OpenXR ou o plug-in do Windows XR**, você precisa usar o **ARAnchorManager**</span><span class="sxs-lookup"><span data-stu-id="8a3d3-129">**For Unity 2019/2020 using OpenXR or the Windows XR Plugin**, you need to use **ARAnchorManager**</span></span>
* <span data-ttu-id="8a3d3-130">**Para versões mais antigas do Unity ou** projetos de WSA, você precisa usar o **WorldAnchor**</span><span class="sxs-lookup"><span data-stu-id="8a3d3-130">**For older Unity versions or WSA** projects, you need to use **WorldAnchor**</span></span>

## <a name="setting-up-world-locking"></a><span data-ttu-id="8a3d3-131">Configurando o bloqueio mundial</span><span class="sxs-lookup"><span data-stu-id="8a3d3-131">Setting up world locking</span></span> 

[!INCLUDE[](includes/world-locking/world-locking-setup.md)]

## <a name="persistent-world-locking"></a><span data-ttu-id="8a3d3-132">Bloqueio mundial persistente</span><span class="sxs-lookup"><span data-stu-id="8a3d3-132">Persistent world locking</span></span>

<span data-ttu-id="8a3d3-133">Âncoras espaciais salvam hologramas em espaço real entre as sessões do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-133">Spatial anchors save holograms in real-world space between application sessions.</span></span> <span data-ttu-id="8a3d3-134">Depois de salvo no repositório de âncora do HoloLens, eles podem ser encontrados e carregados em diferentes sessões e são um fallback ideal quando não há conectividade com a Internet.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-134">Once saved in the HoloLens' anchor store, they can be found and loaded in different sessions and are an ideal fallback when there's no internet connectivity.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8a3d3-135">Elas são armazenadas no dispositivo, enquanto as Âncoras Espaciais do Azure são armazenadas na nuvem.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-135">Local anchors are stored on device, while Azure Spatial Anchors are stored in the cloud.</span></span> <span data-ttu-id="8a3d3-136">Se você pretende usar os serviços de nuvem do Azure para armazenar suas âncoras, temos um documento que pode orientar você na integração das [Âncoras Espaciais do Azure](../mixed-reality-cloud-services.md#azure-spatial-anchors).</span><span class="sxs-lookup"><span data-stu-id="8a3d3-136">If you're looking to use Azure cloud services to store your anchors, we have a document that can walk you through integrating [Azure Spatial Anchors](../mixed-reality-cloud-services.md#azure-spatial-anchors).</span></span> <span data-ttu-id="8a3d3-137">Você pode ter âncoras locais e do Azure no mesmo projeto sem conflitos.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-137">Note that you can have local and Azure anchors in the same project without conflict.</span></span>

[!INCLUDE[](includes/world-locking/world-locking-persistence.md)]

## <a name="sharing-coordinate-spaces"></a><span data-ttu-id="8a3d3-138">Compartilhando espaços de coordenadas</span><span class="sxs-lookup"><span data-stu-id="8a3d3-138">Sharing coordinate spaces</span></span> 

<span data-ttu-id="8a3d3-139">Se você quiser compartilhar um espaço de coordenadas do mundo bloqueado, Confira nossa [documentação abrangente de experiência compartilhada](shared-experiences-in-unity.md).</span><span class="sxs-lookup"><span data-stu-id="8a3d3-139">If you want to share a world locked coordinate space, check out our comprehensive [shared experience documentation](shared-experiences-in-unity.md).</span></span>

<span data-ttu-id="8a3d3-140">Observe que as âncoras espaciais do Azure ainda não têm suporte diretamente nas ferramentas de bloqueio mundial e, portanto, experiências compartilhadas exigirão que você crie manualmente âncoras espaciais.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-140">Note that Azure Spatial Anchors is not yet supported directly within World Locking Tools, and so shared experiences will require you to manually create spatial anchors.</span></span>

## <a name="next-development-checkpoint"></a><span data-ttu-id="8a3d3-141">Próximo ponto de verificação de desenvolvimento</span><span class="sxs-lookup"><span data-stu-id="8a3d3-141">Next Development Checkpoint</span></span>

<span data-ttu-id="8a3d3-142">Se você estiver seguindo a jornada do ponto de verificação de desenvolvimento do Unity que apresentamos, você está no meio da exploração dos principais blocos de construção da realidade misturada.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-142">If you're following the Unity development checkpoint journey we've laid out, you're in the midst of exploring the Mixed Reality core building blocks.</span></span> <span data-ttu-id="8a3d3-143">Deste ponto, você pode prosseguir para o próximo bloco de construção:</span><span class="sxs-lookup"><span data-stu-id="8a3d3-143">From here, you can continue to the next building block:</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="8a3d3-144">Mapeamento espacial</span><span class="sxs-lookup"><span data-stu-id="8a3d3-144">Spatial mapping</span></span>](spatial-mapping-in-unity.md)

<span data-ttu-id="8a3d3-145">Ou vá diretamente para as funcionalidades e APIs da plataforma de Realidade Misturada:</span><span class="sxs-lookup"><span data-stu-id="8a3d3-145">Or jump to Mixed Reality platform capabilities and APIs:</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="8a3d3-146">Experiências compartilhadas</span><span class="sxs-lookup"><span data-stu-id="8a3d3-146">Shared experiences</span></span>](shared-experiences-in-unity.md)

<span data-ttu-id="8a3d3-147">Você sempre pode voltar para os [pontos de verificação de desenvolvimento do Unity](unity-development-overview.md#2-core-building-blocks) a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="8a3d3-147">You can always go back to the [Unity development checkpoints](unity-development-overview.md#2-core-building-blocks) at any time.</span></span>

## <a name="see-also"></a><span data-ttu-id="8a3d3-148">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="8a3d3-148">See Also</span></span>
* [<span data-ttu-id="8a3d3-149">Introdução às ferramentas de bloqueio mundial</span><span class="sxs-lookup"><span data-stu-id="8a3d3-149">World Locking Tools introduction</span></span>](https://microsoft.github.io/MixedReality-WorldLockingTools-Unity/DocGen/Documentation/IntroFAQ.html)
* [<span data-ttu-id="8a3d3-150">Guias de início rápido</span><span class="sxs-lookup"><span data-stu-id="8a3d3-150">Quickstart guides</span></span>](https://microsoft.github.io/MixedReality-WorldLockingTools-Unity/DocGen/Documentation/HowTos/QuickStart.html)
* [<span data-ttu-id="8a3d3-151">Tutoriais</span><span class="sxs-lookup"><span data-stu-id="8a3d3-151">Tutorials</span></span>](https://microsoft.github.io/MixedReality-WorldLockingTools-Samples/Tutorial/01_Minimal/01_Minimal.html)
* [<span data-ttu-id="8a3d3-152">Amostras</span><span class="sxs-lookup"><span data-stu-id="8a3d3-152">Samples</span></span>](https://microsoft.github.io/MixedReality-WorldLockingTools-Unity/DocGen/Documentation/HowTos/SampleApplications.html)
* [<span data-ttu-id="8a3d3-153">Persistência de ancoragem espacial</span><span class="sxs-lookup"><span data-stu-id="8a3d3-153">Spatial anchor persistence</span></span>](../../design/coordinate-systems.md#spatial-anchor-persistence)
* <span data-ttu-id="8a3d3-154"><a href="/azure/spatial-anchors" target="_blank">Âncoras Espaciais do Azure</a></span><span class="sxs-lookup"><span data-stu-id="8a3d3-154"><a href="/azure/spatial-anchors" target="_blank">Azure Spatial Anchors</a></span></span>
* <span data-ttu-id="8a3d3-155"><a href="/dotnet/api/Microsoft.Azure.SpatialAnchors" target="_blank">SDK de âncoras espaciais do Azure para Unity</a></span><span class="sxs-lookup"><span data-stu-id="8a3d3-155"><a href="/dotnet/api/Microsoft.Azure.SpatialAnchors" target="_blank">Azure Spatial Anchors SDK for Unity</a></span></span>
* [<span data-ttu-id="8a3d3-156">Escalas de experiência</span><span class="sxs-lookup"><span data-stu-id="8a3d3-156">Experience scales</span></span>](../../design/coordinate-systems.md#mixed-reality-experience-scales)
* [<span data-ttu-id="8a3d3-157">Estágio espacial</span><span class="sxs-lookup"><span data-stu-id="8a3d3-157">Spatial stage</span></span>](../../design/coordinate-systems.md#stage-frame-of-reference)
* [<span data-ttu-id="8a3d3-158">Como controlar a perda no Unity</span><span class="sxs-lookup"><span data-stu-id="8a3d3-158">Tracking loss in Unity</span></span>](tracking-loss-in-unity.md)
* [<span data-ttu-id="8a3d3-159">Âncoras espaciais</span><span class="sxs-lookup"><span data-stu-id="8a3d3-159">Spatial anchors</span></span>](../../design/spatial-anchors.md)
* [<span data-ttu-id="8a3d3-160">Experiências compartilhadas no Unity</span><span class="sxs-lookup"><span data-stu-id="8a3d3-160">Shared experiences in Unity</span></span>](shared-experiences-in-unity.md)
